<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="æ€ç»´ååŒå¤„ç†å™¨ - ç»“æ„åŒ–æ€è€ƒæ•´ç†ç³»ç»Ÿï¼Œå¸®åŠ©æ‚¨ç®¡ç†æ€ç»´æ¨¡å‹å’Œæ€è€ƒè®°å½•">
    <meta name="keywords" content="æ€ç»´æ¨¡å‹,æ€è€ƒæ•´ç†,çŸ¥è¯†ç®¡ç†,ç»“æ„åŒ–æ€è€ƒ,å“²å­¦,å…³ç³»æ¨¡å‹">
    <meta name="author" content="æ€ç»´ååŒå¤„ç†å™¨">
    <meta property="og:title" content="æ€ç»´ååŒå¤„ç†å™¨ - æ™ºèƒ½è§£æå¢å¼ºç‰ˆ">
    <meta property="og:description" content="ç»“æ„åŒ–æ€è€ƒæ•´ç†ç³»ç»Ÿï¼Œç®¡ç†æ‚¨çš„æ€ç»´æ¨¡å‹å’Œæ€è€ƒè®°å½•">
    <meta property="og:image" content="https://gift-aha.github.io/knowledge-base4/preview.png">
    <meta property="og:url" content="https://gift-aha.github.io/knowledge-base4">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="sync-helper.js"></script>
    <script>
    // ç§»åŠ¨ç«¯æ£€æµ‹
    (function() {
        const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const screenWidth = window.innerWidth;
        
        if ((isMobile || screenWidth < 768) && !location.href.includes('mobile')) {
            // é‡å®šå‘åˆ°ç®€åŒ–ç‰ˆç§»åŠ¨ç«¯
            location.href = 'v16-mobile-simple.html';
        }
    })();
    </script>
    <style>
        :root {
            --primary-color: #1a237e;
            --secondary-color: #283593;
            --accent-color: #5c6bc0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-bg: #f8f9fa;
            --dark-bg: #1a237e;
            --border-color: #e1e5eb;
            --text-color: #333;
            --text-light: #666;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: #f5f9fc;
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 60px; /* ç»™åº•éƒ¨å¯¼èˆªç•™ç©ºé—´ */
        }
        
        /* ç§»åŠ¨ç«¯é¡¶éƒ¨æ  */
        .mobile-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }
        
        .mobile-header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        .mobile-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .mobile-logo-icon {
            font-size: 22px;
        }
        
        .mobile-logo-text {
            font-size: 18px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
        }
        
        .mobile-header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .mobile-sync-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
        }
        
        .mobile-sync-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        
        .mobile-menu-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
        }
        
        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        
        /* ç§»åŠ¨ç«¯ä¾§è¾¹èœå• */
        .mobile-sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            bottom: 0;
            width: 280px;
            background: white;
            z-index: 1001;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            transition: left 0.3s ease;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .mobile-sidebar.active {
            left: 0;
        }
        
        .mobile-sidebar-header {
            padding: 20px;
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .mobile-sidebar-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .mobile-sidebar-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        
        .mobile-sidebar-close:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .mobile-sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
        }
        
        .mobile-nav-section {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .mobile-nav-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .mobile-nav-links {
            list-style: none;
        }
        
        .mobile-nav-links li {
            margin-bottom: 8px;
        }
        
        .mobile-nav-links a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: #555;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s;
            font-size: 15px;
        }
        
        .mobile-nav-links a:hover,
        .mobile-nav-links a.active {
            background-color: #e8edff;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .mobile-nav-links a i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        /* ç§»åŠ¨ç«¯é®ç½©å±‚ */
        .mobile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .mobile-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* ä¸»è¦å†…å®¹åŒº */
        .mobile-content {
            margin-top: 60px;
            padding: 15px;
            min-height: calc(100vh - 120px);
        }
        
        /* ç§»åŠ¨ç«¯å¡ç‰‡æ ·å¼ */
        .mobile-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid var(--primary-color);
        }
        
        .mobile-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        
        .mobile-card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        
        .mobile-card-subtitle {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 12px;
        }
        
        .mobile-card-content {
            font-size: 14px;
            color: var(--text-color);
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .mobile-card-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 12px;
            color: var(--text-light);
        }
        
        /* ç§»åŠ¨ç«¯æœç´¢æ  */
        .mobile-search {
            position: relative;
            margin-bottom: 20px;
        }
        
        .mobile-search input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            font-size: 14px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }
        
        .mobile-search input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 2px 10px rgba(92, 107, 192, 0.2);
        }
        
        .mobile-search i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 16px;
        }
        
        /* ç§»åŠ¨ç«¯æ ‡ç­¾ */
        .mobile-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }
        
        .mobile-tag {
            padding: 6px 12px;
            background-color: rgba(92, 107, 192, 0.1);
            color: var(--accent-color);
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .mobile-tag:hover {
            background-color: rgba(92, 107, 192, 0.2);
            transform: translateY(-1px);
        }
        
        .mobile-tag.clickable {
            cursor: pointer;
        }
        
        /* ç§»åŠ¨ç«¯æŒ‰é’® */
        .mobile-btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .mobile-btn:active {
            transform: translateY(1px);
        }
        
        .mobile-btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .mobile-btn-primary:hover {
            background-color: var(--secondary-color);
        }
        
        .mobile-btn-secondary {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .mobile-btn-secondary:hover {
            background-color: #e9ecef;
        }
        
        .mobile-btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .mobile-btn-success:hover {
            background-color: #43a047;
        }
        
        /* ç§»åŠ¨ç«¯è¯¦æƒ…é¡µ */
        .mobile-detail {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .mobile-detail-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .mobile-detail-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
            line-height: 1.3;
        }
        
        .mobile-detail-subtitle {
            font-size: 16px;
            color: var(--text-light);
            margin-bottom: 10px;
        }
        
        .mobile-detail-id {
            font-size: 14px;
            color: var(--text-light);
            background-color: #f0f4f9;
            padding: 4px 10px;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 10px;
            font-family: monospace;
        }
        
        .mobile-detail-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .mobile-detail-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .mobile-detail-section h4 {
            font-size: 16px;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .mobile-detail-content {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-color);
        }
        
        /* å¯ç‚¹å‡»é“¾æ¥æ ·å¼ */
        .clickable-link {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            padding: 2px 4px;
            border-radius: 3px;
            display: inline-block;
        }
        
        .clickable-link:hover {
            color: var(--primary-color);
            background-color: rgba(92, 107, 192, 0.1);
        }
        
        .model-id-link {
            font-family: monospace;
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .model-id-link:hover {
            background-color: rgba(255, 152, 0, 0.2);
            color: #e68900;
        }
        
        .thought-id-link {
            font-family: monospace;
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .thought-id-link:hover {
            background-color: rgba(76, 175, 80, 0.2);
            color: #43a047;
        }
        
        /* ç§»åŠ¨ç«¯ç©ºçŠ¶æ€ */
        .mobile-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }
        
        .mobile-empty i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .mobile-empty p {
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        /* ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª */
        .mobile-bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            border-top: 1px solid var(--border-color);
        }
        
        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-light);
            text-decoration: none;
            font-size: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .mobile-nav-item:hover,
        .mobile-nav-item.active {
            color: var(--primary-color);
            background-color: rgba(26, 35, 126, 0.05);
        }
        
        .mobile-nav-item i {
            font-size: 20px;
        }
        
        /* ç§»åŠ¨ç«¯åŠ è½½åŠ¨ç”» */
        .mobile-loading {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            gap: 15px;
        }
        
        .mobile-loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(26, 35, 126, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* åŒæ­¥åŠ¨ç”» */
        .sync-pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* ç§»åŠ¨ç«¯å“åº”å¼è°ƒæ•´ */
        @media (max-width: 480px) {
            .mobile-content {
                padding: 10px;
            }
            
            .mobile-card {
                padding: 12px;
            }
            
            .mobile-detail {
                padding: 15px;
            }
            
            .mobile-logo-text {
                max-width: 120px;
            }
        }
        
        @media (max-width: 360px) {
            .mobile-logo-text {
                max-width: 100px;
                font-size: 16px;
            }
            
            .mobile-nav-item {
                padding: 6px 8px;
            }
            
            .mobile-nav-item i {
                font-size: 18px;
            }
        }
        
        /* ç§»åŠ¨ç«¯ç»Ÿè®¡å¡ç‰‡ */
        .mobile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mobile-stat-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .mobile-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .mobile-stat-label {
            font-size: 12px;
            color: var(--text-light);
        }
        
        /* ç§»åŠ¨ç«¯åˆ†é¡µ */
        .mobile-pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 15px;
        }
        
        .mobile-page-btn {
            padding: 8px 15px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .mobile-page-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .mobile-page-btn:hover:not(.active) {
            background-color: var(--light-bg);
        }
        
        /* ç§»åŠ¨ç«¯å…³è”ç½‘ç»œ */
        .mobile-network {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .mobile-network-node {
            padding: 8px 12px;
            background-color: rgba(92, 107, 192, 0.1);
            border-radius: 4px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(92, 107, 192, 0.2);
        }
        
        .mobile-network-node:hover {
            background-color: rgba(92, 107, 192, 0.2);
            transform: translateY(-2px);
        }
        
        .mobile-network-node.center {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        /* ç§»åŠ¨ç«¯æ¨¡æ€æ¡† */
        .mobile-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1002;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .mobile-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .mobile-modal-content {
            background: white;
            border-radius: 10px;
            padding: 20px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .mobile-modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .mobile-modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* ç§»åŠ¨ç«¯é€šçŸ¥ */
        .mobile-notification {
            position: fixed;
            top: 70px;
            right: 15px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.3s;
            max-width: 300px;
        }
        
        .mobile-notification.show {
            transform: translateX(0);
        }
        
        .mobile-notification.success {
            border-left: 4px solid var(--success-color);
        }
        
        .mobile-notification.info {
            border-left: 4px solid var(--accent-color);
        }
        
        .mobile-notification.warning {
            border-left: 4px solid var(--warning-color);
        }
        
        .mobile-notification.error {
            border-left: 4px solid var(--danger-color);
        }        
    </style>
</head>
<body>
    <!-- ç§»åŠ¨ç«¯é¡¶éƒ¨æ  -->
    <div class="mobile-header">
        <div class="mobile-header-content">
            <div class="mobile-logo">
                <div class="mobile-logo-icon">ğŸ§ </div>
                <div class="mobile-logo-text" id="logo-text">æ€ç»´ååŒå¤„ç†å™¨</div>
            </div>
            <div class="mobile-header-actions">
                <button class="mobile-sync-btn" id="sync-btn" title="åŒæ­¥æ•°æ®">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="mobile-menu-btn" id="menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- ç§»åŠ¨ç«¯é€šçŸ¥åŒºåŸŸ -->
    <div class="mobile-notification" id="notification"></div>
    
    <!-- ç§»åŠ¨ç«¯é®ç½©å±‚ -->
    <div class="mobile-overlay" id="overlay"></div>
    
    <!-- ç§»åŠ¨ç«¯ä¾§è¾¹èœå• -->
    <div class="mobile-sidebar" id="sidebar">
        <div class="mobile-sidebar-header">
            <div class="mobile-sidebar-title">å¯¼èˆªèœå•</div>
            <button class="mobile-sidebar-close" id="close-sidebar">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="mobile-sidebar-content">
            <div class="mobile-nav-section">
                <h3><i class="fas fa-compass"></i> æ ¸å¿ƒåŠŸèƒ½</h3>
                <ul class="mobile-nav-links">
                    <li><a href="#" class="active" data-view="overview"><i class="fas fa-home"></i> é¦–é¡µæ¦‚è§ˆ</a></li>
                    <li><a href="#" data-view="thoughts"><i class="fas fa-list-ul"></i> æ€è€ƒè®°å½•</a></li>
                    <li><a href="#" data-view="models"><i class="fas fa-cube"></i> æ€ç»´æ¨¡å‹</a></li>
                    <li><a href="#" data-view="search"><i class="fas fa-search"></i> æœç´¢</a></li>
                    <li><a href="#" data-view="tags"><i class="fas fa-tags"></i> æ ‡ç­¾åˆ†ç±»</a></li>
                </ul>
            </div>
            
            <div class="mobile-nav-section">
                <h3><i class="fas fa-chart-line"></i> ç³»ç»Ÿæ¦‚è§ˆ</h3>
                <div class="mobile-stats">
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-value" id="sidebar-thought-count">0</div>
                        <div class="mobile-stat-label">æ€è€ƒè®°å½•</div>
                    </div>
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-value" id="sidebar-model-count">0</div>
                        <div class="mobile-stat-label">æ€ç»´æ¨¡å‹</div>
                    </div>
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-value" id="sidebar-tag-count">0</div>
                        <div class="mobile-stat-label">æ ‡ç­¾åˆ†ç±»</div>
                    </div>
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-value" id="sidebar-version">v22.48</div>
                        <div class="mobile-stat-label">ç³»ç»Ÿç‰ˆæœ¬</div>
                    </div>
                </div>
            </div>
            
            <div class="mobile-nav-section">
                <h3><i class="fas fa-fire"></i> çƒ­é—¨æ ‡ç­¾</h3>
                <div class="mobile-tags" id="common-tags">
                    <!-- å¸¸ç”¨æ ‡ç­¾å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    <div class="mobile-loading">
                        <div class="mobile-loading-spinner"></div>
                    </div>
                </div>
            </div>
            
            <div class="mobile-nav-section">
                <h3><i class="fas fa-info-circle"></i> æ•°æ®çŠ¶æ€</h3>
                <div style="font-size: 14px; line-height: 1.6;">
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--text-light);">æœ€ååŒæ­¥:</span>
                        <span id="last-sync-time" style="font-weight: 500;">åˆšåˆš</span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--text-light);">æ•°æ®çŠ¶æ€:</span>
                        <span id="data-status" style="color: var(--success-color); font-weight: 500;">æ­£å¸¸</span>
                    </div>
                    <div>
                        <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.showDataManagement()" style="margin-top: 10px;">
                            <i class="fas fa-database"></i> æ•°æ®ç®¡ç†
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç§»åŠ¨ç«¯ä¸»è¦å†…å®¹åŒº -->
    <div class="mobile-content" id="content">
        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        <div class="mobile-loading">
            <div class="mobile-loading-spinner"></div>
            <div>åŠ è½½ä¸­...</div>
        </div>
    </div>
    
    <!-- ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª -->
    <div class="mobile-bottom-nav">
        <a href="#" class="mobile-nav-item active" data-view="overview">
            <i class="fas fa-home"></i>
            <span>é¦–é¡µ</span>
        </a>
        <a href="#" class="mobile-nav-item" data-view="thoughts">
            <i class="fas fa-file-alt"></i>
            <span>æ€è€ƒ</span>
        </a>
        <a href="#" class="mobile-nav-item" data-view="models">
            <i class="fas fa-cubes"></i>
            <span>æ¨¡å‹</span>
        </a>
        <a href="#" class="mobile-nav-item" data-view="search">
            <i class="fas fa-search"></i>
            <span>æœç´¢</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="MobileUI.openSidebar()">
            <i class="fas fa-ellipsis-h"></i>
            <span>æ›´å¤š</span>
        </a>
    </div>

    <!-- æ•°æ®ç®¡ç†æ¨¡æ€æ¡† -->
    <div class="mobile-modal" id="data-management-modal">
        <div class="mobile-modal-content">
            <div class="mobile-modal-title">
                <i class="fas fa-database"></i> æ•°æ®ç®¡ç†
            </div>
            
            <div style="margin-bottom: 20px;">
                <p style="font-size: 14px; color: var(--text-light); margin-bottom: 15px;">
                    æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œä¸ç”µè„‘ç«¯è‡ªåŠ¨åŒæ­¥ã€‚
                </p>
                
                <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--primary-color);">å½“å‰æ•°æ®çŠ¶æ€</div>
                    <div style="font-size: 14px; line-height: 1.6;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>æ€è€ƒè®°å½•:</span>
                            <span id="modal-thought-count" style="font-weight: 500;">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>æ€ç»´æ¨¡å‹:</span>
                            <span id="modal-model-count" style="font-weight: 500;">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>æœ€åä¿å­˜:</span>
                            <span id="modal-last-saved" style="font-weight: 500;">æœªçŸ¥</span>
                        </div>
                    </div>
                </div>
                
                <div class="mobile-btn-group" style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.exportAllData()">
                        <i class="fas fa-file-export"></i> å¯¼å‡ºå…¨éƒ¨æ•°æ®
                    </button>
                    <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.importData()">
                        <i class="fas fa-file-import"></i> å¯¼å…¥æ•°æ®
                    </button>
                    <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.clearData()">
                        <i class="fas fa-trash-alt"></i> æ¸…é™¤æœ¬åœ°æ•°æ®
                    </button>
                </div>
            </div>
            
            <div class="mobile-modal-actions">
                <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.closeModal()" style="flex: 1;">
                    å–æ¶ˆ
                </button>
                <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.syncData()" style="flex: 1;">
                    <i class="fas fa-sync-alt"></i> åŒæ­¥
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== ç§»åŠ¨ç«¯æ•°æ®ç®¡ç†å™¨ ====================
        const MobileDataManager = {
            STORAGE_KEY: 'structuredThoughtAssistant',
            BACKUP_PREFIX: 'structuredThoughtAssistant_backup_',
            
            // æ•°æ®å­—æ®µ
            thoughts: [],
            models: [],
            tags: {},
            timeline: [],
            modelConnections: {},
            currentVersion: 'v22.48',
            lastSaved: null,
            nextThoughtId: 124,
            nextModelId: 81,
            
            // åˆå§‹åŒ–
            init: function() {
                this.loadFullData();
                this.setupStorageListener();
                return this;
            },
            
            // åŠ è½½å®Œæ•´æ•°æ®
            loadFullData: function() {
                try {
                    const saved = localStorage.getItem(this.STORAGE_KEY);
                    if (saved) {
                        const data = JSON.parse(saved);
                        
                        // ç¡®ä¿æ‰€æœ‰å­—æ®µéƒ½æœ‰å€¼
                        this.thoughts = data.thoughts || [];
                        this.models = data.models || [];
                        this.tags = data.tags || {};
                        this.timeline = data.timeline || [];
                        this.modelConnections = data.modelConnections || {};
                        this.currentVersion = data.currentVersion || 'v22.48';
                        this.lastSaved = data.lastSaved || null;
                        this.nextThoughtId = data.nextThoughtId || 124;
                        this.nextModelId = data.nextModelId || 81;
                        
                        console.log('æ•°æ®åŠ è½½æˆåŠŸ');
                        this.showNotification('æ•°æ®åŠ è½½æˆåŠŸ', 'success');
                        return true;
                    } else {
                        console.log('æœªæ‰¾åˆ°ä¿å­˜çš„æ•°æ®ï¼Œä½¿ç”¨ç©ºæ•°æ®');
                        this.showNotification('é¦–æ¬¡ä½¿ç”¨ï¼Œæ•°æ®å·²åˆå§‹åŒ–', 'info');
                        return false;
                    }
                } catch (error) {
                    console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                    this.showNotification('æ•°æ®åŠ è½½å¤±è´¥ï¼Œå°è¯•ä¿®å¤...', 'error');
                    
                    // å°è¯•ä¿®å¤æ•°æ®
                    if (this.repairData()) {
                        this.showNotification('æ•°æ®ä¿®å¤æˆåŠŸ', 'success');
                        return true;
                    } else {
                        this.showNotification('æ•°æ®ä¿®å¤å¤±è´¥ï¼Œä½¿ç”¨ç©ºæ•°æ®', 'error');
                        return false;
                    }
                }
            },
            
            // ä¿å­˜å®Œæ•´æ•°æ®
            saveFullData: function() {
                try {
                    const data = {
                        thoughts: this.thoughts,
                        models: this.models,
                        tags: this.tags,
                        timeline: this.timeline,
                        modelConnections: this.modelConnections,
                        currentVersion: this.currentVersion,
                        lastSaved: new Date().toISOString(),
                        nextThoughtId: this.nextThoughtId,
                        nextModelId: this.nextModelId
                    };
                    
                    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));
                    this.lastSaved = data.lastSaved;
                    console.log('æ•°æ®å·²ä¿å­˜');
                    return true;
                } catch (error) {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥:', error);
                    return false;
                }
            },
            
            // è·å–æ€è€ƒè®°å½•
            getThoughtById: function(id) {
                return this.thoughts.find(t => t.id === id);
            },
            
            // è·å–æ€ç»´æ¨¡å‹
            getModelById: function(id) {
                return this.models.find(m => m.id === id);
            },
            
            // è·å–çƒ­é—¨æ ‡ç­¾
            getTopTags: function(limit = 12) {
                return Object.entries(this.tags)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, limit)
                    .map(([tag, count]) => ({ tag, count }));
            },
            
            // è·å–æœ€è¿‘æ€è€ƒè®°å½•
            getRecentThoughts: function(limit = 10) {
                return this.thoughts.slice(0, limit);
            },
            
            // è·å–æœ€è¿‘æ€ç»´æ¨¡å‹
            getRecentModels: function(limit = 10) {
                return this.models.slice(0, limit);
            },
            
            // æœç´¢åŠŸèƒ½
            search: function(query, type = 'all') {
                if (!query || query.trim() === '') {
                    return {
                        thoughts: [],
                        models: [],
                        tags: []
                    };
                }
                
                const searchTerm = query.toLowerCase().trim();
                const results = {
                    thoughts: [],
                    models: [],
                    tags: []
                };
                
                // æœç´¢æ€è€ƒè®°å½•
                if (type === 'all' || type === 'thoughts') {
                    results.thoughts = this.thoughts.filter(thought => {
                        return (
                            (thought.title && thought.title.toLowerCase().includes(searchTerm)) ||
                            (thought.id && thought.id.toLowerCase().includes(searchTerm)) ||
                            (thought.tags && thought.tags.some(tag => tag.toLowerCase().includes(searchTerm))) ||
                            (thought.sections && Object.values(thought.sections).some(section => 
                                section && section.toLowerCase().includes(searchTerm)
                            ))
                        );
                    });
                }
                
                // æœç´¢æ€ç»´æ¨¡å‹
                if (type === 'all' || type === 'models') {
                    results.models = this.models.filter(model => {
                        return (
                            (model.name && model.name.toLowerCase().includes(searchTerm)) ||
                            (model.id && model.id.toLowerCase().includes(searchTerm)) ||
                            (model.tags && model.tags.some(tag => tag.toLowerCase().includes(searchTerm))) ||
                            (model.description && model.description.toLowerCase().includes(searchTerm))
                        );
                    });
                }
                
                // æœç´¢æ ‡ç­¾
                if (type === 'all' || type === 'tags') {
                    results.tags = Object.keys(this.tags).filter(tag => 
                        tag.toLowerCase().includes(searchTerm)
                    ).map(tag => ({ tag, count: this.tags[tag] }));
                }
                
                return results;
            },
            
            // æŒ‰æ ‡ç­¾ç­›é€‰
            filterByTag: function(tag) {
                const thoughtsWithTag = this.thoughts.filter(thought => 
                    thought.tags && thought.tags.includes(tag)
                );
                
                const modelsWithTag = this.models.filter(model => 
                    model.tags && model.tags.includes(tag)
                );
                
                return {
                    thoughts: thoughtsWithTag,
                    models: modelsWithTag,
                    tag: tag
                };
            },
            
            // å¯¼å‡ºæ‰€æœ‰æ•°æ®
            exportAllData: function() {
                try {
                    const data = {
                        thoughts: this.thoughts,
                        models: this.models,
                        tags: this.tags,
                        timeline: this.timeline,
                        modelConnections: this.modelConnections,
                        currentVersion: this.currentVersion,
                        lastSaved: this.lastSaved,
                        nextThoughtId: this.nextThoughtId,
                        nextModelId: this.nextModelId,
                        exportDate: new Date().toISOString(),
                        exportFrom: 'ç§»åŠ¨ç«¯'
                    };
                    
                    return JSON.stringify(data, null, 2);
                } catch (error) {
                    console.error('å¯¼å‡ºæ•°æ®å¤±è´¥:', error);
                    return null;
                }
            },
            
            // å¯¼å…¥æ•°æ®
            importData: function(jsonString) {
                try {
                    const imported = JSON.parse(jsonString);
                    
                    // éªŒè¯æ•°æ®æ ¼å¼
                    if (!imported.thoughts || !imported.models) {
                        throw new Error('æ•°æ®æ ¼å¼é”™è¯¯ï¼šç¼ºå°‘å¿…è¦å­—æ®µ');
                    }
                    
                    // å¤‡ä»½å½“å‰æ•°æ®
                    this.createBackup();
                    
                    // å¯¼å…¥æ•°æ®
                    this.thoughts = imported.thoughts;
                    this.models = imported.models;
                    this.tags = imported.tags || {};
                    this.timeline = imported.timeline || [];
                    this.modelConnections = imported.modelConnections || {};
                    this.currentVersion = imported.currentVersion || this.currentVersion;
                    this.lastSaved = imported.lastSaved || new Date().toISOString();
                    this.nextThoughtId = imported.nextThoughtId || this.nextThoughtId;
                    this.nextModelId = imported.nextModelId || this.nextModelId;
                    
                    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    const saveResult = this.saveFullData();
                    
                    if (saveResult) {
                        this.showNotification('æ•°æ®å¯¼å…¥æˆåŠŸ', 'success');
                        return { success: true, message: 'æ•°æ®å¯¼å…¥æˆåŠŸ' };
                    } else {
                        this.showNotification('æ•°æ®å¯¼å…¥å¤±è´¥ï¼Œæ— æ³•ä¿å­˜', 'error');
                        return { success: false, error: 'æ— æ³•ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨' };
                    }
                } catch (error) {
                    console.error('å¯¼å…¥æ•°æ®å¤±è´¥:', error);
                    this.showNotification('å¯¼å…¥å¤±è´¥: ' + error.message, 'error');
                    return { success: false, error: error.message };
                }
            },
            
            // åˆ›å»ºå¤‡ä»½
            createBackup: function() {
                try {
                    const backupKey = this.BACKUP_PREFIX + new Date().toISOString().replace(/[:.]/g, '-');
                    const currentData = localStorage.getItem(this.STORAGE_KEY);
                    
                    if (currentData) {
                        localStorage.setItem(backupKey, currentData);
                        console.log('å¤‡ä»½åˆ›å»ºæˆåŠŸ:', backupKey);
                        return backupKey;
                    }
                } catch (error) {
                    console.error('åˆ›å»ºå¤‡ä»½å¤±è´¥:', error);
                }
                return null;
            },
            
            // ä¿®å¤æ•°æ®
            repairData: function() {
                try {
                    // å°è¯•ä»å¤‡ä»½æ¢å¤
                    const backupKeys = [];
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (key.startsWith(this.BACKUP_PREFIX)) {
                            backupKeys.push(key);
                        }
                    }
                    
                    // æŒ‰æ—¶é—´æ’åºï¼Œè·å–æœ€æ–°çš„å¤‡ä»½
                    backupKeys.sort((a, b) => b.localeCompare(a));
                    
                    if (backupKeys.length > 0) {
                        const latestBackup = localStorage.getItem(backupKeys[0]);
                        if (latestBackup) {
                            localStorage.setItem(this.STORAGE_KEY, latestBackup);
                            this.loadFullData();
                            return true;
                        }
                    }
                    
                    // å¦‚æœæ²¡æœ‰å¤‡ä»½ï¼Œåˆå§‹åŒ–æ–°æ•°æ®
                    this.thoughts = [];
                    this.models = [];
                    this.tags = {};
                    this.timeline = [];
                    this.modelConnections = {};
                    this.currentVersion = 'v22.48';
                    this.lastSaved = new Date().toISOString();
                    this.nextThoughtId = 124;
                    this.nextModelId = 81;
                    
                    this.saveFullData();
                    return true;
                } catch (error) {
                    console.error('ä¿®å¤æ•°æ®å¤±è´¥:', error);
                    return false;
                }
            },
            
            // æ¸…é™¤æ•°æ®
            clearData: function() {
                if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æœ¬åœ°æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                    localStorage.removeItem(this.STORAGE_KEY);
                    
                    // æ¸…é™¤æ‰€æœ‰å¤‡ä»½
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (key.startsWith(this.BACKUP_PREFIX)) {
                            localStorage.removeItem(key);
                        }
                    }
                    
                    this.thoughts = [];
                    this.models = [];
                    this.tags = {};
                    this.timeline = [];
                    this.modelConnections = {};
                    this.currentVersion = 'v22.48';
                    this.lastSaved = null;
                    
                    this.showNotification('æ•°æ®å·²æ¸…é™¤', 'success');
                    return true;
                }
                return false;
            },
            
            // è®¾ç½®storageäº‹ä»¶ç›‘å¬å™¨ï¼ˆç›‘å¬å…¶ä»–æ ‡ç­¾é¡µçš„æ•°æ®å˜åŒ–ï¼‰
            setupStorageListener: function() {
                window.addEventListener('storage', (event) => {
                    if (event.key === this.STORAGE_KEY) {
                        console.log('æ£€æµ‹åˆ°å…¶ä»–æ ‡ç­¾é¡µçš„æ•°æ®å˜åŒ–ï¼Œé‡æ–°åŠ è½½æ•°æ®');
                        this.loadFullData();
                        this.showNotification('æ•°æ®å·²æ›´æ–°ï¼Œé‡æ–°åŠ è½½ä¸­...', 'info');
                        
                        // é€šçŸ¥UIç®¡ç†å™¨é‡æ–°æ¸²æŸ“
                        if (typeof MobileUI !== 'undefined' && MobileUI.currentView) {
                            setTimeout(() => {
                                MobileUI.renderView(MobileUI.currentView);
                            }, 500);
                        }
                    }
                });
            },
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification: function(message, type = 'info') {
                if (typeof MobileUI !== 'undefined' && MobileUI.showNotification) {
                    MobileUI.showNotification(message, type);
                }
            },
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateStats: function() {
                if (typeof MobileUI !== 'undefined' && MobileUI.updateStats) {
                    MobileUI.updateStats();
                }
            },
            
            // åŒæ­¥æ•°æ®ï¼ˆé‡æ–°åŠ è½½ï¼‰
            syncData: function() {
                this.loadFullData();
                this.updateStats();
                this.showNotification('æ•°æ®åŒæ­¥å®Œæˆ', 'success');
                return true;
            }
        };
        
        // ==================== ç§»åŠ¨ç«¯UIç®¡ç†å™¨ ====================
        const MobileUI = {
            currentView: 'overview',
            currentDetailId: null,
            currentDetailType: null, // 'thought' æˆ– 'model'
            searchQuery: '',
            currentPage: 1,
            itemsPerPage: 10,
            
            // åˆå§‹åŒ–
            init: function() {
                // åˆå§‹åŒ–æ•°æ®ç®¡ç†å™¨
                this.dataManager = MobileDataManager.init();
                
                // è®¾ç½®UIäº‹ä»¶
                this.setupEvents();
                
                // æ¸²æŸ“åˆå§‹è§†å›¾
                this.renderView('overview');
                
                // æ›´æ–°ç»Ÿè®¡æ•°æ®
                this.updateStats();
                
                // æ›´æ–°çƒ­é—¨æ ‡ç­¾
                this.updateCommonTags();
                
                console.log('ç§»åŠ¨ç«¯UIåˆå§‹åŒ–å®Œæˆ');
            },
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            setupEvents: function() {
                // èœå•æŒ‰é’®
                document.getElementById('menu-btn').addEventListener('click', () => this.openSidebar());
                document.getElementById('close-sidebar').addEventListener('click', () => this.closeSidebar());
                document.getElementById('overlay').addEventListener('click', () => this.closeSidebar());
                
                // åŒæ­¥æŒ‰é’®
                document.getElementById('sync-btn').addEventListener('click', () => this.syncData());
                
                // åº•éƒ¨å¯¼èˆª
                document.querySelectorAll('.mobile-nav-item[data-view]').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const view = item.getAttribute('data-view');
                        this.navigateTo(view);
                    });
                });
                
                // ä¾§è¾¹æ å¯¼èˆª
                document.querySelectorAll('.mobile-nav-links a').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const view = link.getAttribute('data-view');
                        this.navigateTo(view);
                        this.closeSidebar();
                    });
                });
                
                // ç›‘å¬æ•°æ®ä¿å­˜äº‹ä»¶
                window.addEventListener('data-saved', () => {
                    this.updateStats();
                    this.updateCommonTags();
                });
                
                // ç›‘å¬é”®ç›˜äº‹ä»¶ï¼ˆEscå…³é—­ä¾§è¾¹æ ï¼‰
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeSidebar();
                        this.closeModal();
                    }
                });
                
                // ç›‘å¬è¿”å›æŒ‰é’®
                window.addEventListener('popstate', () => {
                    if (this.currentDetailId) {
                        this.currentDetailId = null;
                        this.currentDetailType = null;
                        this.renderView(this.currentView);
                    }
                });
            },
            
            // å¯¼èˆªåˆ°æŒ‡å®šè§†å›¾
            navigateTo: function(view) {
                this.currentView = view;
                this.currentDetailId = null;
                this.currentDetailType = null;
                this.currentPage = 1;
                
                // æ›´æ–°URLå†å²è®°å½•
                history.pushState({ view: view }, '', `#${view}`);
                
                // æ¸²æŸ“è§†å›¾
                this.renderView(view);
                
                // æ›´æ–°åº•éƒ¨å¯¼èˆªæ¿€æ´»çŠ¶æ€
                this.updateNavActiveState(view);
                
                // å…³é—­ä¾§è¾¹æ 
                this.closeSidebar();
            },
            
            // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
            updateNavActiveState: function(activeView) {
                document.querySelectorAll('.mobile-nav-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-view') === activeView) {
                        item.classList.add('active');
                    }
                });
                
                document.querySelectorAll('.mobile-nav-links a').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-view') === activeView) {
                        link.classList.add('active');
                    }
                });
            },
            
            // æ‰“å¼€ä¾§è¾¹æ 
            openSidebar: function() {
                document.getElementById('sidebar').classList.add('active');
                document.getElementById('overlay').classList.add('active');
            },
            
            // å…³é—­ä¾§è¾¹æ 
            closeSidebar: function() {
                document.getElementById('sidebar').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
            },
            
            // æ‰“å¼€æ¨¡æ€æ¡†
            openModal: function(modalId) {
                document.getElementById(modalId).classList.add('active');
            },
            
            // å…³é—­æ¨¡æ€æ¡†
            closeModal: function() {
                document.querySelectorAll('.mobile-modal').forEach(modal => {
                    modal.classList.remove('active');
                });
            },
            
            // æ˜¾ç¤ºæ•°æ®ç®¡ç†
            showDataManagement: function() {
                this.updateModalStats();
                this.openModal('data-management-modal');
            },
            
            // æ›´æ–°æ¨¡æ€æ¡†ç»Ÿè®¡
            updateModalStats: function() {
                document.getElementById('modal-thought-count').textContent = this.dataManager.thoughts.length;
                document.getElementById('modal-model-count').textContent = this.dataManager.models.length;
                
                if (this.dataManager.lastSaved) {
                    const savedTime = new Date(this.dataManager.lastSaved);
                    const now = new Date();
                    const diffMinutes = Math.floor((now - savedTime) / (1000 * 60));
                    
                    let timeText = "åˆšåˆš";
                    if (diffMinutes >= 60) {
                        const diffHours = Math.floor(diffMinutes / 60);
                        timeText = `${diffHours}å°æ—¶å‰`;
                    } else if (diffMinutes > 0) {
                        timeText = `${diffMinutes}åˆ†é’Ÿå‰`;
                    }
                    
                    document.getElementById('modal-last-saved').textContent = timeText;
                } else {
                    document.getElementById('modal-last-saved').textContent = "ä»æœªä¿å­˜";
                }
            },
            
            // æ¸²æŸ“è§†å›¾
            renderView: function(view) {
                const content = document.getElementById('content');
                
                // æ˜¾ç¤ºåŠ è½½ä¸­
                content.innerHTML = `
                    <div class="mobile-loading">
                        <div class="mobile-loading-spinner"></div>
                        <div>åŠ è½½ä¸­...</div>
                    </div>
                `;
                
                // å»¶è¿Ÿæ¸²æŸ“ä»¥æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
                setTimeout(() => {
                    let html = '';
                    
                    switch(view) {
                        case 'overview':
                            html = this.renderOverview();
                            break;
                        case 'thoughts':
                            html = this.renderThoughtsList();
                            break;
                        case 'models':
                            html = this.renderModelsList();
                            break;
                        case 'search':
                            html = this.renderSearch();
                            break;
                        case 'tags':
                            html = this.renderTags();
                            break;
                        default:
                            html = this.renderOverview();
                    }
                    
                    content.innerHTML = html;
                    
                    // å¦‚æœæ˜¯è¯¦æƒ…é¡µï¼Œæ›´æ–°æ ‡é¢˜
                    if (this.currentDetailId && this.currentDetailType) {
                        this.updateDetailTitle();
                    }
                }, 100);
            },
            
            // æ¸²æŸ“æ¦‚è§ˆé¡µé¢
            renderOverview: function() {
                const recentThoughts = this.dataManager.getRecentThoughts(5);
                const recentModels = this.dataManager.getRecentModels(5);
                const topTags = this.dataManager.getTopTags(8);
                
                return `
                    <div class="mobile-search">
                        <i class="fas fa-search"></i>
                        <input type="text" id="quick-search" placeholder="å¿«é€Ÿæœç´¢..." 
                               oninput="MobileUI.quickSearch()">
                    </div>
                    
                    <div class="mobile-stats">
                        <div class="mobile-stat-card">
                            <div class="mobile-stat-value">${this.dataManager.thoughts.length}</div>
                            <div class="mobile-stat-label">æ€è€ƒè®°å½•</div>
                        </div>
                        <div class="mobile-stat-card">
                            <div class="mobile-stat-value">${this.dataManager.models.length}</div>
                            <div class="mobile-stat-label">æ€ç»´æ¨¡å‹</div>
                        </div>
                        <div class="mobile-stat-card">
                            <div class="mobile-stat-value">${Object.keys(this.dataManager.tags).length}</div>
                            <div class="mobile-stat-label">æ ‡ç­¾åˆ†ç±»</div>
                        </div>
                        <div class="mobile-stat-card">
                            <div class="mobile-stat-value">${this.dataManager.currentVersion}</div>
                            <div class="mobile-stat-label">ç³»ç»Ÿç‰ˆæœ¬</div>
                        </div>
                    </div>
                    
                    <div class="mobile-card">
                        <div class="mobile-card-title">
                            <i class="fas fa-file-alt" style="margin-right: 8px;"></i>
                            æœ€è¿‘æ€è€ƒè®°å½•
                        </div>
                        <div class="mobile-card-content">
                            ${recentThoughts.length > 0 ? 
                                recentThoughts.map(thought => `
                                    <div class="mobile-list-item" onclick="MobileUI.showThoughtDetail('${thought.id}')" 
                                         style="padding: 12px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;">
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <div style="font-weight: 500; font-size: 14px; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                                ${thought.title || thought.id}
                                            </div>
                                            <div style="font-size: 12px; color: var(--text-light); margin-left: 10px;">
                                                ${thought.date || ''}
                                            </div>
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-light); margin-top: 4px;">
                                            ${thought.tags && thought.tags.length > 0 ? 
                                                thought.tags.slice(0, 2).map(tag => 
                                                    `<span class="mobile-tag" style="font-size: 10px; padding: 2px 6px;">${tag}</span>`
                                                ).join(' ') : 
                                                '<span style="color: #999;">æ— æ ‡ç­¾</span>'
                                            }
                                        </div>
                                    </div>
                                `).join('') : 
                                '<div style="text-align: center; color: var(--text-light); padding: 20px;">æš‚æ— æ€è€ƒè®°å½•</div>'
                            }
                        </div>
                        ${recentThoughts.length > 0 ? `
                            <div style="text-align: center; margin-top: 10px;">
                                <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.navigateTo('thoughts')" 
                                        style="padding: 8px 15px; font-size: 13px; width: auto;">
                                    æŸ¥çœ‹å…¨éƒ¨æ€è€ƒè®°å½•
                                </button>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="mobile-card">
                        <div class="mobile-card-title">
                            <i class="fas fa-cube" style="margin-right: 8px;"></i>
                            æœ€è¿‘æ€ç»´æ¨¡å‹
                        </div>
                        <div class="mobile-card-content">
                            ${recentModels.length > 0 ? 
                                recentModels.map(model => `
                                    <div class="mobile-list-item" onclick="MobileUI.showModelDetail('${model.id}')" 
                                         style="padding: 12px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;">
                                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                            <div style="flex: 1;">
                                                <div style="font-weight: 500; font-size: 14px;">
                                                    <span class="model-id-link" onclick="event.stopPropagation(); MobileUI.showModelDetail('${model.id}')">
                                                        ${model.id}
                                                    </span>: ${model.name}
                                                </div>
                                                <div style="font-size: 12px; color: var(--text-light); margin-top: 4px;">
                                                    ${model.description.substring(0, 60)}...
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('') : 
                                '<div style="text-align: center; color: var(--text-light); padding: 20px;">æš‚æ— æ€ç»´æ¨¡å‹</div>'
                            }
                        </div>
                        ${recentModels.length > 0 ? `
                            <div style="text-align: center; margin-top: 10px;">
                                <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.navigateTo('models')" 
                                        style="padding: 8px 15px; font-size: 13px; width: auto;">
                                    æŸ¥çœ‹å…¨éƒ¨æ€ç»´æ¨¡å‹
                                </button>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="mobile-card">
                        <div class="mobile-card-title">
                            <i class="fas fa-tags" style="margin-right: 8px;"></i>
                            çƒ­é—¨æ ‡ç­¾
                        </div>
                        <div class="mobile-tags">
                            ${topTags.length > 0 ? 
                                topTags.map(({tag, count}) => `
                                    <span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')">
                                        ${tag} (${count})
                                    </span>
                                `).join('') : 
                                '<div style="text-align: center; color: var(--text-light); padding: 10px;">æš‚æ— æ ‡ç­¾æ•°æ®</div>'
                            }
                        </div>
                    </div>
                `;
            },
            
            // æ¸²æŸ“æ€è€ƒè®°å½•åˆ—è¡¨
            renderThoughtsList: function() {
                const thoughts = this.dataManager.thoughts;
                const totalPages = Math.ceil(thoughts.length / this.itemsPerPage);
                const startIndex = (this.currentPage - 1) * this.itemsPerPage;
                const endIndex = Math.min(startIndex + this.itemsPerPage, thoughts.length);
                const pageThoughts = thoughts.slice(startIndex, endIndex);
                
                return `
                    <div class="mobile-search">
                        <i class="fas fa-search"></i>
                        <input type="text" id="thought-search" placeholder="æœç´¢æ€è€ƒè®°å½•..." 
                               value="${this.searchQuery}" oninput="MobileUI.searchThoughts()">
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div style="font-size: 14px; color: var(--text-light);">
                            å…± ${thoughts.length} æ¡è®°å½•
                        </div>
                        <div style="font-size: 14px; color: var(--text-light);">
                            ç¬¬ ${this.currentPage}/${totalPages || 1} é¡µ
                        </div>
                    </div>
                    
                    ${thoughts.length > 0 ? `
                        ${pageThoughts.map(thought => `
                            <div class="mobile-card" onclick="MobileUI.showThoughtDetail('${thought.id}')">
                                <div class="mobile-card-title">
                                    ${thought.title || 'æ— æ ‡é¢˜æ€è€ƒ'}
                                </div>
                                <div class="mobile-card-subtitle">
                                    <span class="thought-id-link" onclick="event.stopPropagation(); MobileUI.showThoughtDetail('${thought.id}')">
                                        ${thought.id}
                                    </span>
                                    <span style="margin-left: 10px; font-size: 12px;">${thought.date || ''}</span>
                                </div>
                                <div class="mobile-card-content">
                                    ${thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"] ? 
                                        this.truncateText(thought.sections["æ ¸å¿ƒç»“è®º"], 120) : 
                                        thought.sections && thought.sections["çŠ¶æ€çœ‹æ¿"] ? 
                                        this.truncateText(thought.sections["çŠ¶æ€çœ‹æ¿"], 120) : 
                                        'æš‚æ— æè¿°'
                                    }
                                </div>
                                <div class="mobile-tags">
                                    ${thought.tags && thought.tags.length > 0 ? 
                                        thought.tags.map(tag => `
                                            <span class="mobile-tag clickable" onclick="event.stopPropagation(); MobileUI.filterByTag('${tag}')">
                                                ${tag}
                                            </span>
                                        `).join('') : 
                                        '<span style="color: var(--text-light); font-size: 12px;">æ— æ ‡ç­¾</span>'
                                    }
                                </div>
                            </div>
                        `).join('')}
                        
                        ${totalPages > 1 ? this.renderPagination(totalPages) : ''}
                    ` : `
                        <div class="mobile-empty">
                            <i class="fas fa-inbox"></i>
                            <p>æš‚æ— æ€è€ƒè®°å½•</p>
                            <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.navigateTo('overview')" 
                                    style="width: auto; padding: 10px 20px;">
                                è¿”å›é¦–é¡µ
                            </button>
                        </div>
                    `}
                `;
            },
            
            // æ¸²æŸ“æ€ç»´æ¨¡å‹åˆ—è¡¨
            renderModelsList: function() {
                const models = this.dataManager.models;
                const totalPages = Math.ceil(models.length / this.itemsPerPage);
                const startIndex = (this.currentPage - 1) * this.itemsPerPage;
                const endIndex = Math.min(startIndex + this.itemsPerPage, models.length);
                const pageModels = models.slice(startIndex, endIndex);
                
                return `
                    <div class="mobile-search">
                        <i class="fas fa-search"></i>
                        <input type="text" id="model-search" placeholder="æœç´¢æ€ç»´æ¨¡å‹..." 
                               value="${this.searchQuery}" oninput="MobileUI.searchModels()">
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div style="font-size: 14px; color: var(--text-light);">
                            å…± ${models.length} ä¸ªæ¨¡å‹
                        </div>
                        <div style="font-size: 14px; color: var(--text-light);">
                            ç¬¬ ${this.currentPage}/${totalPages || 1} é¡µ
                        </div>
                    </div>
                    
                    ${models.length > 0 ? `
                        ${pageModels.map(model => `
                            <div class="mobile-card" onclick="MobileUI.showModelDetail('${model.id}')">
                                <div class="mobile-card-title">
                                    <span class="model-id-link" onclick="event.stopPropagation(); MobileUI.showModelDetail('${model.id}')">
                                        ${model.id}
                                    </span>: ${model.name}
                                </div>
                                <div class="mobile-card-subtitle">
                                    åˆ›å»º: ${model.date || 'æœªçŸ¥'} | 
                                    æ¥æº: ${model.fromThought ? 
                                        `<span class="thought-id-link" onclick="event.stopPropagation(); MobileUI.showThoughtDetail('${model.fromThought}')">
                                            ${model.fromThought}
                                        </span>` : 
                                        'æ— '
                                    }
                                </div>
                                <div class="mobile-card-content">
                                    ${this.truncateText(model.description, 150)}
                                </div>
                                <div class="mobile-tags">
                                    ${model.tags && model.tags.length > 0 ? 
                                        model.tags.map(tag => `
                                            <span class="mobile-tag clickable" onclick="event.stopPropagation(); MobileUI.filterByTag('${tag}')">
                                                ${tag}
                                            </span>
                                        `).join('') : 
                                        '<span style="color: var(--text-light); font-size: 12px;">æ— æ ‡ç­¾</span>'
                                    }
                                </div>
                                ${model.relatedModels && model.relatedModels.length > 0 ? `
                                    <div style="margin-top: 10px; font-size: 12px; color: var(--text-light);">
                                        å…³è”æ¨¡å‹: 
                                        ${model.relatedModels.slice(0, 3).map(id => `
                                            <span class="model-id-link" onclick="event.stopPropagation(); MobileUI.showModelDetail('${id}')">
                                                ${id}
                                            </span>
                                        `).join(', ')}
                                        ${model.relatedModels.length > 3 ? `...` : ''}
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                        
                        ${totalPages > 1 ? this.renderPagination(totalPages) : ''}
                    ` : `
                        <div class="mobile-empty">
                            <i class="fas fa-cubes"></i>
                            <p>æš‚æ— æ€ç»´æ¨¡å‹</p>
                            <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.navigateTo('overview')" 
                                    style="width: auto; padding: 10px 20px;">
                                è¿”å›é¦–é¡µ
                            </button>
                        </div>
                    `}
                `;
            },
            
            // æ¸²æŸ“æœç´¢é¡µé¢
            renderSearch: function() {
                return `
                    <div class="mobile-search">
                        <i class="fas fa-search"></i>
                        <input type="text" id="full-search" placeholder="æœç´¢æ€è€ƒè®°å½•ã€æ€ç»´æ¨¡å‹æˆ–æ ‡ç­¾..." 
                               value="${this.searchQuery}" oninput="MobileUI.performSearch()">
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 14px; font-weight: 500; color: var(--primary-color); margin-bottom: 8px;">
                            æœç´¢ç±»å‹
                        </div>
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button id="search-all" class="mobile-page-btn active" onclick="MobileUI.setSearchType('all')" 
                                    style="padding: 8px 15px; font-size: 13px;">
                                å…¨éƒ¨
                            </button>
                            <button id="search-thoughts" class="mobile-page-btn" onclick="MobileUI.setSearchType('thoughts')" 
                                    style="padding: 8px 15px; font-size: 13px;">
                                æ€è€ƒè®°å½•
                            </button>
                            <button id="search-models" class="mobile-page-btn" onclick="MobileUI.setSearchType('models')" 
                                    style="padding: 8px 15px; font-size: 13px;">
                                æ€ç»´æ¨¡å‹
                            </button>
                            <button id="search-tags" class="mobile-page-btn" onclick="MobileUI.setSearchType('tags')" 
                                    style="padding: 8px 15px; font-size: 13px;">
                                æ ‡ç­¾
                            </button>
                        </div>
                    </div>
                    
                    <div id="search-results">
                        <div class="mobile-empty">
                            <i class="fas fa-search" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <p>è¾“å…¥å…³é”®è¯å¼€å§‹æœç´¢</p>
                        </div>
                    </div>
                `;
            },
            
            // æ¸²æŸ“æ ‡ç­¾é¡µé¢
            renderTags: function() {
                const tags = this.dataManager.getTopTags(50);
                
                return `
                    <div class="mobile-search">
                        <i class="fas fa-search"></i>
                        <input type="text" id="tag-search" placeholder="æœç´¢æ ‡ç­¾..." 
                               oninput="MobileUI.searchTags()">
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div style="font-size: 14px; color: var(--text-light);">
                            å…± ${Object.keys(this.dataManager.tags).length} ä¸ªæ ‡ç­¾
                        </div>
                    </div>
                    
                    ${tags.length > 0 ? `
                        <div class="mobile-tags" style="justify-content: center;">
                            ${tags.map(({tag, count}) => `
                                <span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')" 
                                      style="font-size: ${12 + Math.min(count, 10)}px;">
                                    ${tag} (${count})
                                </span>
                            `).join('')}
                        </div>
                    ` : `
                        <div class="mobile-empty">
                            <i class="fas fa-tags"></i>
                            <p>æš‚æ— æ ‡ç­¾æ•°æ®</p>
                            <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.navigateTo('overview')" 
                                    style="width: auto; padding: 10px 20px;">
                                è¿”å›é¦–é¡µ
                            </button>
                        </div>
                    `}
                `;
            },
            
            // æ¸²æŸ“æ€è€ƒè¯¦æƒ…
            renderThoughtDetail: function(thought) {
                if (!thought) {
                    return `
                        <div class="mobile-empty">
                            <i class="fas fa-exclamation-circle"></i>
                            <p>æœªæ‰¾åˆ°æ€è€ƒè®°å½•</p>
                            <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.navigateTo('thoughts')" 
                                    style="width: auto; padding: 10px 20px;">
                                è¿”å›åˆ—è¡¨
                            </button>
                        </div>
                    `;
                }
                
                let html = `
                    <div class="mobile-detail">
                        <div class="mobile-detail-header">
                            <div class="mobile-detail-title">${thought.title || 'æ— æ ‡é¢˜æ€è€ƒ'}</div>
                            <div class="mobile-detail-id">${thought.id}</div>
                            <div style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 8px;">
                                ${thought.tags ? thought.tags.map(tag => `
                                    <span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')">
                                        ${tag}
                                    </span>
                                `).join('') : ''}
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.navigateTo('thoughts')" 
                                    style="padding: 10px;">
                                <i class="fas fa-arrow-left"></i> è¿”å›åˆ—è¡¨
                            </button>
                        </div>
                `;
                
                // æ¸²æŸ“çŠ¶æ€çœ‹æ¿
                if (thought.sections && thought.sections["çŠ¶æ€çœ‹æ¿"]) {
                    const statusContent = this.processLinks(thought.sections["çŠ¶æ€çœ‹æ¿"]);
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-tachometer-alt"></i> çŠ¶æ€çœ‹æ¿</h4>
                            <div class="mobile-detail-content">
                                <pre style="white-space: pre-wrap; font-family: inherit; font-size: 13px;">${statusContent}</pre>
                            </div>
                        </div>
                    `;
                }
                
                // æ¸²æŸ“æ ¸å¿ƒç»“è®º
                if (thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"]) {
                    const conclusionContent = this.processLinks(thought.sections["æ ¸å¿ƒç»“è®º"]);
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-bullseye"></i> æ ¸å¿ƒç»“è®º</h4>
                            <div class="mobile-detail-content">
                                <pre style="white-space: pre-wrap; font-family: inherit;">${conclusionContent}</pre>
                            </div>
                        </div>
                    `;
                }
                
                // æ¸²æŸ“æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ
                if (thought.sections && thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"]) {
                    const modelContent = this.processLinks(thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"]);
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-puzzle-piece"></i> æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ</h4>
                            <div class="mobile-detail-content">
                                <pre style="white-space: pre-wrap; font-family: inherit;">${modelContent}</pre>
                            </div>
                        </div>
                    `;
                }
                
                // æ¸²æŸ“è¡ŒåŠ¨/æ€ç»´è¦ç‚¹
                if (thought.sections && thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"]) {
                    const actionContent = this.processLinks(thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"]);
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-lightbulb"></i> è¡ŒåŠ¨/æ€ç»´è¦ç‚¹</h4>
                            <div class="mobile-detail-content">
                                <pre style="white-space: pre-wrap; font-family: inherit;">${actionContent}</pre>
                            </div>
                        </div>
                    `;
                }
                
                // æ¸²æŸ“æ¶æ„æ›´æ–°
                if (thought.sections && thought.sections["æ¶æ„æ›´æ–°"]) {
                    const updateContent = this.processLinks(thought.sections["æ¶æ„æ›´æ–°"]);
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-code-branch"></i> æ¶æ„æ›´æ–°</h4>
                            <div class="mobile-detail-content">
                                <pre style="white-space: pre-wrap; font-family: inherit;">${updateContent}</pre>
                            </div>
                        </div>
                    `;
                }
                
                html += `</div>`;
                return html;
            },
            
            // æ¸²æŸ“æ¨¡å‹è¯¦æƒ…
            renderModelDetail: function(model) {
                if (!model) {
                    return `
                        <div class="mobile-empty">
                            <i class="fas fa-exclamation-circle"></i>
                            <p>æœªæ‰¾åˆ°æ€ç»´æ¨¡å‹</p>
                            <button class="mobile-btn mobile-btn-primary" onclick="MobileUI.navigateTo('models')" 
                                    style="width: auto; padding: 10px 20px;">
                                è¿”å›åˆ—è¡¨
                            </button>
                        </div>
                    `;
                }
                
                let html = `
                    <div class="mobile-detail">
                        <div class="mobile-detail-header">
                            <div class="mobile-detail-title">
                                <span class="model-id-link" onclick="MobileUI.showModelDetail('${model.id}')">
                                    ${model.id}
                                </span>: ${model.name}
                            </div>
                            <div style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 8px;">
                                ${model.tags ? model.tags.map(tag => `
                                    <span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')">
                                        ${tag}
                                    </span>
                                `).join('') : ''}
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.navigateTo('models')" 
                                    style="padding: 10px;">
                                <i class="fas fa-arrow-left"></i> è¿”å›åˆ—è¡¨
                            </button>
                        </div>
                        
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-info-circle"></i> æ¨¡å‹æè¿°</h4>
                            <div class="mobile-detail-content">
                                <pre style="white-space: pre-wrap; font-family: inherit;">${this.processLinks(model.description)}</pre>
                            </div>
                        </div>
                `;
                
                // æ¥æºæ€è€ƒ
                if (model.fromThought) {
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-link"></i> æ¥æºæ€è€ƒ</h4>
                            <div class="mobile-detail-content">
                                <p>æ­¤æ¨¡å‹æ¥æºäºæ€è€ƒè®°å½•: 
                                    <span class="thought-id-link" onclick="MobileUI.showThoughtDetail('${model.fromThought}')">
                                        ${model.fromThought}
                                    </span>
                                </p>
                            </div>
                        </div>
                    `;
                }
                
                // å…³è”æ¨¡å‹
                if (model.relatedModels && model.relatedModels.length > 0) {
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-project-diagram"></i> å…³è”æ¨¡å‹ (${model.relatedModels.length}ä¸ª)</h4>
                            <div class="mobile-detail-content">
                                <div class="mobile-network">
                                    ${model.relatedModels.map(id => {
                                        const relatedModel = this.dataManager.getModelById(id);
                                        if (relatedModel) {
                                            return `
                                                <div class="mobile-network-node" onclick="MobileUI.showModelDetail('${id}')">
                                                    ${id}
                                                </div>
                                            `;
                                        } else {
                                            return `
                                                <div class="mobile-network-node" style="background-color: rgba(244, 67, 54, 0.1); color: var(--danger-color);">
                                                    ${id} (æœªæ‰¾åˆ°)
                                                </div>
                                            `;
                                        }
                                    }).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                // æ˜¾ç¤ºå…³è”ç½‘ç»œ
                const network = this.dataManager.modelConnections[model.id];
                if (network && network.length > 0) {
                    html += `
                        <div class="mobile-detail-section">
                            <h4><i class="fas fa-project-diagram"></i> å…³è”ç½‘ç»œ</h4>
                            <div class="mobile-detail-content">
                                <p>æ­¤æ¨¡å‹ä¸ä»¥ä¸‹ ${network.length} ä¸ªæ¨¡å‹ç›¸å…³è”ï¼š</p>
                                <div class="mobile-network" style="margin-top: 10px;">
                                    <div class="mobile-network-node center">${model.id}</div>
                    `;
                    
                    network.forEach(modelId => {
                        html += `<div class="mobile-network-node" onclick="MobileUI.showModelDetail('${modelId}')">${modelId}</div>`;
                    });
                    
                    html += `
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                html += `</div>`;
                return html;
            },
            
            // å¤„ç†æ–‡æœ¬ä¸­çš„é“¾æ¥ï¼ˆå°†#123å’ŒM-80è½¬æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥ï¼‰
            processLinks: function(text) {
                if (!text) return '';
                
                // å¤„ç†æ€è€ƒID (#123)
                let processed = text.replace(/#(\d+)/g, (match, id) => {
                    return `<span class="thought-id-link" onclick="MobileUI.showThoughtDetail('#${id}')">${match}</span>`;
                });
                
                // å¤„ç†æ¨¡å‹ID (M-80)
                processed = processed.replace(/M-\d+/g, (match) => {
                    return `<span class="model-id-link" onclick="MobileUI.showModelDetail('${match}')">${match}</span>`;
                });
                
                return processed;
            },
            
            // æ˜¾ç¤ºæ€è€ƒè¯¦æƒ…
            showThoughtDetail: function(id) {
                const thought = this.dataManager.getThoughtById(id);
                this.currentDetailId = id;
                this.currentDetailType = 'thought';
                this.currentView = 'thought-detail';
                
                const content = document.getElementById('content');
                content.innerHTML = this.renderThoughtDetail(thought);
                
                // æ›´æ–°å†å²è®°å½•
                history.pushState({ detail: 'thought', id: id }, '', `#thought/${id}`);
            },
            
            // æ˜¾ç¤ºæ¨¡å‹è¯¦æƒ…
            showModelDetail: function(id) {
                const model = this.dataManager.getModelById(id);
                this.currentDetailId = id;
                this.currentDetailType = 'model';
                this.currentView = 'model-detail';
                
                const content = document.getElementById('content');
                content.innerHTML = this.renderModelDetail(model);
                
                // æ›´æ–°å†å²è®°å½•
                history.pushState({ detail: 'model', id: id }, '', `#model/${id}`);
            },
            
            // æ›´æ–°è¯¦æƒ…é¡µæ ‡é¢˜
            updateDetailTitle: function() {
                let title = 'æ€ç»´ååŒå¤„ç†å™¨';
                
                if (this.currentDetailType === 'thought') {
                    const thought = this.dataManager.getThoughtById(this.currentDetailId);
                    if (thought) {
                        title = thought.title || thought.id;
                    }
                } else if (this.currentDetailType === 'model') {
                    const model = this.dataManager.getModelById(this.currentDetailId);
                    if (model) {
                        title = `${model.id}: ${model.name}`;
                    }
                }
                
                document.getElementById('logo-text').textContent = title.length > 20 ? 
                    title.substring(0, 20) + '...' : title;
            },
            
            // å¿«é€Ÿæœç´¢
            quickSearch: function() {
                const query = document.getElementById('quick-search').value.trim();
                if (!query) return;
                
                this.searchQuery = query;
                this.navigateTo('search');
                setTimeout(() => {
                    this.performSearch();
                }, 100);
            },
            
            // æœç´¢æ€è€ƒè®°å½•
            searchThoughts: function() {
                const query = document.getElementById('thought-search').value.trim();
                this.searchQuery = query;
                
                if (!query) {
                    this.currentPage = 1;
                    this.renderView('thoughts');
                    return;
                }
                
                const results = this.dataManager.search(query, 'thoughts');
                this.renderSearchResults(results, query, 'thoughts');
            },
            
            // æœç´¢æ€ç»´æ¨¡å‹
            searchModels: function() {
                const query = document.getElementById('model-search').value.trim();
                this.searchQuery = query;
                
                if (!query) {
                    this.currentPage = 1;
                    this.renderView('models');
                    return;
                }
                
                const results = this.dataManager.search(query, 'models');
                this.renderSearchResults(results, query, 'models');
            },
            
            // æœç´¢æ ‡ç­¾
            searchTags: function() {
                const query = document.getElementById('tag-search').value.trim();
                const tags = Object.keys(this.dataManager.tags).filter(tag => 
                    tag.toLowerCase().includes(query.toLowerCase())
                ).map(tag => ({ tag, count: this.dataManager.tags[tag] }));
                
                const container = document.querySelector('.mobile-tags');
                if (container) {
                    if (tags.length > 0) {
                        container.innerHTML = tags.map(({tag, count}) => `
                            <span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')">
                                ${tag} (${count})
                            </span>
                        `).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: var(--text-light); padding: 20px;">æœªæ‰¾åˆ°ç›¸å…³æ ‡ç­¾</div>';
                    }
                }
            },
            
            // æ‰§è¡Œæœç´¢
            performSearch: function() {
                const query = document.getElementById('full-search').value.trim();
                this.searchQuery = query;
                
                if (!query) {
                    document.getElementById('search-results').innerHTML = `
                        <div class="mobile-empty">
                            <i class="fas fa-search"></i>
                            <p>è¾“å…¥å…³é”®è¯å¼€å§‹æœç´¢</p>
                        </div>
                    `;
                    return;
                }
                
                const searchType = this.getCurrentSearchType();
                const results = this.dataManager.search(query, searchType);
                this.renderSearchResults(results, query, searchType);
            },
            
            // è·å–å½“å‰æœç´¢ç±»å‹
            getCurrentSearchType: function() {
                const buttons = document.querySelectorAll('.mobile-page-btn');
                for (let btn of buttons) {
                    if (btn.classList.contains('active')) {
                        return btn.id.replace('search-', '');
                    }
                }
                return 'all';
            },
            
            // è®¾ç½®æœç´¢ç±»å‹
            setSearchType: function(type) {
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                document.querySelectorAll('.mobile-page-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(`search-${type}`).classList.add('active');
                
                // é‡æ–°æœç´¢
                if (this.searchQuery) {
                    this.performSearch();
                }
            },
            
            // æ¸²æŸ“æœç´¢ç»“æœ
            renderSearchResults: function(results, query, type = 'all') {
                const container = document.getElementById('search-results');
                
                if (results.thoughts.length === 0 && results.models.length === 0 && results.tags.length === 0) {
                    container.innerHTML = `
                        <div class="mobile-empty">
                            <i class="fas fa-search"></i>
                            <p>æœªæ‰¾åˆ°ç›¸å…³ç»“æœ: "${query}"</p>
                        </div>
                    `;
                    return;
                }
                
                let html = `
                    <div style="margin-bottom: 20px; color: var(--text-light); font-size: 14px;">
                        æ‰¾åˆ° ${results.thoughts.length + results.models.length + results.tags.length} ä¸ªç»“æœ
                    </div>
                `;
                
                // æ˜¾ç¤ºæ ‡ç­¾ç»“æœ
                if (results.tags.length > 0 && (type === 'all' || type === 'tags')) {
                    html += `
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-tags" style="margin-right: 8px;"></i>
                                ç›¸å…³æ ‡ç­¾ (${results.tags.length})
                            </div>
                            <div class="mobile-tags">
                                ${results.tags.map(({tag, count}) => `
                                    <span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')">
                                        ${tag} (${count})
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
                
                // æ˜¾ç¤ºæ€è€ƒè®°å½•ç»“æœ
                if (results.thoughts.length > 0 && (type === 'all' || type === 'thoughts')) {
                    html += `
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-file-alt" style="margin-right: 8px;"></i>
                                æ€è€ƒè®°å½• (${results.thoughts.length})
                            </div>
                            <div class="mobile-card-content">
                                ${results.thoughts.slice(0, 5).map(thought => `
                                    <div class="mobile-list-item" onclick="MobileUI.showThoughtDetail('${thought.id}')" 
                                         style="padding: 10px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;">
                                        <div style="font-weight: 500; font-size: 14px; margin-bottom: 4px;">
                                            ${thought.title || thought.id}
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-light);">
                                            ${thought.tags && thought.tags.length > 0 ? 
                                                thought.tags.slice(0, 2).map(tag => 
                                                    `<span class="mobile-tag" style="font-size: 10px; padding: 2px 6px;">${tag}</span>`
                                                ).join(' ') : 
                                                '<span style="color: #999;">æ— æ ‡ç­¾</span>'
                                            }
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            ${results.thoughts.length > 5 ? `
                                <div style="text-align: center; margin-top: 10px;">
                                    <button class="mobile-btn mobile-btn-secondary" 
                                            onclick="MobileUI.searchThoughts(); MobileUI.setSearchType('thoughts')"
                                            style="padding: 8px 15px; font-size: 13px; width: auto;">
                                        æŸ¥çœ‹å…¨éƒ¨ ${results.thoughts.length} æ¡ç»“æœ
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
                
                // æ˜¾ç¤ºæ€ç»´æ¨¡å‹ç»“æœ
                if (results.models.length > 0 && (type === 'all' || type === 'models')) {
                    html += `
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-cube" style="margin-right: 8px;"></i>
                                æ€ç»´æ¨¡å‹ (${results.models.length})
                            </div>
                            <div class="mobile-card-content">
                                ${results.models.slice(0, 5).map(model => `
                                    <div class="mobile-list-item" onclick="MobileUI.showModelDetail('${model.id}')" 
                                         style="padding: 10px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;">
                                        <div style="font-weight: 500; font-size: 14px; margin-bottom: 4px;">
                                            <span class="model-id-link">${model.id}</span>: ${model.name}
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-light);">
                                            ${this.truncateText(model.description, 80)}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            ${results.models.length > 5 ? `
                                <div style="text-align: center; margin-top: 10px;">
                                    <button class="mobile-btn mobile-btn-secondary" 
                                            onclick="MobileUI.searchModels(); MobileUI.setSearchType('models')"
                                            style="padding: 8px 15px; font-size: 13px; width: auto;">
                                        æŸ¥çœ‹å…¨éƒ¨ ${results.models.length} æ¡ç»“æœ
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
                
                container.innerHTML = html;
            },
            
            // æŒ‰æ ‡ç­¾ç­›é€‰
            filterByTag: function(tag) {
                const results = this.dataManager.filterByTag(tag);
                
                let html = `
                    <div class="mobile-card">
                        <div class="mobile-card-title">
                            <i class="fas fa-tag" style="margin-right: 8px;"></i>
                            æ ‡ç­¾: ${tag}
                        </div>
                        <div class="mobile-card-content">
                            æ‰¾åˆ° ${results.thoughts.length + results.models.length} æ¡ç›¸å…³å†…å®¹
                        </div>
                    </div>
                `;
                
                if (results.thoughts.length > 0) {
                    html += `
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-file-alt" style="margin-right: 8px;"></i>
                                ç›¸å…³æ€è€ƒè®°å½• (${results.thoughts.length})
                            </div>
                            <div class="mobile-card-content">
                                ${results.thoughts.slice(0, 5).map(thought => `
                                    <div class="mobile-list-item" onclick="MobileUI.showThoughtDetail('${thought.id}')" 
                                         style="padding: 10px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;">
                                        <div style="font-weight: 500; font-size: 14px;">
                                            ${thought.title || thought.id}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            ${results.thoughts.length > 5 ? `
                                <div style="text-align: center; margin-top: 10px;">
                                    <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.showAllTagResults('thoughts', '${tag}')"
                                            style="padding: 8px 15px; font-size: 13px; width: auto;">
                                        æŸ¥çœ‹å…¨éƒ¨ ${results.thoughts.length} æ¡æ€è€ƒè®°å½•
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
                
                if (results.models.length > 0) {
                    html += `
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-cube" style="margin-right: 8px;"></i>
                                ç›¸å…³æ€ç»´æ¨¡å‹ (${results.models.length})
                            </div>
                            <div class="mobile-card-content">
                                ${results.models.slice(0, 5).map(model => `
                                    <div class="mobile-list-item" onclick="MobileUI.showModelDetail('${model.id}')" 
                                         style="padding: 10px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;">
                                        <div style="font-weight: 500; font-size: 14px;">
                                            <span class="model-id-link">${model.id}</span>: ${model.name}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            ${results.models.length > 5 ? `
                                <div style="text-align: center; margin-top: 10px;">
                                    <button class="mobile-btn mobile-btn-secondary" onclick="MobileUI.showAllTagResults('models', '${tag}')"
                                            style="padding: 8px 15px; font-size: 13px; width: auto;">
                                        æŸ¥çœ‹å…¨éƒ¨ ${results.models.length} ä¸ªæ€ç»´æ¨¡å‹
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
                
                if (results.thoughts.length === 0 && results.models.length === 0) {
                    html += `
                        <div class="mobile-empty">
                            <i class="fas fa-search"></i>
                            <p>æš‚æ— ç›¸å…³è®°å½•</p>
                        </div>
                    `;
                }
                
                document.getElementById('content').innerHTML = html;
                this.closeSidebar();
            },
            
            // æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ç»“æœ
            showAllTagResults: function(type, tag) {
                const results = this.dataManager.filterByTag(tag);
                
                if (type === 'thoughts') {
                    let html = `
                        <div class="mobile-search">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="åœ¨æ­¤ç»“æœä¸­æœç´¢..." 
                                   oninput="MobileUI.searchInTagResults('${tag}', this.value, 'thoughts')">
                        </div>
                        
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-tag" style="margin-right: 8px;"></i>
                                æ ‡ç­¾ "${tag}" çš„æ‰€æœ‰æ€è€ƒè®°å½• (${results.thoughts.length})
                            </div>
                        </div>
                    `;
                    
                    results.thoughts.forEach(thought => {
                        html += `
                            <div class="mobile-card" onclick="MobileUI.showThoughtDetail('${thought.id}')">
                                <div class="mobile-card-title">${thought.title || thought.id}</div>
                                <div class="mobile-card-content">
                                    ${thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"] ? 
                                        this.truncateText(thought.sections["æ ¸å¿ƒç»“è®º"], 100) : 
                                        'æš‚æ— æè¿°'
                                    }
                                </div>
                            </div>
                        `;
                    });
                    
                    document.getElementById('content').innerHTML = html;
                } else if (type === 'models') {
                    let html = `
                        <div class="mobile-search">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="åœ¨æ­¤ç»“æœä¸­æœç´¢..." 
                                   oninput="MobileUI.searchInTagResults('${tag}', this.value, 'models')">
                        </div>
                        
                        <div class="mobile-card">
                            <div class="mobile-card-title">
                                <i class="fas fa-tag" style="margin-right: 8px;"></i>
                                æ ‡ç­¾ "${tag}" çš„æ‰€æœ‰æ€ç»´æ¨¡å‹ (${results.models.length})
                            </div>
                        </div>
                    `;
                    
                    results.models.forEach(model => {
                        html += `
                            <div class="mobile-card" onclick="MobileUI.showModelDetail('${model.id}')">
                                <div class="mobile-card-title">
                                    <span class="model-id-link">${model.id}</span>: ${model.name}
                                </div>
                                <div class="mobile-card-content">
                                    ${this.truncateText(model.description, 120)}
                                </div>
                            </div>
                        `;
                    });
                    
                    document.getElementById('content').innerHTML = html;
                }
            },
            
            // åœ¨æ ‡ç­¾ç»“æœä¸­æœç´¢
            searchInTagResults: function(tag, query, type) {
                const results = this.dataManager.filterByTag(tag);
                let filtered = [];
                
                if (type === 'thoughts') {
                    filtered = results.thoughts.filter(thought => {
                        return (
                            (thought.title && thought.title.toLowerCase().includes(query.toLowerCase())) ||
                            (thought.id && thought.id.toLowerCase().includes(query.toLowerCase())) ||
                            (thought.tags && thought.tags.some(t => t.toLowerCase().includes(query.toLowerCase())))
                        );
                    });
                    
                    // æ›´æ–°æ˜¾ç¤º
                    const cards = document.querySelectorAll('.mobile-card');
                    cards.forEach((card, index) => {
                        if (index === 0) return; // è·³è¿‡æ ‡é¢˜å¡ç‰‡
                        
                        const thoughtId = card.getAttribute('onclick')?.match(/'([^']+)'/)?.[1];
                        const thought = results.thoughts.find(t => t.id === thoughtId);
                        
                        if (thought && filtered.find(t => t.id === thoughtId)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                    
                    // æ›´æ–°æ ‡é¢˜
                    if (cards[0]) {
                        cards[0].querySelector('.mobile-card-title').innerHTML = `
                            <i class="fas fa-tag" style="margin-right: 8px;"></i>
                            æ ‡ç­¾ "${tag}" çš„æ€è€ƒè®°å½• (${filtered.length}/${results.thoughts.length})
                        `;
                    }
                }
            },
            
            // æ¸²æŸ“åˆ†é¡µ
            renderPagination: function(totalPages) {
                let html = '<div class="mobile-pagination">';
                
                // ä¸Šä¸€é¡µæŒ‰é’®
                html += `
                    <button class="mobile-page-btn ${this.currentPage === 1 ? 'disabled' : ''}" 
                            onclick="MobileUI.changePage(${this.currentPage - 1})" 
                            ${this.currentPage === 1 ? 'disabled' : ''}>
                        <i class="fas fa-chevron-left"></i>
                    </button>
                `;
                
                // é¡µç æŒ‰é’®
                const maxVisible = 5;
                let startPage = Math.max(1, this.currentPage - Math.floor(maxVisible / 2));
                let endPage = Math.min(totalPages, startPage + maxVisible - 1);
                
                if (endPage - startPage + 1 < maxVisible) {
                    startPage = Math.max(1, endPage - maxVisible + 1);
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    html += `
                        <button class="mobile-page-btn ${this.currentPage === i ? 'active' : ''}" 
                                onclick="MobileUI.changePage(${i})">
                            ${i}
                        </button>
                    `;
                }
                
                // ä¸‹ä¸€é¡µæŒ‰é’®
                html += `
                    <button class="mobile-page-btn ${this.currentPage === totalPages ? 'disabled' : ''}" 
                            onclick="MobileUI.changePage(${this.currentPage + 1})" 
                            ${this.currentPage === totalPages ? 'disabled' : ''}>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                `;
                
                html += '</div>';
                return html;
            },
            
            // æ”¹å˜é¡µç 
            changePage: function(page) {
                if (page < 1 || page > Math.ceil(
                    this.currentView === 'thoughts' ? 
                    this.dataManager.thoughts.length / this.itemsPerPage : 
                    this.dataManager.models.length / this.itemsPerPage
                )) {
                    return;
                }
                
                this.currentPage = page;
                this.renderView(this.currentView);
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                document.getElementById('content').scrollIntoView({ behavior: 'smooth' });
            },
            
            // åŒæ­¥æ•°æ®
            syncData: function() {
                document.getElementById('sync-btn').innerHTML = '<i class="fas fa-sync-alt sync-pulse"></i>';
                document.getElementById('sync-btn').title = 'åŒæ­¥ä¸­...';
                
                setTimeout(() => {
                    this.dataManager.syncData();
                    document.getElementById('sync-btn').innerHTML = '<i class="fas fa-check-circle"></i>';
                    document.getElementById('sync-btn').title = 'åŒæ­¥å®Œæˆ';
                    
                    setTimeout(() => {
                        document.getElementById('sync-btn').innerHTML = '<i class="fas fa-sync-alt"></i>';
                        document.getElementById('sync-btn').title = 'åŒæ­¥æ•°æ®';
                    }, 2000);
                }, 1000);
            },
            
            // å¯¼å‡ºæ‰€æœ‰æ•°æ®
            exportAllData: function() {
                const data = this.dataManager.exportAllData();
                if (!data) {
                    this.showNotification('å¯¼å‡ºå¤±è´¥', 'error');
                    return;
                }
                
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `æ€ç»´ååŒå¤„ç†å™¨_ç§»åŠ¨ç«¯å¤‡ä»½_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification('æ•°æ®å¯¼å‡ºæˆåŠŸ', 'success');
                this.closeModal();
            },
            
            // å¯¼å…¥æ•°æ®
            importData: function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const result = this.dataManager.importData(event.target.result);
                        if (result.success) {
                            this.renderView(this.currentView);
                            this.updateStats();
                            this.updateCommonTags();
                        }
                    };
                    reader.readAsText(file);
                };
                
                input.click();
                this.closeModal();
            },
            
            // æ¸…é™¤æ•°æ®
            clearData: function() {
                if (this.dataManager.clearData()) {
                    this.renderView('overview');
                    this.updateStats();
                    this.updateCommonTags();
                    this.closeModal();
                }
            },
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateStats: function() {
                document.getElementById('sidebar-thought-count').textContent = this.dataManager.thoughts.length;
                document.getElementById('sidebar-model-count').textContent = this.dataManager.models.length;
                document.getElementById('sidebar-tag-count').textContent = Object.keys(this.dataManager.tags).length;
                document.getElementById('sidebar-version').textContent = this.dataManager.currentVersion;
                
                // æ›´æ–°æœ€ååŒæ­¥æ—¶é—´
                if (this.dataManager.lastSaved) {
                    const savedTime = new Date(this.dataManager.lastSaved);
                    const now = new Date();
                    const diffMinutes = Math.floor((now - savedTime) / (1000 * 60));
                    
                    let timeText = "åˆšåˆš";
                    if (diffMinutes >= 60) {
                        const diffHours = Math.floor(diffMinutes / 60);
                        timeText = `${diffHours}å°æ—¶å‰`;
                    } else if (diffMinutes > 0) {
                        timeText = `${diffMinutes}åˆ†é’Ÿå‰`;
                    }
                    
                    document.getElementById('last-sync-time').textContent = timeText;
                }
                
                // æ›´æ–°æ•°æ®çŠ¶æ€
                const dataStatus = document.getElementById('data-status');
                if (this.dataManager.thoughts.length > 0 || this.dataManager.models.length > 0) {
                    dataStatus.textContent = 'æ­£å¸¸';
                    dataStatus.style.color = 'var(--success-color)';
                } else {
                    dataStatus.textContent = 'ç©º';
                    dataStatus.style.color = 'var(--warning-color)';
                }
            },
            
            // æ›´æ–°çƒ­é—¨æ ‡ç­¾
            updateCommonTags: function() {
                const tags = this.dataManager.getTopTags(12);
                const container = document.getElementById('common-tags');
                
                if (tags.length > 0) {
                    let html = '';
                    tags.forEach(({ tag, count }) => {
                        html += `<span class="mobile-tag clickable" onclick="MobileUI.filterByTag('${tag}')">${tag} (${count})</span>`;
                    });
                    container.innerHTML = html;
                } else {
                    container.innerHTML = '<span style="color: var(--text-light); font-size: 14px;">æš‚æ— æ ‡ç­¾</span>';
                }
            },
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification: function(message, type = 'info') {
                const notification = document.getElementById('notification');
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}" 
                       style="color: ${type === 'success' ? 'var(--success-color)' : type === 'error' ? 'var(--danger-color)' : type === 'warning' ? 'var(--warning-color)' : 'var(--accent-color)'};">
                    </i>
                    <span>${message}</span>
                `;
                
                notification.className = `mobile-notification ${type} show`;
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            },
            
            // æˆªæ–­æ–‡æœ¬
            truncateText: function(text, maxLength) {
                if (!text) return '';
                if (text.length <= maxLength) return text;
                return text.substring(0, maxLength) + '...';
            }
        };
        
        // ==================== åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
            const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const screenWidth = window.innerWidth;
            
            // å¦‚æœæ˜¯å¤§å±è®¾å¤‡ä¸”ä¸æ˜¯ä»ç”µè„‘ç«¯é‡å®šå‘è¿‡æ¥çš„ï¼Œæç¤ºä½¿ç”¨ç”µè„‘ç«¯
            if (!isMobile && screenWidth > 768 && !window.location.href.includes('mobile')) {
                if (confirm('æ£€æµ‹åˆ°æ‚¨åœ¨å¤§å±è®¾å¤‡ä¸Šè®¿é—®ï¼Œæ˜¯å¦åˆ‡æ¢åˆ°ç”µè„‘ç«¯å®Œæ•´ç•Œé¢ï¼Ÿ')) {
                    window.location.href = 'v16.html';
                    return;
                }
            }
            
            // åˆå§‹åŒ–ç§»åŠ¨ç«¯UI
            MobileUI.init();
            
            // å¤„ç†URLå“ˆå¸Œ
            const hash = window.location.hash.substring(1);
            if (hash) {
                if (hash.startsWith('thought/')) {
                    const thoughtId = hash.replace('thought/', '');
                    MobileUI.showThoughtDetail(thoughtId);
                } else if (hash.startsWith('model/')) {
                    const modelId = hash.replace('model/', '');
                    MobileUI.showModelDetail(modelId);
                } else if (['overview', 'thoughts', 'models', 'search', 'tags'].includes(hash)) {
                    MobileUI.navigateTo(hash);
                }
            }
            
            // ç›‘å¬è¿”å›æŒ‰é’®
            window.addEventListener('popstate', function(event) {
                if (event.state && event.state.view) {
                    MobileUI.navigateTo(event.state.view);
                } else if (event.state && event.state.detail) {
                    if (event.state.detail === 'thought') {
                        MobileUI.showThoughtDetail(event.state.id);
                    } else if (event.state.detail === 'model') {
                        MobileUI.showModelDetail(event.state.id);
                    }
                }
            });
        });
    </script>
</body>
</html>

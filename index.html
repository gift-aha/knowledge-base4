<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ç»´ååŒå¤„ç†å™¨ - æ™ºèƒ½è§£æå¢å¼ºç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- å¼•å…¥ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ -->
    <script src="data-manager.js"></script>
    
    <!-- ç§»åŠ¨ç«¯æ£€æµ‹ -->
    <script>
        // ç§»åŠ¨ç«¯æ£€æµ‹å’Œé‡å®šå‘
        (function() {
            const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const screenWidth = window.innerWidth;
            
            // å¦‚æœæ˜¯ç§»åŠ¨è®¾å¤‡ä¸”å±å¹•å®½åº¦å°äº768pxï¼Œé‡å®šå‘åˆ°ç§»åŠ¨ç«¯
            if ((isMobile || screenWidth < 768) && 
                !window.location.href.includes('mobile') && 
                !window.location.href.includes('force-desktop')) {
                
                // è¯¢é—®ç”¨æˆ·æ˜¯å¦åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯
                if (confirm('æ£€æµ‹åˆ°æ‚¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®¿é—®ï¼Œæ˜¯å¦åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯ä¼˜åŒ–ç•Œé¢ï¼Ÿ')) {
                    window.location.href = 'v16-mobile-fixed.html';
                }
            }
        })();
    </script>
    
    <style>
        /* [ä¿æŒåŸæ¥çš„æ‰€æœ‰CSSæ ·å¼ä¸å˜] */
        :root {
            --primary-color: #1a237e;
            --secondary-color: #283593;
            --accent-color: #5c6bc0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-bg: #f8f9fa;
            --dark-bg: #1a237e;
            --border-color: #e1e5eb;
            --text-color: #333;
            --text-light: #666;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f9fc;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .top-bar {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            flex-shrink: 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            font-size: 24px;
        }
        
        .logo-text {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .system-info {
            font-size: 14px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .current-view {
            font-weight: 500;
            background: rgba(255, 255, 255, 0.15);
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 280px;
            background-color: #fff;
            border-right: 1px solid #e1e5eb;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.03);
            flex-shrink: 0;
        }
        
        .nav-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .nav-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-section h3 i {
            font-size: 14px;
        }
        
        .nav-links {
            list-style: none;
        }
        
        .nav-links li {
            margin-bottom: 10px;
        }
        
        .nav-links a {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            color: #555;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 14.5px;
            cursor: pointer;
        }
        
        .nav-links a:hover {
            background-color: #f0f4f9;
            color: var(--primary-color);
        }
        
        .nav-links a.active {
            background-color: #e8edff;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .nav-links a i {
            margin-right: 10px;
            width: 18px;
            text-align: center;
        }
        
        /* ç‰ˆæœ¬é€‰æ‹©å™¨ */
        .version-selector {
            padding: 15px 20px;
            background-color: #f9fbfd;
            border-top: 1px solid #e1e5eb;
        }
        
        .version-selector select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d9e6;
            border-radius: 4px;
            background-color: white;
            font-size: 14px;
            color: #333;
        }
        
        /* ä¸­é—´ä¸»å†…å®¹åŒº */
        .content-area {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background-color: #fff;
        }
        
        .content-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .content-header h2 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .content-header p {
            color: #666;
            font-size: 15px;
        }
        
        /* æ ¸å¿ƒèµ„äº§æ€»è§ˆæ ·å¼ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-top: 4px solid var(--primary-color);
        }
        
        .stat-card h3 {
            font-size: 16px;
            color: #555;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-desc {
            font-size: 14px;
            color: #777;
            margin-top: 5px;
        }
        
        /* æ€è€ƒè®°å½•åˆ—è¡¨æ ·å¼ */
        .records-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .record-card {
            background-color: white;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #4caf50;
            transition: transform 0.2s;
            cursor: pointer;
            position: relative;
        }
        
        .record-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .record-id {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .record-title {
            font-size: 17px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #333;
        }
        
        .record-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .record-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        /* æ¨¡å‹åˆ—è¡¨æ ·å¼ */
        .models-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .model-card {
            background-color: white;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #ff9800;
            transition: transform 0.2s;
            cursor: pointer;
            position: relative;
        }
        
        .model-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .model-id {
            font-weight: 600;
            color: #ff9800;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .model-name {
            font-size: 17px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #333;
        }
        
        .model-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .model-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        /* å¡ç‰‡æ“ä½œæŒ‰é’® */
        .card-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .record-card:hover .card-actions,
        .model-card:hover .card-actions {
            opacity: 1;
        }
        
        .action-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-icon.edit {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
        }
        
        .action-icon.delete {
            background-color: rgba(244, 67, 54, 0.1);
            color: var(--danger-color);
        }
        
        .action-icon:hover {
            transform: scale(1.1);
        }
        
        /* è¯¦ç»†å†…å®¹æ ·å¼ */
        .detail-view {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .detail-title {
            font-size: 22px;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .detail-id {
            font-size: 16px;
            color: #666;
            background-color: #f0f4f9;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .detail-content {
            line-height: 1.6;
            font-size: 15.5px;
            color: #444;
        }
        
        .detail-content p {
            margin-bottom: 15px;
        }
        
        /* è¾“å…¥åŒºåŸŸæ ·å¼ */
        .input-section {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .input-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        textarea, input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            resize: vertical;
            min-height: 300px;
            margin-bottom: 15px;
            font-family: monospace;
            line-height: 1.5;
        }
        
        input[type="text"] {
            min-height: auto;
            margin-bottom: 15px;
            font-family: inherit;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #4959c1;
        }
        
        .btn-secondary {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background-color: #e9ecef;
        }
        
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #43a047;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #fb8c00;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #e53935;
        }
        
        /* æ ‡ç­¾æ ·å¼ */
        .tag {
            display: inline-block;
            padding: 4px 10px;
            background-color: rgba(92, 107, 192, 0.1);
            color: var(--accent-color);
            border-radius: 4px;
            font-size: 0.85rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        /* è§£æé¢„è§ˆ */
        .parse-preview {
            background-color: white;
            border: 1px solid #e3f2fd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .parse-preview h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        /* å³ä¾§åŠŸèƒ½é¢æ¿ */
        .right-panel {
            width: 320px;
            background-color: #fff;
            border-left: 1px solid #e1e5eb;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.03);
            flex-shrink: 0;
        }
        
        .search-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .search-box {
            position: relative;
            margin-bottom: 15px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 1px solid #d1d9e6;
            border-radius: 6px;
            font-size: 14px;
            background-color: #f9fbfd;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
        }
        
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .filter-options select {
            padding: 8px 12px;
            border: 1px solid #d1d9e6;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
        }
        
        .status-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .status-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .status-label {
            color: #666;
        }
        
        .status-value {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        /* æ–°å¢ï¼šæ¨¡å‹å…³è”ç½‘ç»œæ ·å¼ */
        .network-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .network-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .network-graph {
            height: 200px;
            background-color: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            margin-top: 10px;
            border: 1px dashed #e1e5eb;
        }
        
        /* æ–°å¢ï¼šæ•°æ®æ“ä½œæ ·å¼ */
        .data-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .data-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .data-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .data-btn {
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .data-btn.export {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .data-btn.backup {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .data-btn.import {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .data-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .how-to-use {
            padding: 20px;
            flex: 1;
        }
        
        .how-to-use h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .steps-list {
            list-style-type: none;
            counter-reset: step-counter;
        }
        
        .steps-list li {
            margin-bottom: 15px;
            padding-left: 30px;
            position: relative;
            font-size: 14px;
            color: #555;
            line-height: 1.5;
        }
        
        .steps-list li:before {
            counter-increment: step-counter;
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background-color: var(--primary-color);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }
        
        /* æ ¼å¼æç¤ºæ ·å¼ */
        .format-hint {
            background-color: #f0f8ff;
            border-left: 4px solid #4dabf7;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 6px 6px 0;
        }
        
        .format-examples {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .format-example {
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            white-space: pre-wrap;
            position: relative;
        }
        
        .format-example-title {
            position: absolute;
            top: -10px;
            left: 15px;
            background-color: var(--accent-color);
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .right-panel {
                width: 280px;
            }
        }
        
        @media (max-width: 992px) {
            .right-panel {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 240px;
            }
            
            .stats-grid,
            .records-list,
            .models-list {
                grid-template-columns: 1fr;
            }
            
            .top-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px 20px;
            }
            
            .system-info {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
        }
        
        /* ç©ºçŠ¶æ€æç¤º */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #888;
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #ccc;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(26, 35, 126, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .modal {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: flex-end;
        }
        
        /* è¯¦æƒ…é¡µåˆ†æ®µæ ·å¼ */
        .detail-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .detail-section h4 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-section-content {
            padding-left: 10px;
        }
        
        /* æ ‡ç­¾å¤æ ¸å®¹å™¨ */
        .tag-review-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border: 1px solid var(--border-color);
        }
        
        .tag-review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .tag-review-actions {
            display: flex;
            gap: 10px;
        }
        
        /* è¡ŒåŠ¨æŒ‰é’®ç»„ */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        /* ç´¢å¼•åˆ—è¡¨æ ·å¼ */
        .index-panel {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .index-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .index-item {
            padding: 8px 12px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .index-item:last-child {
            border-bottom: none;
        }
        
        .index-item-id {
            font-weight: bold;
            color: var(--accent-color);
            min-width: 60px;
        }
        
        .index-item-title {
            flex: 1;
            font-size: 0.95rem;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            margin: 0 10px;
        }
        
        .index-item-actions {
            display: flex;
            gap: 5px;
        }
        
        .index-item-action {
            cursor: pointer;
            padding: 3px 5px;
            border-radius: 3px;
            transition: background-color 0.2s;
        }
        
        .index-item-action:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        /* ç³»ç»ŸçŠ¶æ€å¡ç‰‡ */
        .system-status-card {
            background-color: #e8f4fc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* æ–°å¢ï¼šæ—¶é—´çº¿æ ·å¼ */
        .timeline-container {
            position: relative;
            margin: 40px 0;
            padding-left: 30px;
        }
        
        .timeline-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--secondary-color);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .timeline-item:hover {
            transform: translateX(5px);
        }
        
        .timeline-dot {
            position: absolute;
            left: -36px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--secondary-color);
            border: 3px solid white;
            z-index: 2;
            transition: var(--transition);
        }
        
        .timeline-item:hover .timeline-dot {
            background: var(--primary-color);
            transform: scale(1.2);
        }
        
        .timeline-content {
            background: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: var(--shadow);
        }
        
        .timeline-version {
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .timeline-date {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        /* æ–°å¢ï¼šå…³è”ç½‘ç»œå¯è§†åŒ– */
        .network-visualization {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .network-node {
            padding: 8px 12px;
            background-color: rgba(92, 107, 192, 0.1);
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(92, 107, 192, 0.2);
        }
        
        .network-node:hover {
            background-color: rgba(92, 107, 192, 0.2);
            transform: translateY(-2px);
        }
        
        .network-node.center {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        .network-connection {
            height: 2px;
            background: var(--border-color);
            flex: 1;
            max-width: 30px;
        }
        
        /* ==================== æ–°å¢ï¼šåˆ†æ®µç¼–è¾‘æ ·å¼ ==================== */
        .section-editor-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .section-tab {
            padding: 8px 16px;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .section-tab:hover {
            background-color: #e9ecef;
        }
        
        .section-tab.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .section-editor {
            display: none;
        }
        
        .section-editor.active {
            display: block;
        }
        
        .section-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .section-editor-header h4 {
            color: var(--primary-color);
            margin: 0;
        }
        
        .section-editor textarea {
            min-height: 200px;
        }
        
        .section-preview {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            margin-top: 10px;
            border: 1px solid var(--border-color);
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        /* å¯ç¼–è¾‘IDæ ·å¼ */
        .editable-id {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .editable-id-label {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .editable-id-input {
            flex: 1;
            max-width: 200px;
        }
        
        /* æ–°å¢ï¼šå…³è”æ¨¡å‹ç¼–è¾‘æ ·å¼ */
        .related-models-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .related-models-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .related-models-input {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .related-models-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }
        
        .related-models-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            max-height: 120px;
            overflow-y: auto;
            padding: 5px;
        }
        
        .related-model-tag {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .related-model-tag .remove {
            cursor: pointer;
            color: var(--danger-color);
            font-size: 0.8rem;
        }
        
        .related-model-tag .remove:hover {
            color: #d32f2f;
        }
        
        .auto-extract-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .auto-extract-btn:hover {
            background-color: var(--secondary-color);
        }
        
        /* ==================== æ–°å¢ï¼šæ¨¡å‹æè¿°æå–æŒ‰é’®æ ·å¼ ==================== */
        .model-description-extract-btn {
            background-color: var(--warning-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .model-description-extract-btn:hover {
            background-color: #e68900;
        }
        
        .model-description-extract-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .model-description-extract-info {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 10px;
            padding: 8px 12px;
            background-color: #f0f7ff;
            border-radius: 4px;
            border-left: 3px solid var(--accent-color);
        }
        
        /* ==================== æ–°å¢ï¼šæ—¶é—´çº¿ç¼–è¾‘æ ·å¼ ==================== */
        .timeline-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .timeline-edit-actions {
            position: absolute;
            top: 5px;
            right: 5px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .timeline-item:hover .timeline-edit-actions {
            opacity: 1;
        }
        
        .timeline-edit-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        
        .timeline-edit-btn.edit {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
        }
        
        .timeline-edit-btn.delete {
            background-color: rgba(244, 67, 54, 0.1);
            color: var(--danger-color);
        }
        
        .timeline-edit-btn:hover {
            transform: scale(1.1);
        }
        
        /* æ—¶é—´çº¿è¯¦æƒ…æ ·å¼ */
        .timeline-detail-view {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
        }
        
        .timeline-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .timeline-detail-title {
            font-size: 22px;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .timeline-detail-date {
            font-size: 16px;
            color: #666;
            background-color: #f0f4f9;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .timeline-detail-content {
            line-height: 1.6;
            font-size: 15.5px;
            color: #444;
            margin-top: 15px;
        }
        
        /* æ—¶é—´çº¿ç¼–è¾‘è¡¨å• */
        .timeline-edit-form {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .timeline-form-group {
            margin-bottom: 15px;
        }
        
        .timeline-form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .timeline-form-group input,
        .timeline-form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }
        
        .timeline-form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
    <div class="top-bar">
        <div class="logo">
            <div class="logo-icon">ğŸ§ </div>
            <div class="logo-text">æ€ç»´ååŒå¤„ç†å™¨</div>
        </div>
        <div class="system-info">
            <span>å½“å‰ç‰ˆæœ¬: <strong id="current-version">v22.48</strong></span>
            <span style="margin: 0 5px;">|</span>
            <span>æ¨¡å‹æ€»æ•°: <strong id="total-models">0</strong></span>
            <span style="margin: 0 5px;">|</span>
            <span>æ€è€ƒè®°å½•: <strong id="total-thoughts">0</strong></span>
            <span style="margin: 0 5px;">|</span>
            <span>æ ‡ç­¾æ•°: <strong id="total-tags">0</strong></span>
        </div>
        <div class="current-view" id="current-view">æ ¸å¿ƒèµ„äº§æ€»è§ˆ</div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-container">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <div class="sidebar">
            <div class="nav-section">
                <h3><i class="fas fa-compass"></i> æ ¸å¿ƒå¯¼èˆª</h3>
                <ul class="nav-links">
                    <li><a href="#" class="active" data-view="overview"><i class="fas fa-chart-pie"></i> æ ¸å¿ƒèµ„äº§æ€»è§ˆ</a></li>
                    <li><a href="#" data-view="add-structured"><i class="fas fa-plus-circle"></i> ç»“æ„åŒ–è¾“å…¥æ€è€ƒ</a></li>
                    <li><a href="#" data-view="thoughts"><i class="fas fa-list-ul"></i> æ€è€ƒç›®å½•å®Œæ•´æ¸…å•</a></li>
                    <li><a href="#" data-view="models"><i class="fas fa-cube"></i> æ ¸å¿ƒæ€ç»´æ¨¡å‹ç´¢å¼•</a></li>
                    <li><a href="#" data-view="add-model"><i class="fas fa-plus-square"></i> åˆ›å»ºæ€ç»´æ¨¡å‹</a></li>
                    <li><a href="#" data-view="keywords"><i class="fas fa-search"></i> æ ‡ç­¾åˆ†ç±»æ£€ç´¢</a></li>
                    <!-- æ–°å¢å¯¼èˆªé¡¹ -->
                    <li><a href="#" data-view="network-analysis"><i class="fas fa-project-diagram"></i> æ¨¡å‹å…³è”ç½‘ç»œåˆ†æ</a></li>
                    <li><a href="#" data-view="timeline"><i class="fas fa-road"></i> ç³»ç»Ÿæ¼”è¿›å†ç¨‹</a></li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3><i class="fas fa-tools"></i> ç³»ç»Ÿå·¥å…·</h3>
                <ul class="nav-links">
                    <li><a href="#" data-view="how-to-use"><i class="fas fa-question-circle"></i> å¦‚ä½•ä½¿ç”¨æœ¬ç³»ç»Ÿ</a></li>
                    <li><a href="#" data-view="milestones"><i class="fas fa-road"></i> ç³»ç»Ÿæ¼”è¿›é‡Œç¨‹ç¢‘</a></li>
                    <li><a href="#" data-view="architecture"><i class="fas fa-sitemap"></i> ç³»ç»Ÿæ¶æ„ç‰¹æ€§</a></li>
                    <li><a href="#" data-view="tag-review"><i class="fas fa-tags"></i> æ ‡ç­¾å¤æ ¸ä¸­å¿ƒ</a></li>
                    <!-- æ–°å¢å¯¼èˆªé¡¹ -->
                    <li><a href="#" data-view="data-management"><i class="fas fa-database"></i> æ•°æ®ç®¡ç†ä¸å¤‡ä»½</a></li>
                </ul>
            </div>
            
            <div class="version-selector">
                <label for="version-select">æ•°æ®ç‰ˆæœ¬:</label>
                <select id="version-select">
                    <option value="initial">åˆå§‹ç‰ˆæœ¬</option>
                    <option value="current" selected>å½“å‰ç‰ˆæœ¬ (æœ¬åœ°å­˜å‚¨)</option>
                </select>
            </div>
        </div>
        
        <!-- ä¸­é—´ä¸»å†…å®¹åŒº -->
        <div class="content-area" id="content-area">
            <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            <div id="loading" class="loading" style="margin: 100px auto;"></div>
        </div>
        
        <!-- å³ä¾§åŠŸèƒ½é¢æ¿ -->
        <div class="right-panel">
            <div class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="æœç´¢æ€è€ƒè®°å½•æˆ–æ¨¡å‹...">
                </div>
                <div class="filter-options">
                    <select id="category-filter">
                        <option value="all">æ‰€æœ‰ç±»åˆ«</option>
                        <option value="thought">æ€è€ƒè®°å½•</option>
                        <option value="model">æ€ç»´æ¨¡å‹</option>
                        <option value="tag">æ ‡ç­¾</option>
                    </select>
                    <select id="theme-filter">
                        <option value="all">æ‰€æœ‰ä¸»é¢˜</option>
                        <option value="emotion">æƒ…æ„Ÿ/å…³ç³»</option>
                        <option value="philosophy">å“²å­¦/å­˜åœ¨</option>
                        <option value="growth">æˆé•¿/å†ç¨‹</option>
                        <option value="society">ç¤¾ä¼š/ç³»ç»Ÿ</option>
                        <option value="aesthetics">è‰ºæœ¯/è¡¨è¾¾</option>
                    </select>
                </div>
            </div>
            
            <div class="status-section">
                <h3><i class="fas fa-heartbeat"></i> ç³»ç»Ÿå¥åº·çŠ¶æ€</h3>
                <div class="status-item">
                    <span class="status-label">æ•°æ®å®Œæ•´æ€§</span>
                    <span class="status-value" id="data-integrity">100%</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å…³è”ç½‘ç»œ</span>
                    <span class="status-value" id="network-health">å®Œå¥½</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æ¨¡å‹å¯æ‹“å±•æ€§</span>
                    <span class="status-value" id="extensibility">å¼€æ”¾</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å­˜å‚¨çŠ¶æ€</span>
                    <span class="status-value" id="storage-status">æ­£å¸¸</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æœ€åä¿å­˜</span>
                    <span class="status-value" id="last-saved">åˆšåˆš</span>
                </div>
            </div>
            
            <!-- æ–°å¢ï¼šæ¨¡å‹å…³è”ç½‘ç»œ -->
            <div class="network-section">
                <h3><i class="fas fa-project-diagram"></i> æ¨¡å‹å…³è”ç½‘ç»œ</h3>
                <p style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 10px;">
                    å½“å‰é€‰ä¸­æ¨¡å‹çš„å…³è”ç½‘ç»œ
                </p>
                <div class="network-graph" id="network-graph">
                    <div>
                        <i class="fas fa-project-diagram" style="font-size: 3rem; margin-bottom: 10px; color: #ccc;"></i>
                        <p>é€‰æ‹©æ¨¡å‹æŸ¥çœ‹å…³è”ç½‘ç»œ</p>
                    </div>
                </div>
            </div>
            
            <!-- æ–°å¢ï¼šæ•°æ®æ“ä½œ -->
            <div class="data-section">
                <h3><i class="fas fa-database"></i> æ•°æ®æ“ä½œ</h3>
                <div class="data-actions">
                    <button class="data-btn export" id="export-current-btn">
                        <i class="fas fa-file-export"></i> å¯¼å‡ºå½“å‰é¡¹ç›®
                    </button>
                    <button class="data-btn backup" id="backup-data-btn">
                        <i class="fas fa-sync-alt"></i> å¤‡ä»½å…¨éƒ¨æ•°æ®
                    </button>
                    <button class="data-btn import" id="import-data-btn">
                        <i class="fas fa-file-import"></i> å¯¼å…¥æ•°æ®
                    </button>
                    <button class="data-btn backup" id="export-all-btn">
                        <i class="fas fa-download"></i> å¯¼å‡ºå…¨éƒ¨æ•°æ®
                    </button>
                </div>
            </div>
            
            <div class="how-to-use">
                <h3><i class="fas fa-lightbulb"></i> å¿«é€Ÿä½¿ç”¨æŒ‡å—</h3>
                <ol class="steps-list">
                    <li>æ ¹æ®æƒ…ç»ª/é—®é¢˜å®šä½æƒ…å¢ƒ</li>
                    <li>å¿«é€Ÿæµè§ˆç›¸å…³æ ¸å¿ƒæ¨¡å‹</li>
                    <li>è°ƒç”¨å…·ä½“çš„æ€ç»´/è¡ŒåŠ¨è¦ç‚¹</li>
                    <li>åœ¨è„‘æµ·ä¸­æ¼”ç»ƒæˆ–å†™åœ¨çº¸ä¸Š</li>
                    <li>å°†çŸ¥è¯†è½¬åŒ–ä¸ºè‡ªæˆ‘æ™ºæ…§</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- ç¡®è®¤åˆ é™¤æ¨¡æ€æ¡† -->
    <div id="delete-modal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h3>ç¡®è®¤åˆ é™¤</h3>
            <p id="delete-message">ç¡®å®šè¦åˆ é™¤æ­¤é¡¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">å–æ¶ˆ</button>
                <button class="btn btn-danger" onclick="confirmDelete()">åˆ é™¤</button>
            </div>
        </div>
    </div>

    <!-- æ ‡ç­¾å¤æ ¸æ¨¡æ€æ¡† -->
    <div id="tag-review-modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 600px;">
            <h3><i class="fas fa-tags"></i> æ ‡ç­¾å¤æ ¸ä¸ç®¡ç†</h3>
            <p style="margin-bottom: 20px; color: var(--text-light);">æ£€æŸ¥å¹¶ç®¡ç†å½“å‰é¡¹ç›®çš„æ ‡ç­¾ï¼Œç¡®ä¿åˆ†ç±»å‡†ç¡®</p>
            
            <div class="tag-review-container">
                <div class="tag-review-header">
                    <h4 id="tag-review-title">å½“å‰æ ‡ç­¾</h4>
                    <div class="tag-review-actions">
                        <button class="btn btn-secondary btn-sm" onclick="addNewTag()" style="padding: 5px 10px; font-size: 0.9rem;">
                            <i class="fas fa-plus"></i> æ–°å¢
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="saveTagReview()" style="padding: 5px 10px; font-size: 0.9rem;">
                            <i class="fas fa-save"></i> ä¿å­˜
                        </button>
                    </div>
                </div>
                
                <div id="current-tags-container">
                    <!-- å½“å‰æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="tag-input-container" style="display: flex; margin-top: 15px;">
                    <input type="text" id="new-tag-input" placeholder="è¾“å…¥æ–°æ ‡ç­¾..." style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px 0 0 4px;" onkeypress="if(event.key === 'Enter') addTagFromInput()">
                    <button onclick="addTagFromInput()" style="padding: 10px 15px; background-color: var(--accent-color); color: white; border: none; border-radius: 0 4px 4px 0; cursor: pointer;">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                
                <div style="margin-top: 25px;">
                    <h5 style="margin-bottom: 15px; color: var(--primary-color);">æ ‡ç­¾åˆ†ç±»å»ºè®®</h5>
                    
                    <div class="tag-category" style="margin-bottom: 20px;">
                        <div class="tag-category-title" style="font-weight: 600; color: var(--primary-color); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed var(--border-color);">æ ¸å¿ƒæ¨¡å‹æ ‡ç­¾</div>
                        <div class="category-tags" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ§  æ ¸å¿ƒæ¨¡å‹')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ§  æ ¸å¿ƒæ¨¡å‹</span>
                            <span class="category-tag" onclick="addSuggestedTag('ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§</span>
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ</span>
                        </div>
                    </div>
                    
                    <div class="tag-category" style="margin-bottom: 20px;">
                        <div class="tag-category-title" style="font-weight: 600; color: var(--primary-color); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed var(--border-color);">å…³ç³»ä¸æƒ…æ„Ÿæ ‡ç­¾</div>
                        <div class="category-tags" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ</span>
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ’” å¤±å»/å‘Šåˆ«')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ’” å¤±å»/å‘Šåˆ«</span>
                            <span class="category-tag" onclick="addSuggestedTag('âš–ï¸ æœŸæœ›/é”™ä½')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">âš–ï¸ æœŸæœ›/é”™ä½</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeTagReviewModal()">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="applyTagReview()">åº”ç”¨æ›´æ”¹</button>
            </div>
        </div>
    </div>

    <!-- åˆ†æ®µç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="section-edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 800px;">
            <h3><i class="fas fa-edit"></i> åˆ†æ®µç¼–è¾‘æ€è€ƒå†…å®¹</h3>
            <p style="margin-bottom: 20px; color: var(--text-light);">å¯å•ç‹¬ç¼–è¾‘å„ä¸ªæ¿å—å†…å®¹</p>
            
            <div class="editable-id" id="id-editor">
                <span class="editable-id-label">æ€è€ƒID:</span>
                <input type="text" id="edit-thought-id" class="editable-id-input" placeholder="#123">
                <button class="btn btn-secondary btn-sm" onclick="validateThoughtId()" style="padding: 5px 10px; font-size: 0.9rem;">
                    <i class="fas fa-check"></i> éªŒè¯ID
                </button>
            </div>
            
            <div class="section-editor-tabs" id="section-tabs">
                <!-- æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div id="section-editors-container">
                <!-- ç¼–è¾‘å™¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeSectionEditModal()">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="saveSectionEdits()">
                    <i class="fas fa-save"></i> ä¿å­˜æ‰€æœ‰æ›´æ”¹
                </button>
            </div>
        </div>
    </div>

    <!-- æ—¶é—´çº¿ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="timeline-edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 600px;">
            <h3><i class="fas fa-edit"></i> ç¼–è¾‘ç³»ç»Ÿæ¼”è¿›è®°å½•</h3>
            <p style="margin-bottom: 20px; color: var(--text-light);">ä¿®æ”¹ç³»ç»Ÿæ¼”è¿›å†ç¨‹çš„è¯¦ç»†ä¿¡æ¯</p>
            
            <div class="timeline-edit-form">
                <div class="timeline-form-group">
                    <label for="timeline-edit-version">ç‰ˆæœ¬å·</label>
                    <input type="text" id="timeline-edit-version" placeholder="ä¾‹å¦‚: v22.48">
                </div>
                
                <div class="timeline-form-group">
                    <label for="timeline-edit-date">æ—¥æœŸ</label>
                    <input type="text" id="timeline-edit-date" placeholder="ä¾‹å¦‚: 2024-07">
                </div>
                
                <div class="timeline-form-group">
                    <label for="timeline-edit-event">äº‹ä»¶æè¿°</label>
                    <textarea id="timeline-edit-event" placeholder="è¯¦ç»†æè¿°æ­¤ç‰ˆæœ¬çš„äº‹ä»¶..."></textarea>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeTimelineEditModal()">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="saveTimelineEdit()">
                    <i class="fas fa-save"></i> ä¿å­˜æ›´æ”¹
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== æ•°æ®ç»“æ„ä¸å­˜å‚¨ ====================
        const DataStore = {
            thoughts: [],
            models: [],
            tags: {},
            nextThoughtId: 124,
            nextModelId: 81,
            currentVersion: "v22.48",
            lastSaved: null,
            
            // æ ‡ç­¾åˆ†ç±»ç³»ç»Ÿ
            tagCategories: {
                "æ ¸å¿ƒæ¨¡å‹": ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§", "ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ", "âš™ï¸ å†³ç­–/è¡ŒåŠ¨", "ğŸ­ è’è¯/å¹½é»˜"],
                "å…³ç³»ä¸æƒ…æ„Ÿ": ["ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ", "ğŸ’” å¤±å»/å‘Šåˆ«", "âš–ï¸ æœŸæœ›/é”™ä½", "ğŸŒ± æˆé•¿/å†ç¨‹", "ğŸ˜¶ é“å¾·/ä¼¦ç†"],
                "æ—¶é—´ä¸å­˜åœ¨": ["â³ æ—¶é—´/å®¿å‘½", "â° è®°å¿†/é—å¿˜", "ğŸŒ å­˜åœ¨/æ„ŸçŸ¥", "ğŸŒ€ å¾ªç¯/é‡å¤", "ğŸš¶ å†ç¨‹/è·¯å¾„"],
                "è‰ºæœ¯ä¸è¡¨è¾¾": ["ğŸµ æ­Œæ›²åˆ†æ", "ğŸ­ æ–‡è‰ºæ‰¹è¯„", "ğŸ¨ è‰ºæœ¯/è±¡å¾", "ğŸ—£ï¸ è¯­è¨€/å™äº‹", "ğŸ“š æ–‡æœ¬åˆ†æ"],
                "ç¤¾ä¼šä¸ç³»ç»Ÿ": ["âš”ï¸ åæŠ—/è¾¹ç¼˜", "ğŸ”„ ç³»ç»Ÿ/ç»“æ„", "ğŸ›ï¸ åˆ¶åº¦/æƒåŠ›", "ğŸŒ ç½‘ç»œ/è¿æ¥", "âš–ï¸ ä¼¦ç†/è´£ä»»"],
                "ç‰¹æ®ŠçŠ¶æ€": ["ğŸ”¥ æç«¯ä½“éªŒ", "ğŸŒ€ è§£æ„/é‡æ„", "ğŸ¯ èšç„¦/ä¸“æ³¨", "ğŸ’¡ çµæ„Ÿ/æ´è§", "ğŸ›¡ï¸ é˜²å¾¡/ä¿æŠ¤"]
            },
            
            // æ¨¡å‹å…³è”ç½‘ç»œ
            modelConnections: {
                "M-80": ["M-74", "M-78", "M-69", "M-77", "M-67"],
                "M-79": ["M-77", "M-71", "M-67"],
                "M-78": ["M-74", "M-73", "M-77", "M-76"],
                "M-77": ["M-69", "M-71", "M-67", "M-76"],
                "M-76": ["M-60", "M-71", "M-62", "M-66", "M-74"],
                "M-75": ["M-73", "M-72", "M-94"],
                "M-74": ["M-69", "M-30", "M-66", "M-67"],
                "M-73": ["M-94", "M-70", "M-72", "M-68"]
            },
            
            // æ—¶é—´çº¿æ•°æ®
            timeline: [
                {id: "t1", version: "v1.0-v5.0", date: "2023-01", event: "åŸºç¡€æƒ…æ„Ÿæ¨¡å‹å»ºç«‹ï¼ˆå·¥å…·åŒ–ã€é”™ä½ã€é—æ†¾ï¼‰"},
                {id: "t2", version: "v6.0-v10.0", date: "2023-03", event: "å…³ç³»æ¨¡å‹æ·±åŒ–ï¼ˆæˆç†Ÿé¦ˆèµ ã€æ— é™åšå¼ˆï¼‰"},
                {id: "t3", version: "v11.0-v15.0", date: "2023-05", event: "å­˜åœ¨å“²å­¦æ‹“å±•ï¼ˆå­˜åœ¨å‹˜æ¢ã€æ°´æ€§æ™ºæ…§ï¼‰"},
                {id: "t4", version: "v16.0-v18.0", date: "2023-07", event: "é˜²å¾¡æœºåˆ¶ä¸ç—…ç†å­¦å®Œå–„ï¼ˆæ¢¦å¢ƒå¯„ç”Ÿã€æƒ…æ„Ÿéº»ç—¹ï¼‰"},
                {id: "t5", version: "v18.0-v20.2", date: "2023-09", event: "å…³ç³»åŠ¨åŠ›å­¦ã€å¥åº·å…±å»ºã€æ„ä¹‰æ•´åˆ"},
                {id: "t6", version: "v20.3-v21.3", date: "2023-11", event: "å®è§‚ç¤¾ä¼šæ‰¹åˆ¤ã€ä¸ªä½“ç”Ÿå­˜ç­–ç•¥ã€å“²å­¦æ¡†æ¶æ™®é€‚åŒ–"},
                {id: "t7", version: "v21.4-v22.0", date: "2024-01", event: "äº²å¯†å…³ç³»å…‰è°±ã€å­˜åœ¨æ€§å¯„ç”Ÿã€ç†µå¢æŸè€—ã€ç¥›é­…æ‚¬ç½®ã€å¶åƒå¹»ç­ã€åˆ›ä¼¤åé‡å»ºã€è™šæ— ç¾å­¦æ•´åˆ"},
                {id: "t8", version: "v22.1-v22.2", date: "2024-03", event: "åŒè½¨åˆ¶æ¶æ„å»ºç«‹ï¼Œæ–°å¢ M-45 è‡³ M-53 æ¨¡å‹"},
                {id: "t9", version: "v22.33", date: "2024-05", event: "ã€Šæˆ‘ä»¬å¾ˆå¥½ã€‹Ã—ã€Šå¿«ä¹æ˜ŸçŒ«ã€‹å…³ç³»è¯Šç–—æ•´åˆç‰ˆ"},
                {id: "t10", version: "v22.48", date: "2024-07", event: "ã€Šå¯„å±…ã€‹Ã—ã€ŠèŠ±ã€‹æ•´åˆç‰ˆï¼Œæ¨¡å‹æ€»æ•°è¾¾80ä¸ª"}
            ],
            
            // å®šä¹‰å…³é”®æ ‡é¢˜çš„å¤šç§å¯èƒ½å½¢å¼
            sectionTitles: {
                "çŠ¶æ€çœ‹æ¿": [
                    "ğŸ’ **çŠ¶æ€çœ‹æ¿**", "ğŸ’ çŠ¶æ€çœ‹æ¿", "çŠ¶æ€çœ‹æ¿:", "çŠ¶æ€çœ‹æ¿", "çŠ¶æ€", "çœ‹æ¿",
                    "ğŸ’¡ **çŠ¶æ€çœ‹æ¿**", "ğŸ“Š **çŠ¶æ€çœ‹æ¿**", "ğŸ“‹ **çŠ¶æ€çœ‹æ¿**", "ç³»ç»ŸçŠ¶æ€", "æ€è€ƒçŠ¶æ€"
                ],
                "æ ¸å¿ƒç»“è®º": [
                    "ğŸŒŒ **æ ¸å¿ƒç»“è®º**", "ğŸŒŒ æ ¸å¿ƒç»“è®º", "æ ¸å¿ƒç»“è®º:", "æ ¸å¿ƒç»“è®º", "ç»“è®º", "æ ¸å¿ƒè§‚ç‚¹",
                    "ğŸ¯ **æ ¸å¿ƒç»“è®º**", "âœ¨ **æ ¸å¿ƒç»“è®º**", "ğŸ’¡ **æ ¸å¿ƒç»“è®º**", "ä¸»è¦ç»“è®º", "æ ¸å¿ƒå‘ç°"
                ],
                "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ": [
                    "ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**", "ğŸ§© æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ", "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ:", "æ¨¡å‹å»¶ä¼¸", "æ¨¡å‹æ•´åˆ",
                    "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ", "æ¨¡å‹æ‰©å±•", "æ•´åˆæ¨¡å‹", "ğŸ”— **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**", "æ¨¡å‹å…³è”"
                ],
                "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹": [
                    "ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**", "ğŸ“š è¡ŒåŠ¨/æ€ç»´è¦ç‚¹", "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹:", "è¡ŒåŠ¨æ€ç»´è¦ç‚¹",
                    "è¡ŒåŠ¨è¦ç‚¹", "æ€ç»´è¦ç‚¹", "è¦ç‚¹", "è¡ŒåŠ¨å»ºè®®", "æ€ç»´å»ºè®®", "ğŸ¯ **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**"
                ],
                "æ¶æ„æ›´æ–°": [
                    "ğŸ“‚ **æ¶æ„æ›´æ–°**", "ğŸ“‚ æ¶æ„æ›´æ–°", "æ¶æ„æ›´æ–°:", "æ¶æ„æ›´æ–°", "ç³»ç»Ÿæ›´æ–°",
                    "æ›´æ–°æ—¥å¿—", "ç‰ˆæœ¬æ›´æ–°", "ğŸ“ˆ **æ¶æ„æ›´æ–°**", "ğŸ”„ **æ¶æ„æ›´æ–°**"
                ]
            },
            
            // å½“å‰æ­£åœ¨ç¼–è¾‘çš„æ—¶é—´çº¿é¡¹ç›®ID
            editingTimelineId: null,
            
            // åˆå§‹åŒ– - ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
            init: function() {
                console.log('ç”µè„‘ç«¯æ•°æ®å­˜å‚¨åˆå§‹åŒ–...');
                
                // æ£€æŸ¥ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨æ˜¯å¦å¯ç”¨
                if (typeof UnifiedDataManager !== 'undefined') {
                    try {
                        // ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨è·å–æ•°æ®
                        const fullData = UnifiedDataManager.getFullData();
                        
                        // åŠ è½½æ•°æ®åˆ°DataStore
                        this.thoughts = fullData.thoughts || [];
                        this.models = fullData.models || [];
                        this.tags = fullData.tags || {};
                        this.timeline = fullData.timeline || this.timeline;
                        this.modelConnections = fullData.modelConnections || this.modelConnections;
                        this.currentVersion = fullData.currentVersion || "v22.48";
                        this.lastSaved = fullData.lastSaved || new Date().toISOString();
                        this.nextThoughtId = fullData.nextThoughtId || 124;
                        this.nextModelId = fullData.nextModelId || 81;
                        
                        console.log('ä»ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨åŠ è½½æˆåŠŸ:', {
                            thoughts: this.thoughts.length,
                            models: this.models.length,
                            tags: Object.keys(this.tags).length
                        });
                        
                        // å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œæ·»åŠ ç¤ºä¾‹æ•°æ®
                        if (this.thoughts.length === 0 && this.models.length === 0) {
                            console.log('é¦–æ¬¡ä½¿ç”¨ï¼Œåˆ›å»ºç¤ºä¾‹æ•°æ®...');
                            this.addExampleData();
                            this.save();
                        }
                        
                    } catch (e) {
                        console.log('ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨', e);
                        this.loadFromLocalStorage();
                    }
                } else {
                    console.log('ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨æœªåŠ è½½ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨');
                    this.loadFromLocalStorage();
                }
                
                // è®¾ç½®æ•°æ®åŒæ­¥ç›‘å¬
                this.setupDataSyncListener();
                
                // æ›´æ–°UIç»Ÿè®¡
                this.updateUIStats();
                
                console.log('ç”µè„‘ç«¯æ•°æ®å­˜å‚¨åˆå§‹åŒ–å®Œæˆ');
            },
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
            loadFromLocalStorage: function() {
                const saved = localStorage.getItem('structuredThoughtAssistant');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.thoughts = data.thoughts || [];
                        this.models = data.models || [];
                        this.tags = data.tags || {};
                        this.nextThoughtId = data.nextThoughtId || 124;
                        this.nextModelId = data.nextModelId || 81;
                        this.currentVersion = data.currentVersion || "v22.48";
                        this.lastSaved = data.lastSaved || new Date().toISOString();
                        this.timeline = data.timeline || this.timeline;
                        this.modelConnections = data.modelConnections || this.modelConnections;
                        
                        console.log('ä»æœ¬åœ°å­˜å‚¨åŠ è½½æˆåŠŸ');
                    } catch (e) {
                        console.log('è§£æå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®', e);
                        this.addExampleData();
                    }
                } else {
                    this.addExampleData();
                }
            },
            
            // è®¾ç½®æ•°æ®åŒæ­¥ç›‘å¬
            setupDataSyncListener: function() {
                // ç›‘å¬storageäº‹ä»¶ï¼ˆæ¥è‡ªå…¶ä»–æ ‡ç­¾é¡µï¼‰
                window.addEventListener('storage', (e) => {
                    if (e.key === 'structuredThoughtAssistant' && e.newValue) {
                        console.log('æ£€æµ‹åˆ°æ•°æ®å˜åŒ–ï¼Œé‡æ–°åŠ è½½æ•°æ®...');
                        
                        // é‡æ–°åŠ è½½æ•°æ®
                        if (typeof UnifiedDataManager !== 'undefined') {
                            const fullData = UnifiedDataManager.getFullData();
                            this.thoughts = fullData.thoughts;
                            this.models = fullData.models;
                            this.tags = fullData.tags;
                            this.updateUIStats();
                            
                            // é‡æ–°æ¸²æŸ“å½“å‰è§†å›¾
                            if (UIManager && UIManager.currentView) {
                                UIManager.loadView(UIManager.currentView);
                            }
                        }
                    }
                });
                
                // ç›‘å¬è‡ªå®šä¹‰æ•°æ®æ›´æ–°äº‹ä»¶
                window.addEventListener('unified-data-updated', () => {
                    console.log('æ”¶åˆ°ç»Ÿä¸€æ•°æ®æ›´æ–°äº‹ä»¶');
                    
                    if (typeof UnifiedDataManager !== 'undefined') {
                        const fullData = UnifiedDataManager.getFullData();
                        this.thoughts = fullData.thoughts;
                        this.models = fullData.models;
                        this.tags = fullData.tags;
                        this.updateUIStats();
                        
                        // é‡æ–°æ¸²æŸ“å½“å‰è§†å›¾
                        if (UIManager && UIManager.currentView) {
                            UIManager.loadView(UIManager.currentView);
                        }
                    }
                });
            },
            
            // ä¿å­˜æ•°æ® - ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
            save: function() {
                console.log('ç”µè„‘ç«¯ä¿å­˜æ•°æ®...');
                
                if (typeof UnifiedDataManager !== 'undefined') {
                    // ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ä¿å­˜
                    const data = {
                        thoughts: this.thoughts,
                        models: this.models,
                        tags: this.tags,
                        timeline: this.timeline,
                        modelConnections: this.modelConnections,
                        currentVersion: this.currentVersion,
                        lastSaved: new Date().toISOString(),
                        nextThoughtId: this.nextThoughtId,
                        nextModelId: this.nextModelId
                    };
                    
                    const result = UnifiedDataManager.saveData(data);
                    
                    if (result.success) {
                        this.lastSaved = data.lastSaved;
                        console.log('é€šè¿‡ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ä¿å­˜æˆåŠŸ');
                        this.updateUIStats();
                        return true;
                    } else {
                        console.log('ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ä¿å­˜å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨');
                        return this.saveToLocalStorage();
                    }
                } else {
                    // å›é€€åˆ°æœ¬åœ°å­˜å‚¨
                    return this.saveToLocalStorage();
                }
            },
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
            saveToLocalStorage: function() {
                const data = {
                    thoughts: this.thoughts,
                    models: this.models,
                    tags: this.tags,
                    nextThoughtId: this.nextThoughtId,
                    nextModelId: this.nextModelId,
                    currentVersion: this.currentVersion,
                    lastSaved: new Date().toISOString(),
                    timeline: this.timeline,
                    modelConnections: this.modelConnections
                };
                
                try {
                    localStorage.setItem('structuredThoughtAssistant', JSON.stringify(data));
                    this.lastSaved = data.lastSaved;
                    console.log('é€šè¿‡æœ¬åœ°å­˜å‚¨ä¿å­˜æˆåŠŸ');
                    this.updateUIStats();
                    return true;
                } catch (e) {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥:', e);
                    return false;
                }
            },
            
            // æ·»åŠ ç¤ºä¾‹æ•°æ®
            addExampleData: function() {
                console.log('æ·»åŠ ç¤ºä¾‹æ•°æ®...');
                
                // æ·»åŠ ç¤ºä¾‹ç»“æ„åŒ–æ€è€ƒ
                const exampleThought = this.parseStructuredContent(`ğŸ’ **çŠ¶æ€çœ‹æ¿**  
**ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.48ï¼ˆã€Šå¯„å±…ã€‹Ã—ã€ŠèŠ±ã€‹æ•´åˆç‰ˆï¼‰  
**å½“å‰æ€è€ƒID**ï¼š#123  
**æ€è€ƒä¸»é¢˜**ï¼šã€Šå¯„å±…ã€‹ä¸ã€ŠèŠ±ã€‹â€”â€”ä¸¤ç§å…³ç³»å­˜åœ¨è®ºï¼š"äººé—´çƒŸç«"çš„ç°ä¸–å®ˆæŠ¤ vs "è¶…ç„¶å®¿å‘½"çš„å¾ªç¯å› æœ  
**æ€è€ƒç±»å‹**ï¼šğŸµ æ­Œæ›²åˆ†æï¼ˆå…³ç³»å“²å­¦ / æ—¶é—´æ€§æ¯”è¾ƒï¼‰  
**å…³é”®æ ‡è®°**ï¼šğŸ§  æ ¸å¿ƒæ¨¡å‹ã€ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿã€â³ æ—¶é—´/å®¿å‘½ã€ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§  
**å…³è”ç½‘ç»œ**ï¼šå¼ºå…³è”äº #116 M-74ï¼ˆçˆ±ä½œä¸ºå®‰å…¨åŸºåœ°çš„æˆé•¿ï¼‰ã€#121 M-78ï¼ˆäº²å¯†é¢„æœŸé”™ä½ï¼‰ã€#111 M-69ï¼ˆçˆ±çš„åœ¨åœºæ€§é‡æ„ï¼‰ã€#120 M-77ï¼ˆç»ˆå±€å¯¹è¯ï¼‰ã€#109 M-67ï¼ˆç†æƒ³é™è§£ä¸æ„ä¹‰é”šå®šï¼‰ã€‚æœ¬æ€è€ƒæ˜¯å¯¹ä¸¤ç§æ ¹æœ¬æ€§çš„å…³ç³»ä¸–ç•Œå›¾æ™¯ä¸æ—¶é—´æ€§ä½“éªŒçš„å¯¹æ¯”åˆ†æã€‚  

ğŸŒŒ **æ ¸å¿ƒç»“è®ºï¼šä¸¤ç§å…³ç³»å­˜åœ¨è®ºçš„å¯¹å³™â€”â€”ä»¥"è´£ä»»"ä¸ºè½´å¿ƒçš„çº¿æ€§å»ºé€  vs ä»¥"ç¼˜åŠ«"ä¸ºæ³•åˆ™çš„å¾ªç¯è®¤å‘½**  
ã€Šå¯„å±…ã€‹ä¸ã€ŠèŠ±ã€‹å‘ˆç°äº†çˆ±æƒ…ï¼ˆä¹ƒè‡³æ·±å±‚å…³ç³»ï¼‰ä¸­ä¸¤ç§å‡ ä¹æ— æ³•é€šçº¦çš„"å­˜åœ¨è®º"ï¼šä¸€ç§å°†å…³ç³»è§†ä¸ºåœ¨**çº¿æ€§æ—¶é—´**ä¸­é€šè¿‡**ä¸»åŠ¨æ‹…è´£ä¸å…±åŒè¡ŒåŠ¨**æ¥å»ºé€ çš„"äººé—´å ¡å’"ï¼›å¦ä¸€ç§å°†å…³ç³»è§†ä¸ºåœ¨**å¾ªç¯æ—¶é—´**ä¸­è¢«**å®¿å‘½æ³•åˆ™ï¼ˆç¼˜/åŠ«ï¼‰** æ‰€è§„å®šçš„"çµé­‚ç”Ÿæ€"ã€‚  
1.  **ã€Šå¯„å±…ã€‹ï¼šå…³ç³»ä½œä¸º"ç°ä¸–çš„å»ºé€ "**  
    *   **æ—¶é—´æ€§**ï¼š**çº¿æ€§ã€å‰è¿›çš„**ã€‚å…³ç³»æœ‰æ˜ç¡®çš„èµ·ç‚¹ï¼ˆ"è¢«ä½ ä¿®è¡¥"ï¼‰ã€æŒç»­çš„ç°åœ¨ï¼ˆ"ä¸€å¤©å¤©ç»ƒä¹ "ï¼‰ã€ä»¥åŠæœ‰å¾…å…±åŒåˆ›é€ çš„æœªæ¥ï¼ˆ"åˆ¶é€ å£®ä¸¾"ï¼‰ã€‚è¿‡å»çš„ä¸å¿«å¯ä»¥"åŒ–å…¥é£é‡Œ"ï¼Œæœªæ¥å¯ä»¥"æœªæ€•å…´è¡°"ã€‚  
    *   **æ ¸å¿ƒåŠ¨ä½œ**ï¼š**"åº‡æŠ¤"ä¸"ç»ƒä¹ "**ã€‚"è¯·è¿›å…¥æˆ‘åŒçœ¼é‡Œå¯„å±…"æ˜¯å°†è‡ªæˆ‘è½¬åŒ–ä¸ºä»–è€…çš„å®‰å…¨å®¹å™¨ï¼›"è¶Šçˆ±è¶Šå¤©çœŸ"æ˜¯é€šè¿‡æ—¥å¤ä¸€æ—¥çš„ç»ƒä¹ æ¥ç»´ç³»å…³ç³»çŠ¶æ€ã€‚çˆ±æ˜¯**ä¸»åŠ¨é€‰æ‹©çš„æ‹…å­**ï¼ˆ"æˆ‘çš„å¹¸è¿äº‹å«è´£ä»»"ï¼‰ã€‚  
    *   **ä¸–ç•Œå›¾æ™¯**ï¼šä¸–ç•Œæ˜¯å¯èƒ½å¸¦æ¥"æ•™è®­"çš„å´å²–ä¹‹åœ°ï¼Œä½†**äºŒäººç»„æˆçš„"æˆ‘ä»¬"å¯ä»¥åœ¨æ­¤å»ºé€ ä¸€ä¸ªå±€éƒ¨ç¨³å®šçš„"ä¹å›­"**ï¼ˆ"é’æ˜¥çš„ä¹å›­"ï¼‰ï¼Œä»¥å¯¹æŠ—å¤–éƒ¨çš„"æœ«æ—¥"ä¸"ç–²å€¦"ã€‚å…³ç³»æ˜¯**å¯¹æŠ—ä¸–ç•Œç†µå¢çš„å±€éƒ¨é€†æµ**ã€‚  
2.  **ã€ŠèŠ±ã€‹ï¼šå…³ç³»ä½œä¸º"å®¿å‘½çš„æ˜¾ç°"**  
    *   **æ—¶é—´æ€§**ï¼š**å¾ªç¯ã€è½®å›çš„**ã€‚æ—¶é—´å¦‚èŠ±å¼€èŠ±è½ã€çµé­‚åˆ†åˆï¼Œæ˜¯"ç¿çƒ‚â€”æ•£è½â€”æ¯èâ€”å†ç”Ÿ"çš„æ— å°½å¾ªç¯ã€‚ä»Šç”Ÿåªæ˜¯å…¶ä¸­ä¸€ç¯ï¼ˆ"ä»Šä¸–å­½å€ºè½¬ç”Ÿå†ç»­ç¼˜"ï¼‰ã€‚å…³ç³»æ˜¯**æ—¶é—´å¾ªç¯ä¸­çš„ä¸€ä¸ªç›¸ä½**ã€‚  
    *   **æ ¸å¿ƒåŠ¨ä½œ**ï¼š**"è®¤"ä¸"æ¸¡"**ã€‚è®¤å‡ºå…³ç³»æ˜¯"å‘½é‡Œçº·çº·æ‰°æ‰°çš„æŒ‡å¼•"ï¼Œæ¥å—"ç¼˜èšæ•£"çš„å®šæ•°ã€‚ä¸ªä½“åŠ¨ä½œæ˜¯"çµé­‚æ¸¡è¿‡æ—¶åœ°æ•£èšææµ…"ï¼Œæ˜¯æ¼‚æµ®è€Œéå»ºé€ ã€‚çˆ±æ˜¯**è¢«åŠ¨æ‰¿æ¥çš„"å€º"æˆ–"ç¼˜"**ã€‚  
    *   **ä¸–ç•Œå›¾æ™¯**ï¼šä¸–ç•Œæ˜¯ä¸€ä¸ªå·¨å¤§çš„ã€æ— æ³•é€ƒè„±çš„**ç”Ÿæ€æ³•åˆ™ç³»ç»Ÿ**ï¼ˆ"æµ®åä¸–ç•Œä»é€ƒä¸å‡ºé‚£ç”Ÿæ€"ï¼‰ã€‚å…³ç³»ï¼ˆèŠ±ï¼‰çš„ç»½æ”¾ä¸æ¯ç«­ï¼Œæ˜¯è¿™å¥—è‡ªç„¶æ³•åˆ™çš„ä½“ç°ã€‚ä¸ªäººæ„å¿—æ¸ºå°ï¼Œ**å…³ç³»æ˜¯æ³•åˆ™çš„ä¾‹è¯ï¼Œè€Œéå¯¹æŠ—æ³•åˆ™çš„ä¾‹å¤–**ã€‚  
3.  **æ ¹æœ¬å¯¹å³™**ï¼šè¿™æ˜¯ **"äººä¹‰è®º"å…³ç³»è§‚** ä¸ **"ç¥ä¹‰è®º"ï¼ˆæˆ–"è‡ªç„¶æ³•åˆ™è®º"ï¼‰å…³ç³»è§‚** çš„è¯—æ„è¡¨è¾¾ã€‚å‰è€…ç›¸ä¿¡äººçš„è´£ä»»ä¸è¡ŒåŠ¨èƒ½èµ‹äºˆå…³ç³»ä»¥æ„ä¹‰å’ŒæŒä¹…ï¼›åè€…ç›¸ä¿¡å…³ç³»çš„æ„ä¹‰ä¸æœŸé™æ—©å·²è¢«æ›´å¤§çš„å®‡å®™æ³•åˆ™æ‰€è§„å®šï¼Œäººçš„è§’è‰²æ˜¯ä½“è®¤ä¸æ¥å—ã€‚  

ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**  
**1. "å…³ç³»å­˜åœ¨è®º"äºŒå…ƒæ¨¡å‹ (M-80 æ–°å»º)**  
*   **å®šä¹‰**ï¼šæè¿°ä¸ªä½“åœ¨æ·±åº¦å…³ç³»ä¸­æ‰€ç§‰æŒçš„ã€å…³äºå…³ç³»ä¹‹æœ¬è´¨ã€æ—¶é—´æ€§ä¸èƒ½åŠ¨æ€§çš„æ ¹æœ¬é¢„è®¾æ¡†æ¶ã€‚ä¸»è¦åˆ†ä¸ºä¸¤ç§ç†æƒ³ç±»å‹ï¼š  
    1.  **å»ºé€ è€…æ¨¡å¼**ï¼šè®¤ä¸ºå…³ç³»æœ¬è´¨ä¸Šæ˜¯**åœ¨æ—¶é—´ä¸­é€šè¿‡åŒæ–¹æŒç»­åŠªåŠ›æ„å»ºçš„å®ä½“**ã€‚æ—¶é—´çº¿æ€§ï¼Œæœªæ¥å¼€æ”¾ï¼Œæ ¸å¿ƒèƒ½åŠ¨æ€§æ˜¯**è´£ä»»ã€åº‡æŠ¤ä¸å…±åŒåˆ›é€ **ã€‚æ„ä¹‰æºäºå»ºé€ è¿‡ç¨‹æœ¬èº«ã€‚  
    2.  **ä½“è®¤è€…æ¨¡å¼**ï¼šè®¤ä¸ºå…³ç³»æœ¬è´¨ä¸Šæ˜¯**åœ¨æ›´å¤§çš„å®‡å®™æˆ–å‘½è¿æ³•åˆ™ä¸‹æ˜¾ç°çš„é˜¶æ®µæ€§çŠ¶æ€**ã€‚æ—¶é—´å¾ªç¯ï¼Œå‰§æœ¬æ—¢å®šï¼Œæ ¸å¿ƒèƒ½åŠ¨æ€§æ˜¯**æ¥å—ã€ä½“è®¤ä¸æ¸¡è¿‡**ã€‚æ„ä¹‰æºäºå¯¹æ³•åˆ™çš„é¢†æ‚Ÿä¸è‡£æœã€‚  

ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹ï¼ˆå®¡è§†ä½ çš„å…³ç³»å­˜åœ¨è®ºï¼‰**  
1.  ã€**å­˜åœ¨è®ºè‡ªæ£€**ã€‘ä½ ç›¸ä¿¡å…³ç³»æ˜¯"å»ºé€ "çš„è¿˜æ˜¯"è®¤å‘½"çš„ï¼Ÿ  

ğŸ“‚ **æ¶æ„æ›´æ–°**  
*   **æ–°å¢æ ¸å¿ƒæ¨¡å‹**ï¼š**M-80 "å…³ç³»å­˜åœ¨è®º"äºŒå…ƒæ¨¡å‹** (äº #123 å»ºç«‹)ã€‚  
*   **ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.47 â†’ **v22.48**ã€‚`);
                
                exampleThought.id = "#123";
                exampleThought.date = new Date().toISOString().split('T')[0];
                this.thoughts.push(exampleThought);
                
                // æ·»åŠ ç¤ºä¾‹æ¨¡å‹
                this.addModel({
                    id: "M-80",
                    name: "å…³ç³»å­˜åœ¨è®ºæ¨¡å‹",
                    description: "æè¿°ä¸ªä½“åœ¨æ·±åº¦å…³ç³»ä¸­æ‰€ç§‰æŒçš„ã€å…³äºå…³ç³»ä¹‹æœ¬è´¨ã€æ—¶é—´æ€§ä¸èƒ½åŠ¨æ€§çš„æ ¹æœ¬é¢„è®¾æ¡†æ¶ã€‚ä¸»è¦åˆ†ä¸ºä¸¤ç§ç†æƒ³ç±»å‹ï¼šå»ºé€ è€…æ¨¡å¼ä¸ä½“è®¤è€…æ¨¡å¼ã€‚",
                    date: new Date().toISOString().split('T')[0],
                    tags: ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ", "ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§", "â³ æ—¶é—´/å®¿å‘½"],
                    fromThought: "#123",
                    relatedModels: ["M-74", "M-78", "M-69", "M-77", "M-67"],
                    usageCount: 12,
                    lastUsed: "2025-07-20"
                });
                
                // æ·»åŠ æ›´å¤šç¤ºä¾‹æ¨¡å‹
                this.addModel({
                    id: "M-79",
                    name: "è¯ é‡Šä¼¦ç†æ¨¡å‹",
                    description: "è‡ªæˆ‘ä¸­å¿ƒæŠ•å°„ vs ä»–è€…å¯¼å‘å…±æƒ…ï¼Œæè¿°åœ¨è§£è¯»ä»–äººè¡Œä¸ºæ—¶çš„ä¼¦ç†ç«‹åœºå·®å¼‚",
                    date: "2025-07-19",
                    tags: ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "âš–ï¸ ä¼¦ç†/è´£ä»»", "ğŸ¨ è‰ºæœ¯/è±¡å¾", "ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§"],
                    fromThought: "#122",
                    relatedModels: ["M-77", "M-71", "M-67"],
                    usageCount: 8,
                    lastUsed: "2025-07-19"
                });
                
                this.addModel({
                    id: "M-78",
                    name: "äº²å¯†é¢„æœŸé”™ä½æ¨¡å‹",
                    description: "èåˆæ¸´æœ› vs è·ç¦»ä¿å…¨ï¼Œæè¿°äº²å¯†å…³ç³»ä¸­åŒæ–¹å¯¹è·ç¦»å’Œèåˆåº¦æœŸå¾…çš„å·®å¼‚",
                    date: "2025-07-18",
                    tags: ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ", "âš–ï¸ æœŸæœ›/é”™ä½", "ğŸŒ± æˆé•¿/å†ç¨‹"],
                    fromThought: "#121",
                    relatedModels: ["M-74", "M-73", "M-77", "M-76"],
                    usageCount: 15,
                    lastUsed: "2025-07-18"
                });
                
                // æ·»åŠ æ›´å¤šç¤ºä¾‹æ€è€ƒ
                const exampleThought2 = this.parseStructuredContent(`ğŸ’ **çŠ¶æ€çœ‹æ¿**  
**ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.33  
**å½“å‰æ€è€ƒID**ï¼š#108  
**æ€è€ƒä¸»é¢˜**ï¼šã€Šæˆ‘ä»¬å¾ˆå¥½ã€‹ä¸ã€Šå¿«ä¹æ˜ŸçŒ«ã€‹â€”â€”ä¼¤å£é•œå…ä¸æ´»æ€§æ²»æ„ˆæœ¯å…³ç³»åŠ¨åŠ›å­¦  
**æ€è€ƒç±»å‹**ï¼šğŸµ æ­Œæ›²åˆ†æï¼ˆå…³ç³»ä¿®å¤ / æƒ…æ„Ÿæ²»ç–—ï¼‰  
**å…³é”®æ ‡è®°**ï¼šğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿã€ğŸŒ± æˆé•¿/å†ç¨‹ã€ğŸ’¡ çµæ„Ÿ/æ´è§ã€ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ  

ğŸŒŒ **æ ¸å¿ƒç»“è®ºï¼šæ´»æ€§æ²»æ„ˆæœ¯æ¨¡å‹â€”â€”ä»é™æ€"æ²»ç–—"åˆ°åŠ¨æ€"å…±åŒå‚ä¸"çš„å…³ç³»ä¿®å¤**  
ã€Šæˆ‘ä»¬å¾ˆå¥½ã€‹ä¸ã€Šå¿«ä¹æ˜ŸçŒ«ã€‹æ­ç¤ºäº†å…³ç³»ä¿®å¤çš„ä¸¤ç§è·¯å¾„ï¼šä¸€ç§æ˜¯é€šè¿‡"æˆ‘ä»¬å¾ˆå¥½"çš„å®£è¨€æ€§è¡¨æ¼”ç»´æŒå…³ç³»è¡¨è±¡ï¼›å¦ä¸€ç§æ˜¯é€šè¿‡"å¿«ä¹æ˜ŸçŒ«"å¼çš„æ´»æ€§äº’åŠ¨ï¼Œåœ¨å…³ç³»ä¸­åˆ›é€ æ–°çš„æ„ä¹‰ç©ºé—´ã€‚  

ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**  
**1. æ´»æ€§æ²»æ„ˆæœ¯æ¨¡å‹ (M-66 æ–°å»º)**  
*   **å®šä¹‰**ï¼šä¸€ç§åŠ¨æ€ã€å‚ä¸å¼çš„å…³ç³»ä¿®å¤æ¡†æ¶ï¼Œå¼ºè°ƒåŒæ–¹åœ¨ä¿®å¤è¿‡ç¨‹ä¸­çš„å…±åŒå‚ä¸å’Œæ„ä¹‰å…±åˆ›ã€‚  

ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**  
1.  ã€**æ´»æ€§ä¿®å¤**ã€‘å°è¯•å°†å…³ç³»é—®é¢˜è½¬åŒ–ä¸ºåŒæ–¹å¯ä»¥å…±åŒå‚ä¸çš„"é¡¹ç›®"ï¼Œè€Œééœ€è¦å•æ–¹é¢è§£å†³çš„"é—®é¢˜"ã€‚  

ğŸ“‚ **æ¶æ„æ›´æ–°**  
*   **æ–°å¢æ ¸å¿ƒæ¨¡å‹**ï¼š**M-66 "æ´»æ€§æ²»æ„ˆæœ¯æ¨¡å‹"** (äº #108 å»ºç«‹)ã€‚  
*   **ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.32 â†’ **v22.33**ã€‚`);
                
                exampleThought2.id = "#108";
                exampleThought2.date = "2025-07-15";
                this.thoughts.push(exampleThought2);
                
                console.log('ç¤ºä¾‹æ•°æ®æ·»åŠ å®Œæˆ');
            },
            
            // ==================== å…¶ä»–æ–¹æ³•ä¿æŒä¸å˜ ====================
            // è§£æç»“æ„åŒ–å†…å®¹
            parseStructuredContent: function(text) {
                const thought = {
                    id: null,
                    title: null,
                    type: null,
                    date: new Date().toISOString().split('T')[0],
                    tags: [],
                    sections: {},
                    related: [],
                    newModels: [],
                    systemVersion: this.currentVersion
                };
                
                // è§£æçŠ¶æ€çœ‹æ¿éƒ¨åˆ†
                const statusSection = this.extractSectionByTitles(text, "çŠ¶æ€çœ‹æ¿");
                if (statusSection) {
                    thought.sections["çŠ¶æ€çœ‹æ¿"] = statusSection.content;
                    
                    // ä»çŠ¶æ€çœ‹æ¿ä¸­æå–å…ƒæ•°æ®
                    this.extractMetadataFromStatus(thought, statusSection.content);
                }
                
                // è§£ææ ¸å¿ƒç»“è®ºéƒ¨åˆ†
                const conclusionSection = this.extractSectionByTitles(text, "æ ¸å¿ƒç»“è®º");
                if (conclusionSection) {
                    thought.sections["æ ¸å¿ƒç»“è®º"] = conclusionSection.content;
                }
                
                // è§£ææ¨¡å‹å»¶ä¼¸ä¸æ•´åˆéƒ¨åˆ†
                const modelSection = this.extractSectionByTitles(text, "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ");
                if (modelSection) {
                    thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"] = modelSection.content;
                    
                    // æå–æ–°å»ºæ¨¡å‹ (M-æ•°å­—)
                    const newModelMatches = modelSection.content.match(/M-\d+\s*(æ–°å»º)?/g);
                    if (newModelMatches) {
                        thought.newModels = newModelMatches.map(m => m.replace(/\s*\(?æ–°å»º\)?/, '').trim());
                    }
                    
                    // æå–æ‰€æœ‰æ¨¡å‹ID (åŒ…æ‹¬å·²å­˜åœ¨çš„)
                    const allModelMatches = modelSection.content.match(/M-\d+/g);
                    if (allModelMatches) {
                        const uniqueModels = [...new Set(allModelMatches)];
                        thought.modelReferences = uniqueModels;
                    }
                }
                
                // è§£æè¡ŒåŠ¨/æ€ç»´è¦ç‚¹éƒ¨åˆ†
                const actionSection = this.extractSectionByTitles(text, "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹");
                if (actionSection) {
                    thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"] = actionSection.content;
                }
                
                // è§£ææ¶æ„æ›´æ–°éƒ¨åˆ†
                const updateSection = this.extractSectionByTitles(text, "æ¶æ„æ›´æ–°");
                if (updateSection) {
                    thought.sections["æ¶æ„æ›´æ–°"] = updateSection.content;
                }
                
                // å¦‚æœæ²¡æœ‰æå–åˆ°IDï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª
                if (!thought.id) {
                    thought.id = `#${this.nextThoughtId}`;
                    this.nextThoughtId++;
                }
                
                // å¦‚æœæ²¡æœ‰æå–åˆ°æ ‡é¢˜ï¼Œä½¿ç”¨å‰50ä¸ªå­—ç¬¦ä½œä¸ºæ ‡é¢˜
                if (!thought.title) {
                    const lines = text.split('\n');
                    const firstLine = lines.find(line => line.trim().length > 0);
                    if (firstLine) {
                        thought.title = firstLine.substring(0, 50).replace(/^\s*[#*\-â€¢]+\s*/, '');
                        if (firstLine.length > 50) thought.title += '...';
                    } else {
                        thought.title = `æ€è€ƒè®°å½• ${thought.id}`;
                    }
                }
                
                return thought;
            },
            
            // æ ¹æ®å¤šä¸ªå¯èƒ½çš„æ ‡é¢˜æå–éƒ¨åˆ†å†…å®¹
            extractSectionByTitles: function(text, sectionName) {
                const titles = this.sectionTitles[sectionName];
                if (!titles || titles.length === 0) return null;
                
                for (const title of titles) {
                    const cleanTitle = title.replace(/\*/g, '\\*').replace(/\//g, '\\/');
                    const regex = new RegExp(`\\s*${cleanTitle}\\s*[:ï¼š]?\\s*\\n([\\s\\S]*?)(?=\\n\\s*(?:${Object.keys(this.sectionTitles).filter(k => k !== sectionName).map(k => this.sectionTitles[k].map(t => t.replace(/\*/g, '\\*').replace(/\//g, '\\/')).join('|')).join('|')}|ğŸ’¡|$))`, 'i');
                    
                    const match = text.match(regex);
                    if (match && match[1]) {
                        return {
                            title: title,
                            content: match[1].trim()
                        };
                    }
                }
                
                return null;
            },
            
            // ä»çŠ¶æ€çœ‹æ¿ä¸­æå–å…ƒæ•°æ®
            extractMetadataFromStatus: function(thought, statusText) {
                // æå–ç³»ç»Ÿç‰ˆæœ¬
                const versionMatch = statusText.match(/ç³»ç»Ÿç‰ˆæœ¬[ï¼š:]\s*(.+)/);
                if (versionMatch) thought.systemVersion = versionMatch[1].trim();
                
                // æå–æ€è€ƒID
                const idMatch = statusText.match(/å½“å‰æ€è€ƒID[ï¼š:]\s*(#\d+)/);
                if (idMatch) thought.id = idMatch[1].trim();
                
                // æå–æ€è€ƒä¸»é¢˜
                const titleMatch = statusText.match(/æ€è€ƒä¸»é¢˜[ï¼š:]\s*(.+)/);
                if (titleMatch) thought.title = titleMatch[1].trim();
                
                // æå–æ€è€ƒç±»å‹
                const typeMatch = statusText.match(/æ€è€ƒç±»å‹[ï¼š:]\s*(.+)/);
                if (typeMatch) thought.type = typeMatch[1].trim();
                
                // æå–å…³é”®æ ‡è®°
                const tagsMatch = statusText.match(/å…³é”®æ ‡è®°[ï¼š:]\s*(.+)/);
                if (tagsMatch) {
                    const tagsText = tagsMatch[1];
                    thought.tags = tagsText.split(/[ã€ï¼Œ,\s]+/).filter(tag => tag.trim()).map(tag => tag.trim());
                }
                
                // æå–å…³è”ç½‘ç»œ
                const relatedMatch = statusText.match(/å…³è”ç½‘ç»œ[ï¼š:]\s*(.+)/);
                if (relatedMatch) {
                    const relatedText = relatedMatch[1];
                    const relatedIds = relatedText.match(/(#\d+|M-\d+)/g);
                    if (relatedIds) thought.related = relatedIds;
                }
            },
            
            // ==================== æ•°æ®æ“ä½œ ====================
            addStructuredThought: function(text) {
                const thought = this.parseStructuredContent(text);
                
                // æ£€æŸ¥IDæ˜¯å¦å·²å­˜åœ¨
                const existingIndex = this.thoughts.findIndex(t => t.id === thought.id);
                if (existingIndex >= 0) {
                    this.thoughts[existingIndex] = thought;
                } else {
                    this.thoughts.unshift(thought);
                }
                
                // æ›´æ–°æ ‡ç­¾
                if (thought.tags && Array.isArray(thought.tags)) {
                    thought.tags.forEach(tag => {
                        this.tags[tag] = (this.tags[tag] || 0) + 1;
                    });
                }
                
                // æ·»åŠ æ–°å»ºçš„æ¨¡å‹
                if (thought.newModels && thought.newModels.length > 0) {
                    thought.newModels.forEach(modelId => {
                        const existingModel = this.models.find(m => m.id === modelId);
                        if (!existingModel) {
                            const newModel = {
                                id: modelId,
                                name: `æ–°å»ºæ¨¡å‹ ${modelId}`,
                                description: `ç”±æ€è€ƒ ${thought.id} åˆ›å»ºçš„æ–°æ¨¡å‹`,
                                date: new Date().toISOString().split('T')[0],
                                tags: thought.tags || [],
                                fromThought: thought.id,
                                relatedModels: thought.modelReferences ? thought.modelReferences.filter(id => id !== modelId) : []
                            };
                            
                            this.models.unshift(newModel);
                        }
                    });
                }
                
                // ä¿å­˜æ•°æ®
                this.save();
                this.updateUIStats();
                
                return thought;
            },
            
            addModel: function(modelData) {
                if (!modelData.id) {
                    modelData.id = `M-${this.nextModelId}`;
                    this.nextModelId++;
                }
                
                this.models.unshift(modelData);
                
                if (modelData.tags && Array.isArray(modelData.tags)) {
                    modelData.tags.forEach(tag => {
                        this.tags[tag] = (this.tags[tag] || 0) + 1;
                    });
                }
                
                this.save();
                this.updateUIStats();
                
                return modelData;
            },
            
            getThoughtById: function(id) {
                return this.thoughts.find(t => t.id === id);
            },
            
            getModelById: function(id) {
                return this.models.find(m => m.id === id);
            },
            
            getRecentThoughts: function(limit = 5) {
                return this.thoughts.slice(0, limit);
            },
            
            getRecentModels: function(limit = 5) {
                return this.models.slice(0, limit);
            },
            
            getTopTags: function(limit = 15) {
                return Object.entries(this.tags)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, limit)
                    .map(([tag, count]) => ({ tag, count }));
            },
            
            updateThought: function(id, updatedThought) {
                const index = this.thoughts.findIndex(t => t.id === id);
                if (index === -1) return false;
                
                this.thoughts[index] = updatedThought;
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            updateModel: function(id, updatedModel) {
                const index = this.models.findIndex(m => m.id === id);
                if (index === -1) return false;
                
                this.models[index] = updatedModel;
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            deleteThought: function(id) {
                const index = this.thoughts.findIndex(t => t.id === id);
                if (index === -1) return false;
                
                this.thoughts.splice(index, 1);
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            deleteModel: function(id) {
                const index = this.models.findIndex(m => m.id === id);
                if (index === -1) return false;
                
                this.models.splice(index, 1);
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            recalculateTags: function() {
                this.tags = {};
                
                this.thoughts.forEach(thought => {
                    if (thought.tags && Array.isArray(thought.tags)) {
                        thought.tags.forEach(tag => {
                            this.tags[tag] = (this.tags[tag] || 0) + 1;
                        });
                    }
                });
                
                this.models.forEach(model => {
                    if (model.tags && Array.isArray(model.tags)) {
                        model.tags.forEach(tag => {
                            this.tags[tag] = (this.tags[tag] || 0) + 1;
                        });
                    }
                });
            },
            
            updateUIStats: function() {
                document.getElementById('total-thoughts').textContent = this.thoughts.length;
                document.getElementById('total-models').textContent = this.models.length;
                document.getElementById('total-tags').textContent = Object.keys(this.tags).length;
                document.getElementById('current-version').textContent = this.currentVersion;
                
                if (this.lastSaved) {
                    const savedTime = new Date(this.lastSaved);
                    const now = new Date();
                    const diffMinutes = Math.floor((now - savedTime) / (1000 * 60));
                    
                    let timeText = "åˆšåˆš";
                    if (diffMinutes >= 60) {
                        const diffHours = Math.floor(diffMinutes / 60);
                        timeText = `${diffHours}å°æ—¶å‰`;
                    } else if (diffMinutes > 0) {
                        timeText = `${diffMinutes}åˆ†é’Ÿå‰`;
                    }
                    
                    document.getElementById('last-saved').textContent = timeText;
                }
                
                const totalModels = this.models.length;
                const connectedModels = Object.keys(this.modelConnections).length;
                const connectionRate = totalModels > 0 ? Math.round((connectedModels / totalModels) * 100) : 0;
                document.getElementById('network-health').textContent = connectionRate >= 50 ? "å®Œå¥½" : "å¾…å®Œå–„";
            },
            
            getTagSuggestions: function(existingTags = []) {
                const suggestions = [];
                
                for (const category in this.tagCategories) {
                    this.tagCategories[category].forEach(tag => {
                        if (!existingTags.includes(tag)) {
                            suggestions.push(tag);
                        }
                    });
                }
                
                return suggestions.sort((a, b) => {
                    const countA = this.tags[a] || 0;
                    const countB = this.tags[b] || 0;
                    return countB - countA;
                }).slice(0, 10);
            },
            
            // ==================== æ—¶é—´çº¿ç¼–è¾‘åŠŸèƒ½ ====================
            getTimelineById: function(id) {
                return this.timeline.find(item => item.id === id);
            },
            
            updateTimelineItem: function(id, updatedItem) {
                const index = this.timeline.findIndex(item => item.id === id);
                if (index === -1) return false;
                
                this.timeline[index] = updatedItem;
                this.save();
                return true;
            },
            
            addTimelineItem: function(item) {
                const newId = `t${Date.now()}`;
                item.id = newId;
                this.timeline.unshift(item);
                this.save();
                return item;
            },
            
            deleteTimelineItem: function(id) {
                const index = this.timeline.findIndex(item => item.id === id);
                if (index === -1) return false;
                
                this.timeline.splice(index, 1);
                this.save();
                return true;
            },
            
            // ==================== åˆ†æ®µç¼–è¾‘åŠŸèƒ½ ====================
            openSectionEditor: function(thoughtId) {
                const thought = this.getThoughtById(thoughtId);
                if (!thought) return null;
                
                this.editingThoughtId = thoughtId;
                
                this.sectionEdits = {
                    "çŠ¶æ€çœ‹æ¿": thought.sections && thought.sections["çŠ¶æ€çœ‹æ¿"] ? thought.sections["çŠ¶æ€çœ‹æ¿"] : "",
                    "æ ¸å¿ƒç»“è®º": thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"] ? thought.sections["æ ¸å¿ƒç»“è®º"] : "",
                    "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ": thought.sections && thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"] ? thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"] : "",
                    "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹": thought.sections && thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"] ? thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"] : "",
                    "æ¶æ„æ›´æ–°": thought.sections && thought.sections["æ¶æ„æ›´æ–°"] ? thought.sections["æ¶æ„æ›´æ–°"] : ""
                };
                
                return thought;
            },
            
            saveSectionEdits: function(newId = null) {
                if (!this.editingThoughtId) return false;
                
                const thought = this.getThoughtById(this.editingThoughtId);
                if (!thought) return false;
                
                if (newId && newId !== this.editingThoughtId) {
                    const existingThought = this.getThoughtById(newId);
                    if (existingThought && existingThought.id !== this.editingThoughtId) {
                        return { success: false, message: `ID "${newId}" å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ID` };
                    }
                    
                    thought.id = newId;
                    
                    this.models.forEach(model => {
                        if (model.fromThought === this.editingThoughtId) {
                            model.fromThought = newId;
                        }
                    });
                    
                    this.thoughts.forEach(t => {
                        if (t.related && t.related.includes(this.editingThoughtId)) {
                            t.related = t.related.map(r => r === this.editingThoughtId ? newId : r);
                        }
                    });
                }
                
                Object.keys(this.sectionEdits).forEach(section => {
                    if (thought.sections) {
                        thought.sections[section] = this.sectionEdits[section];
                    } else {
                        thought.sections = { [section]: this.sectionEdits[section] };
                    }
                });
                
                if (this.sectionEdits["çŠ¶æ€çœ‹æ¿"]) {
                    this.extractMetadataFromStatus(thought, this.sectionEdits["çŠ¶æ€çœ‹æ¿"]);
                }
                
                const success = this.updateThought(this.editingThoughtId, thought);
                
                if (newId && newId !== this.editingThoughtId) {
                    this.editingThoughtId = newId;
                }
                
                return { success, thought };
            },
            
            // ==================== æ•°æ®å¯¼å‡ºåŠŸèƒ½ ====================
            exportAllData: function() {
                const data = {
                    thoughts: this.thoughts,
                    models: this.models,
                    tags: this.tags,
                    currentVersion: this.currentVersion,
                    lastSaved: this.lastSaved,
                    modelConnections: this.modelConnections,
                    timeline: this.timeline,
                    exportDate: new Date().toISOString()
                };
                
                return JSON.stringify(data, null, 2);
            },
            
            exportCurrentItem: function(type, id) {
                let item = null;
                let itemType = '';
                
                if (type === 'thought') {
                    item = this.getThoughtById(id);
                    itemType = 'æ€è€ƒè®°å½•';
                } else if (type === 'model') {
                    item = this.getModelById(id);
                    itemType = 'æ€ç»´æ¨¡å‹';
                }
                
                if (!item) return null;
                
                const data = {
                    itemType: itemType,
                    item: item,
                    systemVersion: this.currentVersion,
                    exportDate: new Date().toISOString()
                };
                
                return JSON.stringify(data, null, 2);
            },
            
            backupData: function() {
                const backupKey = 'structuredThoughtAssistant_backup_' + new Date().toISOString().split('T')[0];
                const data = this.exportAllData();
                
                try {
                    localStorage.setItem(backupKey, data);
                    return { success: true, key: backupKey };
                } catch (e) {
                    console.error('å¤‡ä»½æ•°æ®å¤±è´¥:', e);
                    return { success: false, error: e };
                }
            },
            
            importData: function(jsonData) {
                try {
                    const data = JSON.parse(jsonData);
                    
                    if (!data.thoughts || !data.models) {
                        throw new Error('æ•°æ®æ ¼å¼é”™è¯¯ï¼šç¼ºå°‘å¿…è¦å­—æ®µ');
                    }
                    
                    this.thoughts = data.thoughts;
                    this.models = data.models;
                    this.tags = data.tags || {};
                    this.currentVersion = data.currentVersion || this.currentVersion;
                    this.modelConnections = data.modelConnections || this.modelConnections;
                    this.timeline = data.timeline || this.timeline;
                    
                    this.save();
                    this.updateUIStats();
                    
                    return { success: true, message: 'æ•°æ®å¯¼å…¥æˆåŠŸ' };
                } catch (e) {
                    console.error('å¯¼å…¥æ•°æ®å¤±è´¥:', e);
                    return { success: false, error: e.message };
                }
            },
            
            getModelNetwork: function(modelId) {
                const model = this.getModelById(modelId);
                if (!model) return null;
                
                const connections = this.modelConnections[modelId] || [];
                const connectedModels = connections.map(id => this.getModelById(id)).filter(m => m);
                
                return {
                    center: model,
                    connections: connectedModels
                };
            }
        };
        
        // ==================== UIç®¡ç†å™¨ ====================
        const UIManager = {
            currentView: 'overview',
            itemToDelete: null,
            deleteType: null,
            tagReviewItem: null,
            tagReviewType: null,
            currentTagsForReview: [],
            currentModelId: "M-80",
            currentSectionTab: "çŠ¶æ€çœ‹æ¿",
            currentEditingModelId: null,
            currentRelatedModels: [],
            currentTimelineItem: null,
            
            init: function() {
                // åˆå§‹åŒ–ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
                if (typeof UnifiedDataManager !== 'undefined') {
                    UnifiedDataManager.init();
                }
                
                // åˆå§‹åŒ–æ•°æ®å­˜å‚¨
                DataStore.init();
                
                // è®¾ç½®å¯¼èˆªç‚¹å‡»äº‹ä»¶
                this.setupNavigation();
                
                // åŠ è½½åˆå§‹è§†å›¾
                this.loadView('overview');
                
                // éšè—åŠ è½½åŠ¨ç”»
                setTimeout(() => {
                    const loadingElement = document.getElementById('loading');
                    if (loadingElement) loadingElement.style.display = 'none';
                }, 300);
                
                // è®¾ç½®æœç´¢åŠŸèƒ½
                this.setupSearch();
                
                // è®¾ç½®ç‰ˆæœ¬é€‰æ‹©å™¨
                this.setupVersionSelector();
                
                // è®¾ç½®æ•°æ®æ“ä½œæŒ‰é’®
                this.setupDataActions();
                
                // é»˜è®¤æ›´æ–°å…³è”ç½‘ç»œ
                this.updateNetworkGraph();
                
                console.log('ç”µè„‘ç«¯UIåˆå§‹åŒ–å®Œæˆ');
            },
            
            setupNavigation: function() {
                document.querySelectorAll('.nav-links a').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        document.querySelectorAll('.nav-links a').forEach(nav => {
                            nav.classList.remove('active');
                        });
                        
                        item.classList.add('active');
                        
                        const view = item.getAttribute('data-view');
                        this.loadView(view);
                    });
                });
            },
            
            setupSearch: function() {
                const searchInput = document.getElementById('search-input');
                if (searchInput) {
                    searchInput.addEventListener('input', () => {
                        this.performSearch(searchInput.value);
                    });
                }
            },
            
            setupVersionSelector: function() {
                const versionSelect = document.getElementById('version-select');
                if (versionSelect) {
                    versionSelect.addEventListener('change', function() {
                        const version = this.value;
                        if (version === 'current') {
                            DataStore.init();
                            UIManager.loadView(UIManager.currentView);
                        } else if (version === 'initial') {
                            // é‡æ–°åŠ è½½é¡µé¢ä»¥æ¢å¤åˆå§‹æ•°æ®
                            if (confirm('ç¡®å®šè¦åŠ è½½åˆå§‹ç‰ˆæœ¬æ•°æ®å—ï¼Ÿå½“å‰æ•°æ®å°†è¢«è¦†ç›–ã€‚')) {
                                location.reload();
                            }
                        }
                    });
                }
            },
            
            setupDataActions: function() {
                // å¯¼å‡ºå½“å‰é¡¹ç›®
                document.getElementById('export-current-btn').addEventListener('click', () => {
                    this.exportCurrentItem();
                });
                
                // å¤‡ä»½å…¨éƒ¨æ•°æ®
                document.getElementById('backup-data-btn').addEventListener('click', () => {
                    this.backupAllData();
                });
                
                // å¯¼å…¥æ•°æ®
                document.getElementById('import-data-btn').addEventListener('click', () => {
                    this.importData();
                });
                
                // å¯¼å‡ºå…¨éƒ¨æ•°æ®
                document.getElementById('export-all-btn').addEventListener('click', () => {
                    this.exportAllData();
                });
            },
            
            updateNetworkGraph: function(modelId = null) {
                const targetModelId = modelId || this.currentModelId;
                const network = DataStore.getModelNetwork(targetModelId);
                const networkGraph = document.getElementById('network-graph');
                
                if (!network || network.connections.length === 0) {
                    networkGraph.innerHTML = `
                        <div>
                            <i class="fas fa-project-diagram" style="font-size: 3rem; margin-bottom: 10px; color: #ccc;"></i>
                            <p>é€‰æ‹©æ¨¡å‹æŸ¥çœ‹å…³è”ç½‘ç»œ</p>
                        </div>
                    `;
                    return;
                }
                
                let html = `
                    <div style="text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color); margin-bottom: 15px;">
                            ${network.center.id}
                        </div>
                        <div class="network-visualization">
                `;
                
                network.connections.forEach((model, index) => {
                    if (index > 0) {
                        html += `<div class="network-connection"></div>`;
                    }
                    html += `
                        <div class="network-node" onclick="UIManager.selectItem('${model.id}', 'model')">
                            ${model.id}
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <p style="margin-top: 20px; color: var(--text-light); font-size: 0.9rem;">
                            ä¸ ${network.connections.length} ä¸ªæ ¸å¿ƒæ¨¡å‹å…³è”
                        </p>
                    </div>
                `;
                
                networkGraph.innerHTML = html;
            },
            
            loadView: function(view) {
                this.currentView = view;
                
                const viewNames = {
                    overview: "æ ¸å¿ƒèµ„äº§æ€»è§ˆ",
                    "add-structured": "ç»“æ„åŒ–è¾“å…¥æ€è€ƒ",
                    thoughts: "æ€è€ƒç›®å½•å®Œæ•´æ¸…å•",
                    models: "æ ¸å¿ƒæ€ç»´æ¨¡å‹ç´¢å¼•",
                    "add-model": "åˆ›å»ºæ€ç»´æ¨¡å‹",
                    keywords: "æ ‡ç­¾åˆ†ç±»æ£€ç´¢",
                    "how-to-use": "å¦‚ä½•ä½¿ç”¨æœ¬ç³»ç»Ÿ",
                    milestones: "ç³»ç»Ÿæ¼”è¿›é‡Œç¨‹ç¢‘",
                    architecture: "ç³»ç»Ÿæ¶æ„ç‰¹æ€§",
                    "tag-review": "æ ‡ç­¾å¤æ ¸ä¸­å¿ƒ",
                    "network-analysis": "æ¨¡å‹å…³è”ç½‘ç»œåˆ†æ",
                    "timeline": "ç³»ç»Ÿæ¼”è¿›å†ç¨‹",
                    "data-management": "æ•°æ®ç®¡ç†ä¸å¤‡ä»½"
                };
                
                document.getElementById('current-view').textContent = viewNames[view] || view;
                
                const contentArea = document.getElementById('content-area');
                contentArea.innerHTML = '<div id="loading" class="loading" style="margin: 100px auto;"></div>';
                
                setTimeout(() => {
                    switch(view) {
                        case 'overview':
                            this.renderOverview();
                            break;
                        case 'add-structured':
                            this.renderAddStructured();
                            break;
                        case 'thoughts':
                            this.renderThoughts();
                            break;
                        case 'models':
                            this.renderModels();
                            break;
                        case 'add-model':
                            this.renderAddModel();
                            break;
                        case 'keywords':
                            this.renderKeywords();
                            break;
                        case 'how-to-use':
                            this.renderHowToUse();
                            break;
                        case 'milestones':
                            this.renderMilestones();
                            break;
                        case 'architecture':
                            this.renderArchitecture();
                            break;
                        case 'tag-review':
                            this.renderTagReview();
                            break;
                        case 'network-analysis':
                            this.renderNetworkAnalysis();
                            break;
                        case 'timeline':
                            this.renderTimeline();
                            break;
                        case 'data-management':
                            this.renderDataManagement();
                            break;
                        default:
                            this.renderOverview();
                    }
                }, 100);
            },
            
            // ==================== è§†å›¾æ¸²æŸ“æ–¹æ³• ====================
            renderOverview: function() {
                const html = `
                    <div class="content-header">
                        <h2>æ ¸å¿ƒèµ„äº§æ€»è§ˆ</h2>
                        <p>ç³»ç»Ÿç‰ˆæœ¬: ${DataStore.currentVersion} | æœ¬åœ°å­˜å‚¨æ•°æ®çŠ¶æ€</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3><i class="fas fa-brain"></i> æ€è€ƒè®°å½•æ€»æ•°</h3>
                            <div class="stat-value">${DataStore.thoughts.length}</div>
                            <div class="stat-desc">å®Œæ•´ç»“æ„åŒ–æ€è€ƒæ¡ç›®</div>
                        </div>
                        
                        <div class="stat-card">
                            <h3><i class="fas fa-cubes"></i> æ ¸å¿ƒæ€ç»´æ¨¡å‹</h3>
                            <div class="stat-value">${DataStore.models.length}</div>
                            <div class="stat-desc">å¯è¿ç§»çš„åˆ†ææ¡†æ¶</div>
                        </div>
                        
                        <div class="stat-card">
                            <h3><i class="fas fa-tags"></i> æ ‡ç­¾å…³é”®è¯</h3>
                            <div class="stat-value">${Object.keys(DataStore.tags).length}</div>
                            <div class="stat-desc">è·¨ä¸»é¢˜åˆ†ç±»æ ‡ç­¾</div>
                        </div>
                        
                        <div class="stat-card">
                            <h3><i class="fas fa-heartbeat"></i> ç³»ç»Ÿå¥åº·åº¦</h3>
                            <div class="stat-value">100%</div>
                            <div class="stat-desc">æ¶æ„é«˜åº¦è‡ªæ´½ï¼ŒåŠŸèƒ½å®Œæ•´</div>
                        </div>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ç³»ç»Ÿæ¶æ„ç‰¹æ€§</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p><strong>æ•°æ®ä¸€è‡´æ€§ï¼š</strong>ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ï¼Œç¡®ä¿ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯æ•°æ®å®Œå…¨ä¸€è‡´</p>
                            <p><strong>å¼€æ”¾ç½‘ç»œï¼š</strong>æ¨¡å‹å¯æ— é™æ‹“å±•ï¼Œä¸»é¢˜ä¸å—é™</p>
                            <p><strong>å¤šå±‚ç»“æ„ï¼š</strong>"æ ¸å¿ƒæ¨¡å‹å±‚"ã€"ç°è±¡åˆ†æå±‚"ã€"å®è·µå·¥å…·ç®±"ä¸‰å±‚ååŒè¿ä½œ</p>
                            <p><strong>æ™ºèƒ½è§£æï¼š</strong>æ”¯æŒçµæ´»æ ¼å¼çš„ç»“æ„åŒ–å†…å®¹è§£æï¼Œè‡ªåŠ¨æå–å…³é”®ä¿¡æ¯</p>
                            <p><strong>æœ¬åœ°å­˜å‚¨ï¼š</strong>æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œç¡®ä¿éšç§å®‰å…¨</p>
                            <p><strong>å®æ—¶åŒæ­¥ï¼š</strong>ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯æ•°æ®è‡ªåŠ¨åŒæ­¥</p>
                            <p><strong>å®Œæ•´åŠŸèƒ½ï¼š</strong>å…·å¤‡å¢åˆ æ”¹æŸ¥ã€æ ‡ç­¾å¤æ ¸ã€æœç´¢è¿‡æ»¤ç­‰å®Œæ•´ç®¡ç†åŠŸèƒ½</p>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderAddStructured: function() {
                const html = `
                    <div class="content-header">
                        <h2>ç»“æ„åŒ–è¾“å…¥æ€è€ƒå†…å®¹</h2>
                        <p>æŒ‰ç…§çµæ´»æ ¼å¼è¾“å…¥ï¼Œç³»ç»Ÿå°†æ™ºèƒ½è§£æå¹¶å½’ç±»</p>
                    </div>
                    
                    <div class="format-hint">
                        <i class="fas fa-lightbulb"></i> <strong>æ ¼å¼è¯´æ˜ï¼š</strong> ç³»ç»Ÿä¼šæ™ºèƒ½è¯†åˆ«ä»¥ä¸‹å…³é”®éƒ¨åˆ†ï¼Œä¸è¦æ±‚æ ¼å¼å®Œå…¨ä¸€è‡´ï¼š
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            <div><strong>çŠ¶æ€çœ‹æ¿</strong> - æè¿°æ€è€ƒçš„åŸºæœ¬ä¿¡æ¯</div>
                            <div><strong>æ ¸å¿ƒç»“è®º</strong> - ä¸»è¦è§‚ç‚¹å’Œå‘ç°</div>
                            <div><strong>æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ</strong> - æ¨¡å‹æ‰©å±•å’Œå…³è”</div>
                            <div><strong>è¡ŒåŠ¨/æ€ç»´è¦ç‚¹</strong> - è¡ŒåŠ¨å»ºè®®å’Œæ€è€ƒè¦ç‚¹</div>
                            <div><strong>æ¶æ„æ›´æ–°</strong> - ç³»ç»Ÿæˆ–æ¨¡å‹çš„æ›´æ–°</div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h3>è¾“å…¥æ€è€ƒå†…å®¹</h3>
                        <textarea id="structured-input" placeholder="è¯·è¾“å…¥æ‚¨çš„æ€è€ƒå†…å®¹ï¼Œç³»ç»Ÿä¼šæ™ºèƒ½è¯†åˆ«å„ä¸ªéƒ¨åˆ†..."></textarea>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="parseAndPreview()">
                                <i class="fas fa-search"></i> è§£æé¢„è§ˆ
                            </button>
                            <button class="btn btn-success" onclick="saveStructuredThought()">
                                <i class="fas fa-save"></i> ä¿å­˜æ€è€ƒ
                            </button>
                        </div>
                        <div id="parse-preview" class="parse-preview">
                            <!-- è§£æé¢„è§ˆå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="index-panel">
                        <h4><i class="fas fa-history"></i> æœ€è¿‘æ·»åŠ çš„æ€è€ƒè®°å½•</h4>
                        <div id="recent-thoughts-list">
                            ${this.renderThoughtList(DataStore.getRecentThoughts(3), true)}
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderThoughts: function() {
                const thoughts = DataStore.thoughts;
                
                let thoughtsHTML = '';
                thoughts.forEach(thought => {
                    const summary = thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"] ? 
                        thought.sections["æ ¸å¿ƒç»“è®º"].substring(0, 80) + '...' : 
                        (thought.content ? thought.content.substring(0, 80) + '...' : '');
                    
                    thoughtsHTML += `
                        <div class="record-card" onclick="showThoughtDetail('${thought.id}')">
                            <div class="card-actions">
                                <div class="action-icon edit" onclick="event.stopPropagation(); editThought('${thought.id}')" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-icon delete" onclick="event.stopPropagation(); openDeleteModal('thought', '${thought.id}')" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                            <div class="record-id">${thought.id}</div>
                            <div class="record-title">${thought.title || 'æ— æ ‡é¢˜'}</div>
                            <div class="record-desc">${summary}</div>
                            <div class="record-tags">
                                ${thought.tags ? thought.tags.map(tag => `<span class="tag">${tag}</span>`).join('') : ''}
                            </div>
                        </div>
                    `;
                });
                
                const html = `
                    <div class="content-header">
                        <h2>æ€è€ƒç›®å½•å®Œæ•´æ¸…å•</h2>
                        <p>ç³»ç»Ÿç‰ˆæœ¬: ${DataStore.currentVersion} | å…± ${DataStore.thoughts.length} æ¡æ€è€ƒè®°å½•</p>
                    </div>
                    
                    <div class="records-list">
                        ${thoughtsHTML || '<div class="empty-state"><i class="fas fa-inbox"></i><p>æš‚æ— æ€è€ƒè®°å½•</p></div>'}
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderModels: function() {
                const models = DataStore.models;
                
                let modelsHTML = '';
                models.forEach(model => {
                    const summary = model.description ? 
                        model.description.substring(0, 80) + '...' : '';
                    
                    modelsHTML += `
                        <div class="model-card" onclick="showModelDetail('${model.id}')">
                            <div class="card-actions">
                                <div class="action-icon edit" onclick="event.stopPropagation(); editModel('${model.id}')" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-icon delete" onclick="event.stopPropagation(); openDeleteModal('model', '${model.id}')" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                            <div class="model-id">${model.id}</div>
                            <div class="model-name">${model.name}</div>
                            <div class="model-desc">${summary}</div>
                            <div class="model-tags">
                                ${model.tags ? model.tags.map(tag => `<span class="tag">${tag}</span>`).join('') : ''}
                            </div>
                            ${model.fromThought ? `<div style="margin-top: 10px; font-size: 0.85rem; color: var(--accent-color);">æ¥æº: ${model.fromThought}</div>` : ''}
                        </div>
                    `;
                });
                
                const html = `
                    <div class="content-header">
                        <h2>æ ¸å¿ƒæ€ç»´æ¨¡å‹ç´¢å¼•</h2>
                        <p>ç³»ç»Ÿç‰ˆæœ¬: ${DataStore.currentVersion} | å…± ${DataStore.models.length} ä¸ªæ€ç»´æ¨¡å‹</p>
                    </div>
                    
                    <div class="models-list">
                        ${modelsHTML || '<div class="empty-state"><i class="fas fa-cube"></i><p>æš‚æ— æ€ç»´æ¨¡å‹</p></div>'}
                    </div>
                    
                    <div class="system-status-card" style="margin-top: 30px;">
                        <h3><i class="fas fa-project-diagram"></i> æ¨¡å‹å…³è”ç½‘ç»œçŠ¶æ€</h3>
                        <p>å½“å‰å…±æœ‰ ${Object.keys(DataStore.modelConnections).length} ä¸ªæ¨¡å‹å»ºç«‹äº†å…³è”ç½‘ç»œ</p>
                        <p>å…³è”å¯†åº¦: ${DataStore.models.length > 0 ? Math.round((Object.keys(DataStore.modelConnections).length / DataStore.models.length) * 100) : 0}%</p>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderAddModel: function() {
                const html = `
                    <div class="content-header">
                        <h2>åˆ›å»ºæ€ç»´æ¨¡å‹</h2>
                        <p>æ·»åŠ æ–°çš„æ ¸å¿ƒæ€ç»´æ¨¡å‹åˆ°ç³»ç»Ÿä¸­</p>
                    </div>
                    
                    <div class="input-section">
                        <h3><i class="fas fa-plus-circle"></i> æ–°å¢æ€ç»´æ¨¡å‹</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¨¡å‹ID (å¯é€‰)</label>
                            <input type="text" id="model-id" placeholder="ä¾‹å¦‚: M-81 (ç•™ç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆ)">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¨¡å‹åç§°</label>
                            <input type="text" id="model-name" placeholder="è¾“å…¥æ¨¡å‹åç§°" style="width: 100%; padding: 10px;">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¥æºæ€è€ƒID (å¯é€‰)</label>
                            <input type="text" id="model-from-thought" placeholder="ä¾‹å¦‚: #123" style="width: 100%; padding: 10px;">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¨¡å‹æè¿°</label>
                            <textarea id="model-description" placeholder="è¯¦ç»†æè¿°æ­¤æ€ç»´æ¨¡å‹..." style="width: 100%; padding: 10px; min-height: 200px;"></textarea>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="saveModel()">
                                <i class="fas fa-save"></i> ä¿å­˜æ¨¡å‹
                            </button>
                            <button class="btn btn-secondary" onclick="UIManager.loadView('models')">
                                <i class="fas fa-list"></i> æŸ¥çœ‹æ‰€æœ‰æ¨¡å‹
                            </button>
                        </div>
                    </div>
                    
                    <div class="index-panel">
                        <h4><i class="fas fa-history"></i> æœ€è¿‘æ·»åŠ çš„æ€ç»´æ¨¡å‹</h4>
                        <div id="recent-models-list">
                            ${this.renderModelList(DataStore.getRecentModels(3), true)}
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderKeywords: function() {
                const topTags = DataStore.getTopTags(20);
                
                let tagsHTML = '';
                topTags.forEach(tagInfo => {
                    const size = Math.min(24, 14 + Math.log(tagInfo.count + 1) * 4);
                    tagsHTML += `
                        <span class="tag" style="font-size: ${size}px; padding: 6px 12px; cursor: pointer;" 
                              onclick="UIManager.searchByTag('${tagInfo.tag}')">
                            ${tagInfo.tag} <span style="font-size: 0.8em; opacity: 0.7;">(${tagInfo.count})</span>
                        </span>
                    `;
                });
                
                const categories = DataStore.tagCategories;
                let categoriesHTML = '';
                for (const category in categories) {
                    categoriesHTML += `
                        <div class="tag-category" style="margin-bottom: 25px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                            <div class="tag-category-title" style="font-weight: 600; color: var(--primary-color); margin-bottom: 15px; font-size: 1.1rem;">
                                ${category}
                            </div>
                            <div class="category-tags" style="display: flex; flex-wrap: wrap; gap: 10px;">
                                ${categories[category].map(tag => `
                                    <span class="tag" style="cursor: pointer;" onclick="UIManager.searchByTag('${tag}')">
                                        ${tag}
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
                
                const html = `
                    <div class="content-header">
                        <h2>æ ‡ç­¾åˆ†ç±»æ£€ç´¢</h2>
                        <p>æŒ‰æ ‡ç­¾æµè§ˆç³»ç»Ÿä¸­çš„æ€è€ƒè®°å½•å’Œæ€ç»´æ¨¡å‹</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ ‡ç­¾çƒ­åº¦äº‘</div>
                            </div>
                            <div class="detail-id">å…± ${Object.keys(DataStore.tags).length} ä¸ªæ ‡ç­¾</div>
                        </div>
                        <div class="detail-content">
                            <div class="tag-cloud" style="margin-bottom: 30px; padding: 20px; text-align: center;">
                                ${tagsHTML || '<p>æš‚æ— æ ‡ç­¾æ•°æ®</p>'}
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ ‡ç­¾åˆ†ç±»ä½“ç³»</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            ${categoriesHTML}
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æœç´¢ç‰¹å®šæ ‡ç­¾</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                                <input type="text" id="tag-search-input" placeholder="è¾“å…¥æ ‡ç­¾åç§°..." style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px;">
                                <button class="btn btn-primary" onclick="UIManager.searchByTag(document.getElementById('tag-search-input').value)" style="padding: 10px 20px;">
                                    <i class="fas fa-search"></i> æœç´¢
                                </button>
                            </div>
                            <div id="tag-search-results">
                                <!-- æœç´¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderHowToUse: function() {
                const html = `
                    <div class="content-header">
                        <h2>å¦‚ä½•ä½¿ç”¨æœ¬ç³»ç»Ÿ</h2>
                        <p>æ€ç»´ååŒå¤„ç†å™¨ä½¿ç”¨æŒ‡å—</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ ¸å¿ƒåŠŸèƒ½æ¦‚è¿°</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p><strong>æ€ç»´ååŒå¤„ç†å™¨</strong>æ˜¯ä¸€ä¸ªå¸®åŠ©æ‚¨ç»“æ„åŒ–æ€è€ƒã€æ•´ç†æ€ç»´æ¨¡å‹ã€å»ºç«‹çŸ¥è¯†å…³è”çš„å·¥å…·ç³»ç»Ÿã€‚å®ƒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š</p>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ“ ç»“æ„åŒ–è¾“å…¥æ€è€ƒ</h4>
                                <p>æŒ‰ç…§"çŠ¶æ€çœ‹æ¿ â†’ æ ¸å¿ƒç»“è®º â†’ æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ â†’ è¡ŒåŠ¨/æ€ç»´è¦ç‚¹ â†’ æ¶æ„æ›´æ–°"çš„çµæ´»æ ¼å¼è®°å½•æ€è€ƒè¿‡ç¨‹ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨è§£æå„ä¸ªéƒ¨åˆ†å¹¶æå–å…³é”®ä¿¡æ¯ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ§  æ€ç»´æ¨¡å‹ç®¡ç†</h4>
                                <p>ä»æ€è€ƒä¸­æå–å¯å¤ç”¨çš„åˆ†ææ¡†æ¶ï¼Œå»ºç«‹æ¨¡å‹å…³è”ç½‘ç»œï¼Œå½¢æˆå¯è¿ç§»çš„æ€ç»´å·¥å…·åº“ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ·ï¸ æ ‡ç­¾åˆ†ç±»æ£€ç´¢</h4>
                                <p>é€šè¿‡æ ‡ç­¾ç³»ç»Ÿå¯¹æ€è€ƒå’Œæ¨¡å‹è¿›è¡Œåˆ†ç±»ï¼Œæ”¯æŒæŒ‰ä¸»é¢˜ã€æƒ…ç»ªã€é¢†åŸŸç­‰ç»´åº¦è¿›è¡Œå¿«é€Ÿæ£€ç´¢ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ”„ æ¨¡å‹å…³è”ç½‘ç»œ</h4>
                                <p>å¯è§†åŒ–å±•ç¤ºæ¨¡å‹ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œå¸®åŠ©ç†è§£çŸ¥è¯†ç»“æ„ï¼Œå‘ç°æ–°çš„å…³è”æ¨¡å¼ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ“Š æ•°æ®ç®¡ç†ä¸å¤‡ä»½</h4>
                                <p>æ”¯æŒæ•°æ®å¯¼å‡ºã€å¯¼å…¥å’Œå¤‡ä»½ï¼Œç¡®ä¿æ‚¨çš„æ€è€ƒæ•°æ®å®‰å…¨å¯é ã€‚</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ä½¿ç”¨æµç¨‹</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <ol style="padding-left: 20px; line-height: 1.8;">
                                <li><strong>è¯†åˆ«æƒ…å¢ƒ</strong>ï¼šæ˜ç¡®å½“å‰é¢ä¸´çš„æƒ…ç»ªçŠ¶æ€æˆ–é—®é¢˜æƒ…å¢ƒ</li>
                                <li><strong>ç»“æ„åŒ–è®°å½•</strong>ï¼šåœ¨"ç»“æ„åŒ–è¾“å…¥æ€è€ƒ"é¡µé¢è®°å½•æ€è€ƒè¿‡ç¨‹</li>
                                <li><strong>æå–æ¨¡å‹</strong>ï¼šä»æ€è€ƒä¸­æå–å¯å¤ç”¨çš„æ€ç»´æ¨¡å‹</li>
                                <li><strong>å»ºç«‹å…³è”</strong>ï¼šå°†æ–°æ¨¡å‹ä¸å·²æœ‰æ¨¡å‹å»ºç«‹å…³è”</li>
                                <li><strong>æ ‡ç­¾å½’ç±»</strong>ï¼šä¸ºæ€è€ƒå’Œæ¨¡å‹æ·»åŠ åˆé€‚çš„æ ‡ç­¾</li>
                                <li><strong>å®šæœŸå›é¡¾</strong>ï¼šé€šè¿‡æ ‡ç­¾ç³»ç»Ÿå›é¡¾ç›¸å…³ä¸»é¢˜çš„æ€è€ƒ</li>
                                <li><strong>è¿ç§»åº”ç”¨</strong>ï¼šå°†æ¨¡å‹åº”ç”¨åˆ°æ–°çš„æƒ…å¢ƒä¸­</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ ¼å¼ç¤ºä¾‹</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div class="format-examples">
                                <div class="format-example">
                                    <div class="format-example-title">åŸºæœ¬æ ¼å¼</div>
                                    <pre>ğŸ’ **çŠ¶æ€çœ‹æ¿**
        **ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.48
        **å½“å‰æ€è€ƒID**ï¼š#123
        **æ€è€ƒä¸»é¢˜**ï¼šæ€è€ƒçš„ä¸»é¢˜
        **æ€è€ƒç±»å‹**ï¼šğŸµ æ­Œæ›²åˆ†æ
        
        ğŸŒŒ **æ ¸å¿ƒç»“è®º**
        è¿™é‡Œæ˜¯æ ¸å¿ƒè§‚ç‚¹...
        
        ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**
        è¿™é‡Œæ˜¯æ¨¡å‹æ‰©å±•...
        
        ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**
        1. ã€è¦ç‚¹ä¸€ã€‘
        2. ã€è¦ç‚¹äºŒã€‘
        
        ğŸ“‚ **æ¶æ„æ›´æ–°**
        * æ–°å¢æ ¸å¿ƒæ¨¡å‹ï¼šM-80</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
            renderMilestones: function() {
                const html = `
                    <div class="content-header">
                        <h2>ç³»ç»Ÿæ¼”è¿›é‡Œç¨‹ç¢‘</h2>
                        <p>æ€ç»´ååŒå¤„ç†å™¨çš„é‡è¦å‘å±•èŠ‚ç‚¹</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ç‰ˆæœ¬æ¼”è¿›å†ç¨‹</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p>ç³»ç»Ÿä»æœ€åˆçš„ä¸ªäººæ€è€ƒå·¥å…·ï¼Œé€æ¸å‘å±•æˆä¸ºåŠŸèƒ½å®Œæ•´çš„æ€ç»´ååŒå¤„ç†å™¨ï¼š</p>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸš€ åŸºç¡€é˜¶æ®µ (v1.0 - v5.0)</h4>
                                <p>å»ºç«‹åŸºç¡€æƒ…æ„Ÿæ¨¡å‹ï¼ŒåŒ…æ‹¬å·¥å…·åŒ–ã€é”™ä½ã€é—æ†¾ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚å¼€å§‹å°è¯•å°†æ—¥å¸¸æ€è€ƒç»“æ„åŒ–ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ’¡ æ·±åŒ–é˜¶æ®µ (v6.0 - v10.0)</h4>
                                <p>æ·±åŒ–å…³ç³»æ¨¡å‹ï¼Œå¼•å…¥æˆç†Ÿé¦ˆèµ ã€æ— é™åšå¼ˆç­‰æ¦‚å¿µã€‚å¼€å§‹å½¢æˆæ¨¡å‹åŒ–æ€ç»´ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸŒŒ æ‹“å±•é˜¶æ®µ (v11.0 - v15.0)</h4>
                                <p>æ‹“å±•å­˜åœ¨å“²å­¦ï¼Œå‘å±•å­˜åœ¨å‹˜æ¢ã€æ°´æ€§æ™ºæ…§ç­‰æ¨¡å‹ã€‚å¼€å§‹å»ºç«‹ç³»ç»ŸåŒ–çš„çŸ¥è¯†ç»“æ„ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ›¡ï¸ å®Œå–„é˜¶æ®µ (v16.0 - v18.0)</h4>
                                <p>å®Œå–„é˜²å¾¡æœºåˆ¶ä¸ç—…ç†å­¦æ¨¡å‹ï¼ŒåŒ…æ‹¬æ¢¦å¢ƒå¯„ç”Ÿã€æƒ…æ„Ÿéº»ç—¹ç­‰ã€‚å¼€å§‹å…³æ³¨å¿ƒç†å¥åº·ç»´åº¦ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ¤ æ•´åˆé˜¶æ®µ (v18.0 - v20.2)</h4>
                                <p>æ•´åˆå…³ç³»åŠ¨åŠ›å­¦ã€å¥åº·å…±å»ºã€æ„ä¹‰æ•´åˆç­‰æ¨¡å‹ã€‚å¼€å§‹å½¢æˆå®Œæ•´çš„ç³»ç»Ÿæ¶æ„ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸŒ å®è§‚é˜¶æ®µ (v20.3 - v21.3)</h4>
                                <p>å‘å±•å®è§‚ç¤¾ä¼šæ‰¹åˆ¤ã€ä¸ªä½“ç”Ÿå­˜ç­–ç•¥ã€å“²å­¦æ¡†æ¶æ™®é€‚åŒ–ã€‚å¼€å§‹å°†ä¸ªäººæ¨¡å‹æ‹“å±•åˆ°æ›´å¹¿æ³›çš„ç¤¾ä¼šåˆ†æã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ¨ ç¾å­¦é˜¶æ®µ (v21.4 - v22.0)</h4>
                                <p>æ•´åˆäº²å¯†å…³ç³»å…‰è°±ã€å­˜åœ¨æ€§å¯„ç”Ÿã€ç†µå¢æŸè€—ã€ç¥›é­…æ‚¬ç½®ã€å¶åƒå¹»ç­ã€åˆ›ä¼¤åé‡å»ºã€è™šæ— ç¾å­¦ç­‰æ¦‚å¿µã€‚å½¢æˆå®Œæ•´çš„ç¾å­¦-å­˜åœ¨å“²å­¦ä½“ç³»ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ—ï¸ æ¶æ„é˜¶æ®µ (v22.1 - v22.48)</h4>
                                <p>å»ºç«‹åŒè½¨åˆ¶æ¶æ„ï¼Œå®Œå–„æ•°æ®ç®¡ç†ã€å…³è”ç½‘ç»œã€æ—¶é—´çº¿ç­‰åŠŸèƒ½ã€‚å½¢æˆå®Œæ•´çš„æ€ç»´ååŒå¤„ç†å™¨ç³»ç»Ÿã€‚</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ç³»ç»Ÿæ¼”è¿›ç‰¹ç‚¹</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <ul style="padding-left: 20px; line-height: 1.8;">
                                <li><strong>æ¸è¿›å¼å‘å±•</strong>ï¼šä»å…·ä½“é—®é¢˜å‡ºå‘ï¼Œé€æ¸æŠ½è±¡å‡ºé€šç”¨æ¨¡å‹</li>
                                <li><strong>æ¨¡å—åŒ–æ¶æ„</strong>ï¼šæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰æ˜ç¡®çš„æ–°å¢åŠŸèƒ½å’Œæ”¹è¿›</li>
                                <li><strong>è·¨é¢†åŸŸæ•´åˆ</strong>ï¼šèåˆå¿ƒç†å­¦ã€å“²å­¦ã€ç¤¾ä¼šå­¦ã€è‰ºæœ¯ç­‰å¤šä¸ªé¢†åŸŸçš„çŸ¥è¯†</li>
                                <li><strong>å®ç”¨æ€§å¯¼å‘</strong>ï¼šæ‰€æœ‰æ¨¡å‹å’Œæ€è€ƒéƒ½æœåŠ¡äºå®é™…é—®é¢˜çš„è§£å†³</li>
                                <li><strong>å¼€æ”¾æ€§è®¾è®¡</strong>ï¼šç³»ç»Ÿæ¶æ„æ”¯æŒæ— é™æ‹“å±•å’Œå®šåˆ¶</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderArchitecture: function() {
                const html = `
                    <div class="content-header">
                        <h2>ç³»ç»Ÿæ¶æ„ç‰¹æ€§</h2>
                        <p>æ€ç»´ååŒå¤„ç†å™¨çš„æŠ€æœ¯æ¶æ„ä¸è®¾è®¡ç†å¿µ</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ä¸‰å±‚æ¶æ„è®¾è®¡</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p>ç³»ç»Ÿé‡‡ç”¨ä¸‰å±‚æ¶æ„è®¾è®¡ï¼Œç¡®ä¿åŠŸèƒ½çš„æ¸…æ™°åˆ†ç¦»ä¸é«˜æ•ˆååŒï¼š</p>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ—ï¸ æ ¸å¿ƒæ¨¡å‹å±‚</h4>
                                <p>åŒ…å«æ‰€æœ‰å¯å¤ç”¨çš„æ€ç»´æ¨¡å‹ï¼ˆM-ç³»åˆ—ï¼‰ï¼Œè¿™äº›æ¨¡å‹æ˜¯ä»å…·ä½“æ€è€ƒä¸­æŠ½è±¡å‡ºæ¥çš„åˆ†ææ¡†æ¶ã€‚æ¯ä¸ªæ¨¡å‹éƒ½æœ‰æ˜ç¡®çš„å®šä¹‰ã€åº”ç”¨åœºæ™¯å’Œå…³è”æ¨¡å‹ã€‚</p>
                                <p><strong>ç‰¹ç‚¹</strong>ï¼šå¯è¿ç§»ã€å¯ç»„åˆã€å¯æ‹“å±•</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ” ç°è±¡åˆ†æå±‚</h4>
                                <p>åŒ…å«æ‰€æœ‰å…·ä½“çš„æ€è€ƒè®°å½•ï¼ˆ#-ç³»åˆ—ï¼‰ï¼Œè¿™äº›è®°å½•æ˜¯å¯¹ç‰¹å®šç°è±¡ã€é—®é¢˜æˆ–æƒ…æ„Ÿçš„åˆ†æã€‚æ¯ä»½æ€è€ƒéƒ½éµå¾ªç»“æ„åŒ–æ ¼å¼ï¼Œä¾¿äºæå–æ¨¡å‹ã€‚</p>
                                <p><strong>ç‰¹ç‚¹</strong>ï¼šå…·ä½“ã€æƒ…å¢ƒåŒ–ã€å¯è¿½æº¯</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ› ï¸ å®è·µå·¥å…·ç®±</h4>
                                <p>åŒ…å«ä»æ€è€ƒä¸­æå–çš„è¡ŒåŠ¨è¦ç‚¹ã€æ€ç»´å·¥å…·å’Œå®è·µå»ºè®®ã€‚è¿™äº›å·¥å…·å¯ä»¥ç›´æ¥åº”ç”¨äºæ—¥å¸¸ç”Ÿæ´»å’Œé—®é¢˜è§£å†³ã€‚</p>
                                <p><strong>ç‰¹ç‚¹</strong>ï¼šå®ç”¨ã€å¯æ“ä½œã€å³æ—¶å¯ç”¨</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ•°æ®å­˜å‚¨æ¶æ„</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p>ç³»ç»Ÿé‡‡ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ï¼Œæ”¯æŒç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯çš„æ•°æ®åŒæ­¥ï¼š</p>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ’¾ æœ¬åœ°å­˜å‚¨</h4>
                                <p>æ‰€æœ‰æ•°æ®é»˜è®¤å­˜å‚¨åœ¨æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ä¸­ï¼Œç¡®ä¿æ•°æ®éšç§å’Œå®‰å…¨ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ”„ æ•°æ®åŒæ­¥</h4>
                                <p>é€šè¿‡ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ï¼Œå®ç°ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯çš„æ•°æ®å®æ—¶åŒæ­¥ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ“¤ å¯¼å…¥å¯¼å‡º</h4>
                                <p>æ”¯æŒæ•°æ®çš„å®Œæ•´å¯¼å‡ºå’Œé€‰æ‹©æ€§å¯¼å…¥ï¼Œä¾¿äºæ•°æ®å¤‡ä»½å’Œè¿ç§»ã€‚</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ™ºèƒ½è§£æå¼•æ“</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p>ç³»ç»Ÿå†…ç½®æ™ºèƒ½è§£æå¼•æ“ï¼Œæ”¯æŒçµæ´»æ ¼å¼çš„ç»“æ„åŒ–å†…å®¹è§£æï¼š</p>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ¯ æ ‡é¢˜è¯†åˆ«</h4>
                                <p>èƒ½å¤Ÿè¯†åˆ«å¤šç§å½¢å¼çš„æ ‡é¢˜æ ¼å¼ï¼Œå¦‚"ğŸ’ **çŠ¶æ€çœ‹æ¿**"ã€"ğŸŒŒ æ ¸å¿ƒç»“è®º"ã€"çŠ¶æ€çœ‹æ¿ï¼š"ç­‰ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ·ï¸ å…ƒæ•°æ®æå–</h4>
                                <p>è‡ªåŠ¨ä»"çŠ¶æ€çœ‹æ¿"éƒ¨åˆ†æå–æ€è€ƒIDã€ä¸»é¢˜ã€ç±»å‹ã€æ ‡ç­¾ã€å…³è”æ¨¡å‹ç­‰å…ƒæ•°æ®ã€‚</p>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ”— å…³è”è¯†åˆ«</h4>
                                <p>è‡ªåŠ¨è¯†åˆ«å¹¶æå–æ€è€ƒä¸­æåˆ°çš„æ¨¡å‹IDï¼ˆM-ç³»åˆ—ï¼‰å’Œæ€è€ƒIDï¼ˆ#-ç³»åˆ—ï¼‰ï¼Œå»ºç«‹å…³è”å…³ç³»ã€‚</p>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderTagReview: function() {
                const html = `
                    <div class="content-header">
                        <h2>æ ‡ç­¾å¤æ ¸ä¸­å¿ƒ</h2>
                        <p>æ£€æŸ¥å’Œç®¡ç†ç³»ç»Ÿä¸­çš„æ ‡ç­¾ï¼Œç¡®ä¿åˆ†ç±»å‡†ç¡®æ€§</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ ‡ç­¾ç»Ÿè®¡</div>
                            </div>
                            <div class="detail-id">å…± ${Object.keys(DataStore.tags).length} ä¸ªæ ‡ç­¾</div>
                        </div>
                        <div class="detail-content">
                            <p>å½“å‰ç³»ç»Ÿä¸­çš„æ ‡ç­¾ä½¿ç”¨æƒ…å†µï¼š</p>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ“Š æ ‡ç­¾çƒ­åº¦æ’è¡Œ</h4>
                                <div id="tag-stats-container">
                                    ${this.renderTagStats()}
                                </div>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ”„ æ ‡ç­¾ä¸€è‡´æ€§æ£€æŸ¥</h4>
                                <p>æ£€æŸ¥æ ‡ç­¾ä½¿ç”¨çš„ä¸€è‡´æ€§ï¼Œå‘ç°å¯èƒ½çš„æ ‡ç­¾å†²çªæˆ–é‡å¤ã€‚</p>
                                <button class="btn btn-primary" onclick="UIManager.checkTagConsistency()" style="margin-top: 10px;">
                                    <i class="fas fa-check-circle"></i> å¼€å§‹æ£€æŸ¥
                                </button>
                                <div id="consistency-results" style="margin-top: 15px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ ‡ç­¾ç®¡ç†</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p>é€‰æ‹©éœ€è¦å¤æ ¸æ ‡ç­¾çš„æ¡ç›®ï¼š</p>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <div style="flex: 1;">
                                    <h5 style="margin-bottom: 10px; color: var(--primary-color);">æ€è€ƒè®°å½•</h5>
                                    <div style="max-height: 300px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 4px; padding: 10px;">
                                        ${this.renderThoughtListForTagReview()}
                                    </div>
                                </div>
                                
                                <div style="flex: 1;">
                                    <h5 style="margin-bottom: 10px; color: var(--primary-color);">æ€ç»´æ¨¡å‹</h5>
                                    <div style="max-height: 300px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 4px; padding: 10px;">
                                        ${this.renderModelListForTagReview()}
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 25px; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
                                <h5 style="color: var(--primary-color); margin-bottom: 15px;">æ ‡ç­¾å»ºè®®ç³»ç»Ÿ</h5>
                                <p>æ ¹æ®ç°æœ‰æ ‡ç­¾ï¼Œä¸ºæ–°å†…å®¹æ¨èåˆé€‚çš„æ ‡ç­¾ï¼š</p>
                                
                                <div style="margin-top: 15px;">
                                    <input type="text" id="tag-suggestion-input" placeholder="è¾“å…¥å†…å®¹æè¿°..." style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 4px;">
                                    <button class="btn btn-secondary" onclick="UIManager.getTagSuggestions()">
                                        <i class="fas fa-lightbulb"></i> è·å–æ ‡ç­¾å»ºè®®
                                    </button>
                                    <div id="tag-suggestions-container" style="margin-top: 15px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderNetworkAnalysis: function() {
                const html = `
                    <div class="content-header">
                        <h2>æ¨¡å‹å…³è”ç½‘ç»œåˆ†æ</h2>
                        <p>å¯è§†åŒ–å±•ç¤ºæ€ç»´æ¨¡å‹ä¹‹é—´çš„å…³è”å…³ç³»</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ç½‘ç»œæ¦‚è§ˆ</div>
                            </div>
                            <div class="detail-id">${Object.keys(DataStore.modelConnections).length} ä¸ªæ¨¡å‹å·²å…³è”</div>
                        </div>
                        <div class="detail-content">
                            <p>å½“å‰æ¨¡å‹å…³è”ç½‘ç»œçŠ¶æ€ï¼š</p>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 25px 0;">
                                <div style="padding: 15px; background-color: #f0f7ff; border-radius: 8px;">
                                    <h5 style="color: var(--primary-color); margin-bottom: 10px;">å…³è”å¯†åº¦</h5>
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary-color);">
                                        ${DataStore.models.length > 0 ? Math.round((Object.keys(DataStore.modelConnections).length / DataStore.models.length) * 100) : 0}%
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--text-light);">å·²å»ºç«‹å…³è”çš„æ¨¡å‹æ¯”ä¾‹</p>
                                </div>
                                
                                <div style="padding: 15px; background-color: #f5f0ff; border-radius: 8px;">
                                    <h5 style="color: var(--primary-color); margin-bottom: 10px;">å¹³å‡è¿æ¥æ•°</h5>
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary-color);">
                                        ${Object.keys(DataStore.modelConnections).length > 0 ? 
                                            Math.round(Object.values(DataStore.modelConnections).reduce((sum, conn) => sum + conn.length, 0) / Object.keys(DataStore.modelConnections).length * 10) / 10 : 
                                            0}
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--text-light);">æ¯ä¸ªå…³è”æ¨¡å‹çš„å¹³å‡è¿æ¥æ•°</p>
                                </div>
                            </div>
                            
                            <div style="margin: 25px 0;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">æ ¸å¿ƒæ¢çº½æ¨¡å‹</h4>
                                <div id="hub-models-container">
                                    ${this.renderHubModels()}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">é€‰æ‹©æ¨¡å‹æŸ¥çœ‹ç½‘ç»œ</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div style="margin-bottom: 20px;">
                                <select id="model-network-selector" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px;" onchange="UIManager.updateNetworkGraph(this.value)">
                                    <option value="">é€‰æ‹©æ¨¡å‹...</option>
                                    ${DataStore.models.map(model => `
                                        <option value="${model.id}" ${model.id === this.currentModelId ? 'selected' : ''}>${model.id} - ${model.name}</option>
                                    `).join('')}
                                </select>
                            </div>
                            
                            <div id="network-detail-container" style="min-height: 300px; padding: 20px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid var(--border-color);">
                                ${this.renderNetworkDetail()}
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ç½‘ç»œåˆ†æå·¥å…·</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div style="margin-bottom: 20px;">
                                <button class="btn btn-primary" onclick="UIManager.findMissingConnections()">
                                    <i class="fas fa-link"></i> å‘ç°æ½œåœ¨å…³è”
                                </button>
                                <button class="btn btn-secondary" onclick="UIManager.exportNetworkData()" style="margin-left: 10px;">
                                    <i class="fas fa-download"></i> å¯¼å‡ºç½‘ç»œæ•°æ®
                                </button>
                            </div>
                            
                            <div id="network-analysis-results" style="margin-top: 20px;"></div>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderTimeline: function() {
                const timeline = DataStore.timeline;
                
                let timelineHTML = '';
                timeline.forEach((item, index) => {
                    timelineHTML += `
                        <div class="timeline-item" onclick="UIManager.showTimelineDetail('${item.id}')">
                            <div class="timeline-dot"></div>
                            <div class="timeline-edit-actions">
                                <div class="timeline-edit-btn edit" onclick="event.stopPropagation(); UIManager.editTimelineItem('${item.id}')" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="timeline-edit-btn delete" onclick="event.stopPropagation(); UIManager.deleteTimelineItem('${item.id}')" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-version">${item.version}</div>
                                <div class="timeline-date">${item.date}</div>
                                <div class="timeline-desc">${item.event}</div>
                            </div>
                        </div>
                    `;
                });
                
                const html = `
                    <div class="content-header">
                        <h2>ç³»ç»Ÿæ¼”è¿›å†ç¨‹</h2>
                        <p>æ€ç»´ååŒå¤„ç†å™¨çš„å‘å±•å†å²ä¸ç‰ˆæœ¬æ¼”è¿›</p>
                    </div>
                    
                    <div class="timeline-actions">
                        <button class="btn btn-primary" onclick="UIManager.addNewTimelineItem()">
                            <i class="fas fa-plus"></i> æ–°å¢è®°å½•
                        </button>
                    </div>
                    
                    <div class="timeline-container">
                        <div class="timeline-line"></div>
                        ${timelineHTML || '<div class="empty-state"><i class="fas fa-history"></i><p>æš‚æ— æ¼”è¿›è®°å½•</p></div>'}
                    </div>
                    
                    <div id="timeline-detail-container">
                        <!-- æ—¶é—´çº¿è¯¦æƒ…å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderDataManagement: function() {
                const backups = this.getBackupList();
                
                let backupsHTML = '';
                if (backups.length > 0) {
                    backups.forEach(backup => {
                        backupsHTML += `
                            <div class="index-item">
                                <div class="index-item-id">${backup.date}</div>
                                <div class="index-item-title">å¤‡ä»½ ${backup.key}</div>
                                <div class="index-item-actions">
                                    <span class="index-item-action" onclick="UIManager.restoreBackup('${backup.key}')" title="æ¢å¤">
                                        <i class="fas fa-undo"></i>
                                    </span>
                                    <span class="index-item-action" onclick="UIManager.deleteBackup('${backup.key}')" title="åˆ é™¤">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    backupsHTML = '<div class="empty-state" style="padding: 20px;"><i class="fas fa-inbox"></i><p>æš‚æ— å¤‡ä»½æ•°æ®</p></div>';
                }
                
                const html = `
                    <div class="content-header">
                        <h2>æ•°æ®ç®¡ç†ä¸å¤‡ä»½</h2>
                        <p>ç®¡ç†æ‚¨çš„æ€è€ƒæ•°æ®ï¼Œç¡®ä¿æ•°æ®å®‰å…¨</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ•°æ®æ¦‚è§ˆ</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                                <div style="padding: 15px; background-color: #f0f7ff; border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color);">${DataStore.thoughts.length}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-light);">æ€è€ƒè®°å½•</div>
                                </div>
                                <div style="padding: 15px; background-color: #f5f0ff; border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color);">${DataStore.models.length}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-light);">æ€ç»´æ¨¡å‹</div>
                                </div>
                                <div style="padding: 15px; background-color: #f0fff4; border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color);">${Object.keys(DataStore.tags).length}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-light);">æ ‡ç­¾</div>
                                </div>
                                <div style="padding: 15px; background-color: #fff8f0; border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color);">${backups.length}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-light);">å¤‡ä»½</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <h4 style="color: var(--primary-color); margin-bottom: 15px;">æœ€åä¿å­˜æ—¶é—´</h4>
                                <p>${DataStore.lastSaved ? new Date(DataStore.lastSaved).toLocaleString() : 'æœªçŸ¥'}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">å¤‡ä»½ç®¡ç†</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div style="margin-bottom: 20px;">
                                <button class="btn btn-primary" onclick="UIManager.createBackup()">
                                    <i class="fas fa-save"></i> åˆ›å»ºæ–°å¤‡ä»½
                                </button>
                                <button class="btn btn-secondary" onclick="UIManager.exportAllData()" style="margin-left: 10px;">
                                    <i class="fas fa-download"></i> å¯¼å‡ºå…¨éƒ¨æ•°æ®
                                </button>
                            </div>
                            
                            <div class="index-panel">
                                <h4>ç°æœ‰å¤‡ä»½</h4>
                                <div class="index-list">
                                    ${backupsHTML}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-view" style="margin-top: 25px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æ•°æ®å¯¼å…¥</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <div style="margin-bottom: 15px;">
                                <p>ä»JSONæ–‡ä»¶å¯¼å…¥æ•°æ®ï¼ˆå°†è¦†ç›–å½“å‰æ•°æ®ï¼‰ï¼š</p>
                                <input type="file" id="import-file" accept=".json" style="margin: 10px 0;">
                                <button class="btn btn-warning" onclick="UIManager.importFromFile()">
                                    <i class="fas fa-file-import"></i> å¯¼å…¥æ•°æ®
                                </button>
                            </div>
                            
                            <div style="margin-top: 20px; padding: 15px; background-color: #fff8f0; border-radius: 8px;">
                                <h5 style="color: var(--warning-color); margin-bottom: 10px;">âš ï¸ æ³¨æ„äº‹é¡¹</h5>
                                <ul style="padding-left: 20px; color: var(--text-light);">
                                    <li>å¯¼å…¥æ•°æ®å°†å®Œå…¨è¦†ç›–å½“å‰æ•°æ®</li>
                                    <li>å»ºè®®åœ¨å¯¼å…¥å‰å…ˆå¤‡ä»½å½“å‰æ•°æ®</li>
                                    <li>ä»…æ”¯æŒæœ¬ç³»ç»Ÿå¯¼å‡ºçš„JSONæ ¼å¼</li>
                                    <li>å¯¼å…¥åéœ€è¦åˆ·æ–°é¡µé¢</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            // ==================== è¾…åŠ©æ–¹æ³• ====================
            renderThoughtList: function(thoughts, showActions = false) {
                if (!thoughts || thoughts.length === 0) {
                    return '<div class="empty-state" style="padding: 20px;"><i class="fas fa-inbox"></i><p>æš‚æ— æ€è€ƒè®°å½•</p></div>';
                }
                
                let html = '';
                thoughts.forEach(thought => {
                    html += `
                        <div class="index-item" onclick="showThoughtDetail('${thought.id}')">
                            <div class="index-item-id">${thought.id}</div>
                            <div class="index-item-title">${thought.title || 'æ— æ ‡é¢˜'}</div>
                            ${showActions ? `
                                <div class="index-item-actions">
                                    <span class="index-item-action" onclick="event.stopPropagation(); editThought('${thought.id}')" title="ç¼–è¾‘">
                                        <i class="fas fa-edit"></i>
                                    </span>
                                    <span class="index-item-action" onclick="event.stopPropagation(); openDeleteModal('thought', '${thought.id}')" title="åˆ é™¤">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                return html;
            },
            
            renderModelList: function(models, showActions = false) {
                if (!models || models.length === 0) {
                    return '<div class="empty-state" style="padding: 20px;"><i class="fas fa-cube"></i><p>æš‚æ— æ€ç»´æ¨¡å‹</p></div>';
                }
                
                let html = '';
                models.forEach(model => {
                    html += `
                        <div class="index-item" onclick="showModelDetail('${model.id}')">
                            <div class="index-item-id">${model.id}</div>
                            <div class="index-item-title">${model.name}</div>
                            ${showActions ? `
                                <div class="index-item-actions">
                                    <span class="index-item-action" onclick="event.stopPropagation(); editModel('${model.id}')" title="ç¼–è¾‘">
                                        <i class="fas fa-edit"></i>
                                    </span>
                                    <span class="index-item-action" onclick="event.stopPropagation(); openDeleteModal('model', '${model.id}')" title="åˆ é™¤">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                return html;
            },
            
            renderTagStats: function() {
                const topTags = DataStore.getTopTags(15);
                
                let html = '<div style="display: flex; flex-direction: column; gap: 10px;">';
                topTags.forEach(tagInfo => {
                    const percentage = Math.round((tagInfo.count / DataStore.thoughts.length) * 100) || 0;
                    html += `
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 100px; font-size: 0.9rem;">${tagInfo.tag}</div>
                            <div style="flex: 1;">
                                <div style="height: 20px; background-color: #e0e0e0; border-radius: 10px; overflow: hidden;">
                                    <div style="height: 100%; width: ${percentage}%; background-color: var(--accent-color);"></div>
                                </div>
                            </div>
                            <div style="width: 40px; text-align: right; font-size: 0.9rem;">${tagInfo.count}</div>
                        </div>
                    `;
                });
                html += '</div>';
                
                return html;
            },
            
            renderThoughtListForTagReview: function() {
                const thoughts = DataStore.thoughts.slice(0, 10);
                
                let html = '';
                thoughts.forEach(thought => {
                    html += `
                        <div style="padding: 8px; border-bottom: 1px solid #eee; cursor: pointer;" onclick="UIManager.openTagReviewModal('thought', '${thought.id}')">
                            <div style="font-weight: bold; color: var(--primary-color);">${thought.id}</div>
                            <div style="font-size: 0.9rem; color: var(--text-light); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${thought.title || 'æ— æ ‡é¢˜'}</div>
                            <div style="font-size: 0.8rem; margin-top: 5px;">
                                ${thought.tags ? thought.tags.map(tag => `<span style="display: inline-block; padding: 2px 5px; background-color: #f0f0f0; border-radius: 3px; margin-right: 3px;">${tag}</span>`).join('') : ''}
                            </div>
                        </div>
                    `;
                });
                
                return html;
            },
            
            renderModelListForTagReview: function() {
                const models = DataStore.models.slice(0, 10);
                
                let html = '';
                models.forEach(model => {
                    html += `
                        <div style="padding: 8px; border-bottom: 1px solid #eee; cursor: pointer;" onclick="UIManager.openTagReviewModal('model', '${model.id}')">
                            <div style="font-weight: bold; color: var(--warning-color);">${model.id}</div>
                            <div style="font-size: 0.9rem; color: var(--text-light); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${model.name}</div>
                            <div style="font-size: 0.8rem; margin-top: 5px;">
                                ${model.tags ? model.tags.map(tag => `<span style="display: inline-block; padding: 2px 5px; background-color: #f0f0f0; border-radius: 3px; margin-right: 3px;">${tag}</span>`).join('') : ''}
                            </div>
                        </div>
                    `;
                });
                
                return html;
            },
            
            renderHubModels: function() {
                const connections = DataStore.modelConnections;
                const hubModels = Object.entries(connections)
                    .map(([modelId, conns]) => ({ id: modelId, connections: conns.length }))
                    .sort((a, b) => b.connections - a.connections)
                    .slice(0, 5);
                
                let html = '<div style="display: flex; flex-wrap: wrap; gap: 10px;">';
                hubModels.forEach(hub => {
                    const model = DataStore.getModelById(hub.id);
                    if (model) {
                        html += `
                            <div style="padding: 10px; background-color: white; border-radius: 6px; border: 1px solid var(--border-color); min-width: 150px;">
                                <div style="font-weight: bold; color: var(--primary-color);">${model.id}</div>
                                <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 5px;">${model.name}</div>
                                <div style="font-size: 0.8rem; color: var(--accent-color);">${hub.connections} ä¸ªè¿æ¥</div>
                            </div>
                        `;
                    }
                });
                html += '</div>';
                
                return html;
            },
            
            renderNetworkDetail: function() {
                const network = DataStore.getModelNetwork(this.currentModelId);
                
                if (!network) {
                    return `
                        <div style="text-align: center; padding: 40px;">
                            <i class="fas fa-project-diagram" style="font-size: 3rem; color: #ccc; margin-bottom: 15px;"></i>
                            <p>é€‰æ‹©æ¨¡å‹æŸ¥çœ‹å…³è”ç½‘ç»œ</p>
                        </div>
                    `;
                }
                
                let html = `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h4 style="color: var(--primary-color); margin-bottom: 5px;">${network.center.id}</h4>
                        <p style="color: var(--text-light); font-size: 0.9rem;">${network.center.name}</p>
                    </div>
                    
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 20px;">
                `;
                
                network.connections.forEach(model => {
                    html += `
                        <div class="network-node" onclick="UIManager.selectItem('${model.id}', 'model')" style="min-width: 100px; text-align: center;">
                            <div style="font-weight: bold; color: var(--accent-color);">${model.id}</div>
                            <div style="font-size: 0.8rem; color: var(--text-light);">${model.name.substring(0, 20)}${model.name.length > 20 ? '...' : ''}</div>
                        </div>
                    `;
                });
                
                html += `
                    </div>
                    
                    <div style="margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 6px;">
                        <h5 style="color: var(--primary-color); margin-bottom: 10px;">ç½‘ç»œåˆ†æ</h5>
                        <p><strong>è¿æ¥æ•°:</strong> ${network.connections.length}</p>
                        <p><strong>ç½‘ç»œå¯†åº¦:</strong> ${network.connections.length > 0 ? 'é«˜' : 'ä½'}</p>
                        <p><strong>æ ¸å¿ƒåœ°ä½:</strong> ${network.connections.length >= 3 ? 'æ¢çº½èŠ‚ç‚¹' : 'è¾¹ç¼˜èŠ‚ç‚¹'}</p>
                    </div>
                `;
                
                return html;
            },
            
            // ==================== å…¶ä»–UIæ–¹æ³• ====================
            showAlert: function(message, type = 'info') {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert alert-${type}`;
                alertDiv.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    ${message}
                `;
                
                const contentArea = document.getElementById('content-area');
                contentArea.insertBefore(alertDiv, contentArea.firstChild);
                
                setTimeout(() => {
                    alertDiv.style.opacity = '0';
                    setTimeout(() => alertDiv.remove(), 300);
                }, 3000);
            },
            
            selectItem: function(id, type) {
                if (type === 'model') {
                    this.currentModelId = id;
                    this.updateNetworkGraph(id);
                    showModelDetail(id);
                } else if (type === 'thought') {
                    showThoughtDetail(id);
                }
            },
            
            openDeleteModal: function(type, id) {
                this.itemToDelete = id;
                this.deleteType = type;
                
                let message = 'ç¡®å®šè¦åˆ é™¤æ­¤é¡¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚';
                let item = null;
                
                if (type === 'thought') {
                    item = DataStore.getThoughtById(id);
                    if (item) {
                        message = `ç¡®å®šè¦åˆ é™¤æ€è€ƒè®°å½• ${id} "${item.title || 'æ— æ ‡é¢˜'}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`;
                    }
                } else if (type === 'model') {
                    item = DataStore.getModelById(id);
                    if (item) {
                        message = `ç¡®å®šè¦åˆ é™¤æ€ç»´æ¨¡å‹ ${id} "${item.name}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`;
                    }
                }
                
                document.getElementById('delete-message').textContent = message;
                document.getElementById('delete-modal').style.display = 'flex';
            },
            
            closeDeleteModal: function() {
                document.getElementById('delete-modal').style.display = 'none';
                this.itemToDelete = null;
                this.deleteType = null;
            },
            
            confirmDelete: function() {
                if (!this.itemToDelete || !this.deleteType) return;
                
                let success = false;
                if (this.deleteType === 'thought') {
                    success = DataStore.deleteThought(this.itemToDelete);
                } else if (this.deleteType === 'model') {
                    success = DataStore.deleteModel(this.itemToDelete);
                }
                
                if (success) {
                    this.showAlert(`${this.deleteType === 'thought' ? 'æ€è€ƒè®°å½•' : 'æ€ç»´æ¨¡å‹'}å·²åˆ é™¤`, 'success');
                    this.loadView(this.currentView);
                } else {
                    this.showAlert('åˆ é™¤å¤±è´¥', 'danger');
                }
                
                this.closeDeleteModal();
            },
            
            openTagReviewModal: function(type, id) {
                this.tagReviewItem = id;
                this.tagReviewType = type;
                
                let item = null;
                if (type === 'thought') {
                    item = DataStore.getThoughtById(id);
                    document.getElementById('tag-review-title').textContent = `æ€è€ƒè®°å½• ${id} çš„æ ‡ç­¾`;
                } else if (type === 'model') {
                    item = DataStore.getModelById(id);
                    document.getElementById('tag-review-title').textContent = `æ€ç»´æ¨¡å‹ ${id} çš„æ ‡ç­¾`;
                }
                
                this.currentTagsForReview = item && item.tags ? [...item.tags] : [];
                this.renderCurrentTags();
                
                document.getElementById('tag-review-modal').style.display = 'flex';
            },
            
            closeTagReviewModal: function() {
                document.getElementById('tag-review-modal').style.display = 'none';
                this.tagReviewItem = null;
                this.tagReviewType = null;
                this.currentTagsForReview = [];
            },
            
            saveTagReview: function() {
                if (!this.tagReviewItem || !this.tagReviewType) return;
                
                let item = null;
                if (this.tagReviewType === 'thought') {
                    item = DataStore.getThoughtById(this.tagReviewItem);
                } else if (this.tagReviewType === 'model') {
                    item = DataStore.getModelById(this.tagReviewItem);
                }
                
                if (item) {
                    item.tags = [...this.currentTagsForReview];
                    
                    let success = false;
                    if (this.tagReviewType === 'thought') {
                        success = DataStore.updateThought(this.tagReviewItem, item);
                    } else if (this.tagReviewType === 'model') {
                        success = DataStore.updateModel(this.tagReviewItem, item);
                    }
                    
                    if (success) {
                        this.showAlert('æ ‡ç­¾å·²ä¿å­˜', 'success');
                    } else {
                        this.showAlert('ä¿å­˜å¤±è´¥', 'danger');
                    }
                }
            },
            
            renderCurrentTags: function() {
                const container = document.getElementById('current-tags-container');
                container.innerHTML = '';
                
                this.currentTagsForReview.forEach((tag, index) => {
                    const tagElement = document.createElement('div');
                    tagElement.style.cssText = `
                        display: inline-flex;
                        align-items: center;
                        background-color: rgba(92, 107, 192, 0.1);
                        color: var(--accent-color);
                        padding: 5px 10px;
                        border-radius: 4px;
                        margin: 5px;
                        font-size: 0.9rem;
                    `;
                    
                    tagElement.innerHTML = `
                        ${tag}
                        <span onclick="UIManager.removeTag(${index})" style="margin-left: 8px; cursor: pointer; color: var(--danger-color);">
                            <i class="fas fa-times"></i>
                        </span>
                    `;
                    
                    container.appendChild(tagElement);
                });
                
                if (this.currentTagsForReview.length === 0) {
                    container.innerHTML = '<div style="color: var(--text-light); padding: 10px; text-align: center;">æš‚æ— æ ‡ç­¾</div>';
                }
            },
            
            removeTag: function(index) {
                this.currentTagsForReview.splice(index, 1);
                this.renderCurrentTags();
            },
            
            addNewTag: function() {
                const input = document.getElementById('new-tag-input');
                if (input && input.value.trim()) {
                    this.currentTagsForReview.push(input.value.trim());
                    input.value = '';
                    this.renderCurrentTags();
                }
            },
            
            addTagFromInput: function() {
                this.addNewTag();
            },
            
            addSuggestedTag: function(tag) {
                if (!this.currentTagsForReview.includes(tag)) {
                    this.currentTagsForReview.push(tag);
                    this.renderCurrentTags();
                }
            },
            
            applyTagReview: function() {
                this.saveTagReview();
                this.closeTagReviewModal();
            },
            
            openSectionEditModal: function(thoughtId) {
                const thought = DataStore.openSectionEditor(thoughtId);
                if (!thought) return;
                
                // è®¾ç½®ID
                document.getElementById('edit-thought-id').value = thought.id;
                
                // ç”Ÿæˆæ ‡ç­¾
                const sectionTabs = document.getElementById('section-tabs');
                const editorsContainer = document.getElementById('section-editors-container');
                
                sectionTabs.innerHTML = '';
                editorsContainer.innerHTML = '';
                
                const sections = DataStore.sectionEdits;
                Object.keys(sections).forEach((sectionName, index) => {
                    // æ ‡ç­¾
                    const tab = document.createElement('div');
                    tab.className = `section-tab ${index === 0 ? 'active' : ''}`;
                    tab.textContent = sectionName;
                    tab.onclick = () => this.switchSectionTab(sectionName);
                    sectionTabs.appendChild(tab);
                    
                    // ç¼–è¾‘å™¨
                    const editor = document.createElement('div');
                    editor.className = `section-editor ${index === 0 ? 'active' : ''}`;
                    editor.id = `section-editor-${sectionName}`;
                    editor.innerHTML = `
                        <div class="section-editor-header">
                            <h4>${sectionName}</h4>
                        </div>
                        <textarea id="edit-${sectionName}" style="width: 100%; min-height: 200px;">${sections[sectionName]}</textarea>
                        <div class="section-preview" id="preview-${sectionName}"></div>
                    `;
                    editorsContainer.appendChild(editor);
                    
                    // è®¾ç½®é¢„è§ˆ
                    const textarea = document.getElementById(`edit-${sectionName}`);
                    const preview = document.getElementById(`preview-${sectionName}`);
                    
                    if (textarea && preview) {
                        textarea.addEventListener('input', () => {
                            preview.textContent = textarea.value.substring(0, 200) + 
                                (textarea.value.length > 200 ? '...' : '');
                        });
                        
                        preview.textContent = textarea.value.substring(0, 200) + 
                            (textarea.value.length > 200 ? '...' : '');
                    }
                });
                
                document.getElementById('section-edit-modal').style.display = 'flex';
            },
            
            switchSectionTab: function(sectionName) {
                // ç§»é™¤æ‰€æœ‰æ´»åŠ¨æ ‡ç­¾
                document.querySelectorAll('.section-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // éšè—æ‰€æœ‰ç¼–è¾‘å™¨
                document.querySelectorAll('.section-editor').forEach(editor => {
                    editor.classList.remove('active');
                });
                
                // æ¿€æ´»å½“å‰æ ‡ç­¾
                document.querySelectorAll('.section-tab').forEach(tab => {
                    if (tab.textContent === sectionName) {
                        tab.classList.add('active');
                    }
                });
                
                // æ˜¾ç¤ºå½“å‰ç¼–è¾‘å™¨
                const editor = document.getElementById(`section-editor-${sectionName}`);
                if (editor) {
                    editor.classList.add('active');
                }
            },
            
            closeSectionEditModal: function() {
                document.getElementById('section-edit-modal').style.display = 'none';
                DataStore.editingThoughtId = null;
            },
            
            saveSectionEdits: function() {
                const newId = document.getElementById('edit-thought-id').value.trim();
                
                // æ”¶é›†æ‰€æœ‰ç¼–è¾‘å†…å®¹
                Object.keys(DataStore.sectionEdits).forEach(sectionName => {
                    const textarea = document.getElementById(`edit-${sectionName}`);
                    if (textarea) {
                        DataStore.sectionEdits[sectionName] = textarea.value;
                    }
                });
                
                const result = DataStore.saveSectionEdits(newId);
                
                if (result.success) {
                    this.showAlert('æ€è€ƒè®°å½•å·²ä¿å­˜', 'success');
                    this.closeSectionEditModal();
                    this.loadView('thoughts');
                } else {
                    this.showAlert(result.message || 'ä¿å­˜å¤±è´¥', 'danger');
                }
            },
            
            validateThoughtId: function() {
                const newId = document.getElementById('edit-thought-id').value.trim();
                const currentId = DataStore.editingThoughtId;
                
                if (!newId) {
                    this.showAlert('IDä¸èƒ½ä¸ºç©º', 'warning');
                    return;
                }
                
                if (newId === currentId) {
                    this.showAlert('IDæœªæ›´æ”¹', 'info');
                    return;
                }
                
                const existingThought = DataStore.getThoughtById(newId);
                if (existingThought && existingThought.id !== currentId) {
                    this.showAlert(`ID "${newId}" å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ID`, 'danger');
                    return;
                }
                
                this.showAlert('IDå¯ç”¨', 'success');
            },
            
            openTimelineEditModal: function(id = null) {
                this.currentTimelineItem = id;
                
                if (id) {
                    const item = DataStore.getTimelineById(id);
                    if (item) {
                        document.getElementById('timeline-edit-version').value = item.version;
                        document.getElementById('timeline-edit-date').value = item.date;
                        document.getElementById('timeline-edit-event').value = item.event;
                    }
                } else {
                    document.getElementById('timeline-edit-version').value = '';
                    document.getElementById('timeline-edit-date').value = '';
                    document.getElementById('timeline-edit-event').value = '';
                }
                
                document.getElementById('timeline-edit-modal').style.display = 'flex';
            },
            
            closeTimelineEditModal: function() {
                document.getElementById('timeline-edit-modal').style.display = 'none';
                this.currentTimelineItem = null;
            },
            
            saveTimelineEdit: function() {
                const version = document.getElementById('timeline-edit-version').value.trim();
                const date = document.getElementById('timeline-edit-date').value.trim();
                const event = document.getElementById('timeline-edit-event').value.trim();
                
                if (!version || !date || !event) {
                    this.showAlert('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ', 'warning');
                    return;
                }
                
                if (this.currentTimelineItem) {
                    // æ›´æ–°ç°æœ‰é¡¹ç›®
                    const item = DataStore.getTimelineById(this.currentTimelineItem);
                    if (item) {
                        item.version = version;
                        item.date = date;
                        item.event = event;
                        
                        if (DataStore.updateTimelineItem(this.currentTimelineItem, item)) {
                            this.showAlert('æ—¶é—´çº¿è®°å½•å·²æ›´æ–°', 'success');
                            this.closeTimelineEditModal();
                            this.loadView('timeline');
                        } else {
                            this.showAlert('æ›´æ–°å¤±è´¥', 'danger');
                        }
                    }
                } else {
                    // æ–°å¢é¡¹ç›®
                    const newItem = {
                        version,
                        date,
                        event
                    };
                    
                    const result = DataStore.addTimelineItem(newItem);
                    if (result) {
                        this.showAlert('æ—¶é—´çº¿è®°å½•å·²æ·»åŠ ', 'success');
                        this.closeTimelineEditModal();
                        this.loadView('timeline');
                    } else {
                        this.showAlert('æ·»åŠ å¤±è´¥', 'danger');
                    }
                }
            },
            
            showTimelineDetail: function(id) {
                const item = DataStore.getTimelineById(id);
                const container = document.getElementById('timeline-detail-container');
                
                if (!item) {
                    container.innerHTML = '';
                    return;
                }
                
                container.innerHTML = `
                    <div class="timeline-detail-view">
                        <div class="timeline-detail-header">
                            <div class="timeline-detail-title">${item.version}</div>
                            <div class="timeline-detail-date">${item.date}</div>
                        </div>
                        <div class="timeline-detail-content">
                            ${item.event}
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-warning" onclick="UIManager.editTimelineItem('${id}')">
                                <i class="fas fa-edit"></i> ç¼–è¾‘
                            </button>
                            <button class="btn btn-danger" onclick="UIManager.deleteTimelineItem('${id}')">
                                <i class="fas fa-trash"></i> åˆ é™¤
                            </button>
                        </div>
                    </div>
                `;
            },
            
            editTimelineItem: function(id) {
                this.openTimelineEditModal(id);
            },
            
            deleteTimelineItem: function(id) {
                if (confirm('ç¡®å®šè¦åˆ é™¤æ­¤æ—¶é—´çº¿è®°å½•å—ï¼Ÿ')) {
                    if (DataStore.deleteTimelineItem(id)) {
                        this.showAlert('æ—¶é—´çº¿è®°å½•å·²åˆ é™¤', 'success');
                        this.loadView('timeline');
                    } else {
                        this.showAlert('åˆ é™¤å¤±è´¥', 'danger');
                    }
                }
            },
            
            addNewTimelineItem: function() {
                this.openTimelineEditModal();
            },
            
            // ==================== æ•°æ®æ“ä½œæ–¹æ³• ====================
            exportCurrentItem: function() {
                if (!this.currentView) return;
                
                let data = null;
                let filename = '';
                
                if (this.currentView === 'thoughts' || this.currentView === 'add-structured') {
                    // å¯¼å‡ºæœ€æ–°æ€è€ƒè®°å½•
                    const thoughts = DataStore.getRecentThoughts(1);
                    if (thoughts.length > 0) {
                        data = DataStore.exportCurrentItem('thought', thoughts[0].id);
                        filename = `æ€è€ƒè®°å½•_${thoughts[0].id}.json`;
                    }
                } else if (this.currentView === 'models' || this.currentView === 'add-model') {
                    // å¯¼å‡ºæœ€æ–°æ¨¡å‹
                    const models = DataStore.getRecentModels(1);
                    if (models.length > 0) {
                        data = DataStore.exportCurrentItem('model', models[0].id);
                        filename = `æ€ç»´æ¨¡å‹_${models[0].id}.json`;
                    }
                }
                
                if (data) {
                    this.downloadJSON(data, filename);
                    this.showAlert('å¯¼å‡ºæˆåŠŸ', 'success');
                } else {
                    this.showAlert('æ²¡æœ‰å¯å¯¼å‡ºçš„é¡¹ç›®', 'warning');
                }
            },
            
            backupAllData: function() {
                const result = DataStore.backupData();
                if (result.success) {
                    this.showAlert('æ•°æ®å¤‡ä»½æˆåŠŸ', 'success');
                    if (this.currentView === 'data-management') {
                        this.loadView('data-management');
                    }
                } else {
                    this.showAlert('å¤‡ä»½å¤±è´¥: ' + result.error, 'danger');
                }
            },
            
            importData: function() {
                const jsonData = prompt('è¯·è¾“å…¥è¦å¯¼å…¥çš„JSONæ•°æ®:');
                if (jsonData) {
                    const result = DataStore.importData(jsonData);
                    if (result.success) {
                        this.showAlert('æ•°æ®å¯¼å…¥æˆåŠŸï¼Œé¡µé¢å°†åˆ·æ–°', 'success');
                        setTimeout(() => location.reload(), 1000);
                    } else {
                        this.showAlert('å¯¼å…¥å¤±è´¥: ' + result.error, 'danger');
                    }
                }
            },
            
            exportAllData: function() {
                const data = DataStore.exportAllData();
                this.downloadJSON(data, `æ€ç»´ååŒå¤„ç†å™¨_å®Œæ•´å¤‡ä»½_${new Date().toISOString().split('T')[0]}.json`);
                this.showAlert('å…¨éƒ¨æ•°æ®å¯¼å‡ºæˆåŠŸ', 'success');
            },
            
            downloadJSON: function(data, filename) {
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            },
            
            getBackupList: function() {
                const backups = [];
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.startsWith('structuredThoughtAssistant_backup_')) {
                        try {
                            const data = JSON.parse(localStorage.getItem(key));
                            backups.push({
                                key: key,
                                date: key.replace('structuredThoughtAssistant_backup_', ''),
                                size: data.length
                            });
                        } catch (e) {
                            console.error('è§£æå¤‡ä»½æ•°æ®å¤±è´¥:', key, e);
                        }
                    }
                }
                
                // æŒ‰æ—¥æœŸå€’åºæ’åº
                backups.sort((a, b) => b.date.localeCompare(a.date));
                return backups;
            },
            
            createBackup: function() {
                this.backupAllData();
            },
            
            restoreBackup: function(key) {
                if (confirm('ç¡®å®šè¦æ¢å¤æ­¤å¤‡ä»½å—ï¼Ÿå½“å‰æ•°æ®å°†è¢«è¦†ç›–ã€‚')) {
                    try {
                        const data = localStorage.getItem(key);
                        if (data) {
                            const result = DataStore.importData(data);
                            if (result.success) {
                                this.showAlert('å¤‡ä»½æ¢å¤æˆåŠŸï¼Œé¡µé¢å°†åˆ·æ–°', 'success');
                                setTimeout(() => location.reload(), 1000);
                            } else {
                                this.showAlert('æ¢å¤å¤±è´¥: ' + result.error, 'danger');
                            }
                        }
                    } catch (e) {
                        this.showAlert('æ¢å¤å¤±è´¥: ' + e.message, 'danger');
                    }
                }
            },
            
            deleteBackup: function(key) {
                if (confirm('ç¡®å®šè¦åˆ é™¤æ­¤å¤‡ä»½å—ï¼Ÿ')) {
                    localStorage.removeItem(key);
                    this.showAlert('å¤‡ä»½å·²åˆ é™¤', 'success');
                    if (this.currentView === 'data-management') {
                        this.loadView('data-management');
                    }
                }
            },
            
            importFromFile: function() {
                const fileInput = document.getElementById('import-file');
                if (!fileInput || !fileInput.files.length) {
                    this.showAlert('è¯·é€‰æ‹©æ–‡ä»¶', 'warning');
                    return;
                }
                
                const file = fileInput.files[0];
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    try {
                        const result = DataStore.importData(e.target.result);
                        if (result.success) {
                            this.showAlert('æ•°æ®å¯¼å…¥æˆåŠŸï¼Œé¡µé¢å°†åˆ·æ–°', 'success');
                            setTimeout(() => location.reload(), 1000);
                        } else {
                            this.showAlert('å¯¼å…¥å¤±è´¥: ' + result.error, 'danger');
                        }
                    } catch (e) {
                        this.showAlert('å¯¼å…¥å¤±è´¥: ' + e.message, 'danger');
                    }
                };
                
                reader.onerror = () => {
                    this.showAlert('è¯»å–æ–‡ä»¶å¤±è´¥', 'danger');
                };
                
                reader.readAsText(file);
            },
            
            // ==================== æœç´¢åŠŸèƒ½ ====================
            performSearch: function(query) {
                if (!query.trim()) {
                    return;
                }
                
                // åœ¨æ€è€ƒè®°å½•å’Œæ¨¡å‹ä¸­æœç´¢
                const searchResults = {
                    thoughts: [],
                    models: []
                };
                
                const lowercaseQuery = query.toLowerCase();
                
                // æœç´¢æ€è€ƒè®°å½•
                DataStore.thoughts.forEach(thought => {
                    let match = false;
                    
                    // æœç´¢ID
                    if (thought.id && thought.id.toLowerCase().includes(lowercaseQuery)) {
                        match = true;
                    }
                    
                    // æœç´¢æ ‡é¢˜
                    if (thought.title && thought.title.toLowerCase().includes(lowercaseQuery)) {
                        match = true;
                    }
                    
                    // æœç´¢å†…å®¹
                    Object.values(thought.sections || {}).forEach(content => {
                        if (content && content.toLowerCase().includes(lowercaseQuery)) {
                            match = true;
                        }
                    });
                    
                    // æœç´¢æ ‡ç­¾
                    if (thought.tags) {
                        thought.tags.forEach(tag => {
                            if (tag.toLowerCase().includes(lowercaseQuery)) {
                                match = true;
                            }
                        });
                    }
                    
                    if (match) {
                        searchResults.thoughts.push(thought);
                    }
                });
                
                // æœç´¢æ¨¡å‹
                DataStore.models.forEach(model => {
                    let match = false;
                    
                    // æœç´¢ID
                    if (model.id && model.id.toLowerCase().includes(lowercaseQuery)) {
                        match = true;
                    }
                    
                    // æœç´¢åç§°
                    if (model.name && model.name.toLowerCase().includes(lowercaseQuery)) {
                        match = true;
                    }
                    
                    // æœç´¢æè¿°
                    if (model.description && model.description.toLowerCase().includes(lowercaseQuery)) {
                        match = true;
                    }
                    
                    // æœç´¢æ ‡ç­¾
                    if (model.tags) {
                        model.tags.forEach(tag => {
                            if (tag.toLowerCase().includes(lowercaseQuery)) {
                                match = true;
                            }
                        });
                    }
                    
                    if (match) {
                        searchResults.models.push(model);
                    }
                });
                
                // æ˜¾ç¤ºæœç´¢ç»“æœ
                this.displaySearchResults(searchResults, query);
            },
            
            displaySearchResults: function(results, query) {
                if (this.currentView !== 'overview') {
                    return; // åªåœ¨æ€»è§ˆé¡µé¢æ˜¾ç¤ºæœç´¢ç»“æœ
                }
                
                const contentArea = document.getElementById('content-area');
                const originalContent = contentArea.innerHTML;
                
                if (results.thoughts.length === 0 && results.models.length === 0) {
                    // æ²¡æœ‰ç»“æœï¼Œæ¢å¤åŸå†…å®¹
                    return;
                }
                
                // åˆ›å»ºæœç´¢ç»“æœè§†å›¾
                let resultsHTML = `
                    <div class="detail-view" style="margin-top: 20px;">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">æœç´¢ç»“æœ: "${query}"</div>
                            </div>
                            <div class="detail-id">${results.thoughts.length + results.models.length} ä¸ªç»“æœ</div>
                        </div>
                        <div class="detail-content">
                `;
                
                if (results.thoughts.length > 0) {
                    resultsHTML += `
                        <h5 style="color: var(--primary-color); margin: 15px 0 10px 0;">æ€è€ƒè®°å½• (${results.thoughts.length})</h5>
                        <div style="max-height: 200px; overflow-y: auto; margin-bottom: 20px;">
                    `;
                    
                    results.thoughts.forEach(thought => {
                        resultsHTML += `
                            <div class="index-item" onclick="showThoughtDetail('${thought.id}')">
                                <div class="index-item-id">${thought.id}</div>
                                <div class="index-item-title">${thought.title || 'æ— æ ‡é¢˜'}</div>
                            </div>
                        `;
                    });
                    
                    resultsHTML += `</div>`;
                }
                
                if (results.models.length > 0) {
                    resultsHTML += `
                        <h5 style="color: var(--primary-color); margin: 15px 0 10px 0;">æ€ç»´æ¨¡å‹ (${results.models.length})</h5>
                        <div style="max-height: 200px; overflow-y: auto;">
                    `;
                    
                    results.models.forEach(model => {
                        resultsHTML += `
                            <div class="index-item" onclick="showModelDetail('${model.id}')">
                                <div class="index-item-id">${model.id}</div>
                                <div class="index-item-title">${model.name}</div>
                            </div>
                        `;
                    });
                    
                    resultsHTML += `</div>`;
                }
                
                resultsHTML += `
                        </div>
                    </div>
                `;
                
                // å°†æœç´¢ç»“æœæ’å…¥åˆ°å†…å®¹åŒºåŸŸ
                contentArea.innerHTML = resultsHTML + originalContent;
            },
            
            searchByTag: function(tag) {
                // è®¾ç½®æœç´¢æ¡†å†…å®¹
                const searchInput = document.getElementById('search-input');
                if (searchInput) {
                    searchInput.value = tag;
                }
                
                // æ‰§è¡Œæœç´¢
                this.performSearch(tag);
                
                // åˆ‡æ¢åˆ°æ€»è§ˆè§†å›¾ä»¥æ˜¾ç¤ºç»“æœ
                this.loadView('overview');
            },
            
            // ==================== ç½‘ç»œåˆ†æå·¥å…· ====================
            findMissingConnections: function() {
                const models = DataStore.models;
                const connections = DataStore.modelConnections;
                
                // æ‰¾å‡ºæ²¡æœ‰å…³è”çš„æ¨¡å‹
                const unconnectedModels = models.filter(model => 
                    !connections[model.id] || connections[model.id].length === 0
                );
                
                // æ‰¾å‡ºå…³è”è¾ƒå°‘çš„æ¨¡å‹
                const weaklyConnectedModels = Object.entries(connections)
                    .filter(([id, conns]) => conns.length <= 2)
                    .map(([id]) => DataStore.getModelById(id))
                    .filter(model => model);
                
                let html = '<div style="margin-top: 15px;">';
                
                if (unconnectedModels.length > 0) {
                    html += `
                        <h5 style="color: var(--warning-color); margin-bottom: 10px;">æœªå…³è”æ¨¡å‹ (${unconnectedModels.length})</h5>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                            ${unconnectedModels.map(model => `
                                <span class="tag" onclick="showModelDetail('${model.id}')" style="cursor: pointer;">
                                    ${model.id}
                                </span>
                            `).join('')}
                        </div>
                    `;
                }
                
                if (weaklyConnectedModels.length > 0) {
                    html += `
                        <h5 style="color: var(--warning-color); margin-bottom: 10px;">å¼±å…³è”æ¨¡å‹ (${weaklyConnectedModels.length})</h5>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                            ${weaklyConnectedModels.map(model => `
                                <span class="tag" onclick="showModelDetail('${model.id}')" style="cursor: pointer;">
                                    ${model.id} (${connections[model.id] ? connections[model.id].length : 0} è¿æ¥)
                                </span>
                            `).join('')}
                        </div>
                    `;
                }
                
                if (unconnectedModels.length === 0 && weaklyConnectedModels.length === 0) {
                    html += '<p style="color: var(--success-color);">æ‰€æœ‰æ¨¡å‹éƒ½å·²å»ºç«‹è‰¯å¥½çš„å…³è”ç½‘ç»œï¼</p>';
                }
                
                html += '</div>';
                
                document.getElementById('network-analysis-results').innerHTML = html;
            },
            
            exportNetworkData: function() {
                const networkData = {
                    nodes: [],
                    edges: [],
                    exportDate: new Date().toISOString()
                };
                
                // æ·»åŠ èŠ‚ç‚¹
                DataStore.models.forEach(model => {
                    networkData.nodes.push({
                        id: model.id,
                        name: model.name,
                        group: model.tags ? model.tags[0] || 'default' : 'default'
                    });
                });
                
                // æ·»åŠ è¾¹
                Object.entries(DataStore.modelConnections).forEach(([source, targets]) => {
                    targets.forEach(target => {
                        networkData.edges.push({
                            source: source,
                            target: target
                        });
                    });
                });
                
                this.downloadJSON(JSON.stringify(networkData, null, 2), `æ¨¡å‹å…³è”ç½‘ç»œ_${new Date().toISOString().split('T')[0]}.json`);
                this.showAlert('ç½‘ç»œæ•°æ®å¯¼å‡ºæˆåŠŸ', 'success');
            },
            
            checkTagConsistency: function() {
                const tags = DataStore.tags;
                const tagList = Object.keys(tags);
                
                // æŸ¥æ‰¾ç›¸ä¼¼çš„æ ‡ç­¾
                const similarTags = [];
                for (let i = 0; i < tagList.length; i++) {
                    for (let j = i + 1; j < tagList.length; j++) {
                        const tag1 = tagList[i];
                        const tag2 = tagList[j];
                        
                        // ç®€å•çš„ç›¸ä¼¼åº¦æ£€æŸ¥ï¼ˆåŸºäºå­—ç¬¦ä¸²åŒ…å«å…³ç³»ï¼‰
                        if (tag1.includes(tag2.replace(/[ğŸŒŒğŸ§ ğŸ’â³ğŸµâš–ï¸]/g, '').trim()) || 
                            tag2.includes(tag1.replace(/[ğŸŒŒğŸ§ ğŸ’â³ğŸµâš–ï¸]/g, '').trim())) {
                            similarTags.push([tag1, tag2]);
                        }
                    }
                }
                
                let html = '<div style="margin-top: 15px;">';
                
                if (similarTags.length > 0) {
                    html += `
                        <h5 style="color: var(--warning-color); margin-bottom: 10px;">å¯èƒ½çš„æ ‡ç­¾é‡å¤ (${similarTags.length})</h5>
                        <div style="max-height: 200px; overflow-y: auto;">
                    `;
                    
                    similarTags.forEach(([tag1, tag2]) => {
                        html += `
                            <div style="padding: 8px; border-bottom: 1px solid #eee;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>${tag1} (${tags[tag1]} æ¬¡)</span>
                                    <span>${tag2} (${tags[tag2]} æ¬¡)</span>
                                </div>
                            </div>
                        `;
                    });
                    
                    html += `</div>`;
                } else {
                    html += '<p style="color: var(--success-color);">æ ‡ç­¾ä½¿ç”¨ä¸€è‡´ï¼Œæœªå‘ç°æ˜æ˜¾é‡å¤ã€‚</p>';
                }
                
                html += '</div>';
                
                document.getElementById('consistency-results').innerHTML = html;
            },
            
            getTagSuggestions: function() {
                const input = document.getElementById('tag-suggestion-input');
                if (!input || !input.value.trim()) {
                    this.showAlert('è¯·è¾“å…¥å†…å®¹æè¿°', 'warning');
                    return;
                }
                
                const text = input.value.trim();
                
                // ç®€å•çš„å…³é”®è¯æå–ï¼ˆå®é™…åº”ç”¨ä¸­å¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„NLPæŠ€æœ¯ï¼‰
                const keywords = text.split(/[ï¼Œã€‚ï¼ï¼Ÿï¼›,.!?;]/).filter(word => word.trim().length > 2);
                
                // æ ¹æ®å…³é”®è¯æ¨èæ ‡ç­¾
                const suggestions = [];
                const allTags = Object.keys(DataStore.tags);
                
                keywords.forEach(keyword => {
                    allTags.forEach(tag => {
                        if (tag.includes(keyword) || keyword.includes(tag.replace(/[ğŸŒŒğŸ§ ğŸ’â³ğŸµâš–ï¸]/g, '').trim())) {
                            if (!suggestions.includes(tag)) {
                                suggestions.push(tag);
                            }
                        }
                    });
                });
                
                // å¦‚æœæ²¡æœ‰åŒ¹é…çš„æ ‡ç­¾ï¼Œä½¿ç”¨å¸¸ç”¨æ ‡ç­¾
                if (suggestions.length === 0) {
                    const topTags = DataStore.getTopTags(5);
                    suggestions.push(...topTags.map(t => t.tag));
                }
                
                // æ˜¾ç¤ºå»ºè®®
                const container = document.getElementById('tag-suggestions-container');
                container.innerHTML = `
                    <div style="margin-top: 10px;">
                        <h6 style="color: var(--primary-color); margin-bottom: 10px;">æ¨èæ ‡ç­¾</h6>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            ${suggestions.map(tag => `
                                <span class="tag" style="cursor: pointer;" onclick="document.getElementById('tag-search-input').value = '${tag}'; UIManager.searchByTag('${tag}')">
                                    ${tag}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                `;
            },
            
            renderThoughtDetail: function(thought, isEditing = false) {
                if (isEditing) {
                    return this.renderThoughtEdit(thought);
                }
                
                let sectionsHTML = '';
                Object.keys(thought.sections || {}).forEach(sectionName => {
                    const content = thought.sections[sectionName];
                    sectionsHTML += `
                        <div class="detail-section">
                            <h4>${sectionName}</h4>
                            <div class="detail-section-content">
                                <pre style="white-space: pre-wrap; font-family: inherit; line-height: 1.6;">${content}</pre>
                            </div>
                        </div>
                    `;
                });
                
                return `
                    <div class="content-header">
                        <h2>æ€è€ƒè®°å½•è¯¦æƒ…</h2>
                        <p>ç³»ç»Ÿç‰ˆæœ¬: ${thought.systemVersion || DataStore.currentVersion}</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">${thought.title || 'æ— æ ‡é¢˜'}</div>
                                <div class="detail-id">${thought.id}</div>
                            </div>
                        </div>
                        
                        <div class="detail-content">
                            <div style="margin-bottom: 20px;">
                                <p><strong>æ€è€ƒç±»å‹:</strong> ${thought.type || 'æœªæŒ‡å®š'}</p>
                                <p><strong>æ—¥æœŸ:</strong> ${thought.date}</p>
                                <p><strong>æ ‡ç­¾:</strong> 
                                    ${thought.tags ? thought.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ') : 'æ— '}
                                </p>
                                ${thought.related && thought.related.length > 0 ? `
                                    <p><strong>å…³è”:</strong> 
                                        ${thought.related.map(id => {
                                            if (id.startsWith('#')) {
                                                return `<span class="tag" onclick="showThoughtDetail('${id}')" style="cursor: pointer;">${id}</span>`;
                                            } else if (id.startsWith('M-')) {
                                                return `<span class="tag" onclick="showModelDetail('${id}')" style="cursor: pointer;">${id}</span>`;
                                            }
                                            return `<span class="tag">${id}</span>`;
                                        }).join(' ')}
                                    </p>
                                ` : ''}
                            </div>
                            
                            ${sectionsHTML}
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-warning" onclick="editThought('${thought.id}')">
                                <i class="fas fa-edit"></i> ç¼–è¾‘
                            </button>
                            <button class="btn btn-secondary" onclick="UIManager.openSectionEditModal('${thought.id}')">
                                <i class="fas fa-pencil-alt"></i> åˆ†æ®µç¼–è¾‘
                            </button>
                            <button class="btn btn-primary" onclick="UIManager.openTagReviewModal('thought', '${thought.id}')">
                                <i class="fas fa-tags"></i> ç®¡ç†æ ‡ç­¾
                            </button>
                            <button class="btn btn-danger" onclick="openDeleteModal('thought', '${thought.id}')">
                                <i class="fas fa-trash"></i> åˆ é™¤
                            </button>
                        </div>
                    </div>
                `;
            },
            
            renderThoughtEdit: function(thought) {
                // ç®€åŒ–çš„ç¼–è¾‘ç•Œé¢
                let content = '';
                Object.keys(thought.sections || {}).forEach(sectionName => {
                    content += `${sectionName}:\n${thought.sections[sectionName]}\n\n`;
                });
                
                return `
                    <div class="content-header">
                        <h2>ç¼–è¾‘æ€è€ƒè®°å½•</h2>
                        <p>ä¿®æ”¹æ€è€ƒå†…å®¹</p>
                    </div>
                    
                    <div class="input-section">
                        <h3>ç¼–è¾‘æ€è€ƒå†…å®¹</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ€è€ƒID</label>
                            <input type="text" id="edit-thought-id-value" value="${thought.id}" style="width: 100%; padding: 10px;">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ€è€ƒæ ‡é¢˜</label>
                            <input type="text" id="edit-thought-title" value="${thought.title || ''}" style="width: 100%; padding: 10px;">
                        </div>
                        
                        <textarea id="edit-thought-content" style="width: 100%; padding: 15px; min-height: 400px;">${content}</textarea>
                        
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="UIManager.saveEditedThought('${thought.id}')">
                                <i class="fas fa-save"></i> ä¿å­˜æ›´æ”¹
                            </button>
                            <button class="btn btn-secondary" onclick="showThoughtDetail('${thought.id}')">
                                <i class="fas fa-times"></i> å–æ¶ˆ
                            </button>
                        </div>
                    </div>
                `;
            },
            
            saveEditedThought: function(oldId) {
                const newId = document.getElementById('edit-thought-id-value').value.trim();
                const title = document.getElementById('edit-thought-title').value.trim();
                const content = document.getElementById('edit-thought-content').value.trim();
                
                if (!newId) {
                    this.showAlert('æ€è€ƒIDä¸èƒ½ä¸ºç©º', 'warning');
                    return;
                }
                
                if (!content) {
                    this.showAlert('æ€è€ƒå†…å®¹ä¸èƒ½ä¸ºç©º', 'warning');
                    return;
                }
                
                // è§£æå†…å®¹
                const thought = DataStore.parseStructuredContent(content);
                thought.id = newId;
                thought.title = title || thought.title;
                
                // æ£€æŸ¥IDæ˜¯å¦å·²å­˜åœ¨ï¼ˆä¸”ä¸æ˜¯å½“å‰æ€è€ƒï¼‰
                if (newId !== oldId) {
                    const existingThought = DataStore.getThoughtById(newId);
                    if (existingThought) {
                        this.showAlert(`ID "${newId}" å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ID`, 'danger');
                        return;
                    }
                }
                
                // æ›´æ–°æ€è€ƒè®°å½•
                const success = DataStore.updateThought(oldId, thought);
                
                if (success) {
                    this.showAlert('æ€è€ƒè®°å½•å·²ä¿å­˜', 'success');
                    showThoughtDetail(newId);
                } else {
                    this.showAlert('ä¿å­˜å¤±è´¥', 'danger');
                }
            },
            
            renderModelDetail: function(model, isEditing = false) {
                if (isEditing) {
                    return this.renderModelEdit(model);
                }
                
                return `
                    <div class="content-header">
                        <h2>æ€ç»´æ¨¡å‹è¯¦æƒ…</h2>
                        <p>æ ¸å¿ƒåˆ†ææ¡†æ¶</p>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">${model.name}</div>
                                <div class="detail-id">${model.id}</div>
                            </div>
                        </div>
                        
                        <div class="detail-content">
                            <div class="detail-section">
                                <h4>æ¨¡å‹æè¿°</h4>
                                <div class="detail-section-content">
                                    <pre style="white-space: pre-wrap; font-family: inherit; line-height: 1.6;">${model.description}</pre>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>æ¨¡å‹ä¿¡æ¯</h4>
                                <div class="detail-section-content">
                                    <p><strong>åˆ›å»ºæ—¥æœŸ:</strong> ${model.date}</p>
                                    ${model.fromThought ? `<p><strong>æ¥æºæ€è€ƒ:</strong> <span class="tag" onclick="showThoughtDetail('${model.fromThought}')" style="cursor: pointer;">${model.fromThought}</span></p>` : ''}
                                    ${model.usageCount ? `<p><strong>ä½¿ç”¨æ¬¡æ•°:</strong> ${model.usageCount}</p>` : ''}
                                    ${model.lastUsed ? `<p><strong>æœ€åä½¿ç”¨:</strong> ${model.lastUsed}</p>` : ''}
                                    <p><strong>æ ‡ç­¾:</strong> 
                                        ${model.tags ? model.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ') : 'æ— '}
                                    </p>
                                </div>
                            </div>
                            
                            ${model.relatedModels && model.relatedModels.length > 0 ? `
                                <div class="detail-section">
                                    <h4>å…³è”æ¨¡å‹</h4>
                                    <div class="detail-section-content">
                                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                            ${model.relatedModels.map(id => `
                                                <span class="tag" onclick="showModelDetail('${id}')" style="cursor: pointer;">
                                                    ${id}
                                                </span>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-warning" onclick="editModel('${model.id}')">
                                <i class="fas fa-edit"></i> ç¼–è¾‘
                            </button>
                            <button class="btn btn-primary" onclick="UIManager.openTagReviewModal('model', '${model.id}')">
                                <i class="fas fa-tags"></i> ç®¡ç†æ ‡ç­¾
                            </button>
                            <button class="btn btn-danger" onclick="openDeleteModal('model', '${model.id}')">
                                <i class="fas fa-trash"></i> åˆ é™¤
                            </button>
                        </div>
                    </div>
                `;
            },
            
            renderModelEdit: function(model) {
                return `
                    <div class="content-header">
                        <h2>ç¼–è¾‘æ€ç»´æ¨¡å‹</h2>
                        <p>ä¿®æ”¹æ¨¡å‹ä¿¡æ¯</p>
                    </div>
                    
                    <div class="input-section">
                        <h3>ç¼–è¾‘æ¨¡å‹ä¿¡æ¯</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¨¡å‹ID</label>
                            <input type="text" id="edit-model-id-value" value="${model.id}" style="width: 100%; padding: 10px;" readonly>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¨¡å‹åç§°</label>
                            <input type="text" id="edit-model-name" value="${model.name}" style="width: 100%; padding: 10px;">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¥æºæ€è€ƒID</label>
                            <input type="text" id="edit-model-from-thought" value="${model.fromThought || ''}" style="width: 100%; padding: 10px;">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--primary-color);">æ¨¡å‹æè¿°</label>
                            <textarea id="edit-model-description" style="width: 100%; padding: 10px; min-height: 300px;">${model.description}</textarea>
                        </div>
                        
                        <div class="related-models-section">
                            <div class="related-models-header">
                                <h5 style="color: var(--primary-color); margin: 0;">å…³è”æ¨¡å‹</h5>
                            </div>
                            <div class="related-models-list" id="related-models-list">
                                ${model.relatedModels ? model.relatedModels.map(relatedId => `
                                    <div class="related-model-tag">
                                        ${relatedId}
                                        <span class="remove" onclick="UIManager.removeRelatedModel('${relatedId}')">Ã—</span>
                                    </div>
                                `).join('') : ''}
                            </div>
                            <div class="related-models-input">
                                <input type="text" id="related-model-input" placeholder="è¾“å…¥æ¨¡å‹ID (å¦‚ M-80)" style="flex: 1; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
                                <button class="btn btn-secondary" onclick="UIManager.addRelatedModel()" style="padding: 8px 15px;">
                                    <i class="fas fa-plus"></i> æ·»åŠ 
                                </button>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="UIManager.saveEditedModel('${model.id}')">
                                <i class="fas fa-save"></i> ä¿å­˜æ›´æ”¹
                            </button>
                            <button class="btn btn-secondary" onclick="showModelDetail('${model.id}')">
                                <i class="fas fa-times"></i> å–æ¶ˆ
                            </button>
                        </div>
                    </div>
                `;
            },
            
            saveEditedModel: function(id) {
                const name = document.getElementById('edit-model-name').value.trim();
                const fromThought = document.getElementById('edit-model-from-thought').value.trim();
                const description = document.getElementById('edit-model-description').value.trim();
                
                if (!name) {
                    this.showAlert('æ¨¡å‹åç§°ä¸èƒ½ä¸ºç©º', 'warning');
                    return;
                }
                
                if (!description) {
                    this.showAlert('æ¨¡å‹æè¿°ä¸èƒ½ä¸ºç©º', 'warning');
                    return;
                }
                
                const model = DataStore.getModelById(id);
                if (!model) {
                    this.showAlert('æ‰¾ä¸åˆ°æ¨¡å‹', 'danger');
                    return;
                }
                
                // æ›´æ–°æ¨¡å‹
                model.name = name;
                model.fromThought = fromThought || null;
                model.description = description;
                
                const success = DataStore.updateModel(id, model);
                
                if (success) {
                    this.showAlert('æ€ç»´æ¨¡å‹å·²ä¿å­˜', 'success');
                    showModelDetail(id);
                } else {
                    this.showAlert('ä¿å­˜å¤±è´¥', 'danger');
                }
            },
            
            addRelatedModel: function() {
                const input = document.getElementById('related-model-input');
                if (!input || !input.value.trim()) return;
                
                const modelId = input.value.trim();
                
                // æ£€æŸ¥æ¨¡å‹æ˜¯å¦å­˜åœ¨
                const model = DataStore.getModelById(modelId);
                if (!model) {
                    this.showAlert(`æ¨¡å‹ ${modelId} ä¸å­˜åœ¨`, 'warning');
                    return;
                }
                
                // æ·»åŠ åˆ°åˆ—è¡¨
                const container = document.getElementById('related-models-list');
                const tag = document.createElement('div');
                tag.className = 'related-model-tag';
                tag.innerHTML = `
                    ${modelId}
                    <span class="remove" onclick="UIManager.removeRelatedModel('${modelId}')">Ã—</span>
                `;
                container.appendChild(tag);
                
                input.value = '';
            },
            
            removeRelatedModel: function(modelId) {
                const tags = document.querySelectorAll('.related-model-tag');
                tags.forEach(tag => {
                    if (tag.textContent.includes(modelId)) {
                        tag.remove();
                    }
                });
            }
        };
        
        // ==================== å…¨å±€å‡½æ•° ====================
        // ä¿æŒæ‰€æœ‰åŸæœ‰å…¨å±€å‡½æ•°ä¸å˜
        function parseAndPreview() {
            const input = document.getElementById('structured-input');
            if (!input || !input.value.trim()) {
                alert('è¯·è¾“å…¥è¦è§£æçš„å†…å®¹');
                return;
            }
            
            const thought = DataStore.parseStructuredContent(input.value);
            const previewDiv = document.getElementById('parse-preview');
            
            if (previewDiv) {
                previewDiv.style.display = 'block';
                let sectionsHtml = '';
                
                Object.keys(thought.sections).forEach(sectionName => {
                    const content = thought.sections[sectionName];
                    sectionsHtml += `
                        <div style="margin-bottom: 15px; padding: 10px; background-color: #f8f9fa; border-radius: 4px;">
                            <div style="font-weight: bold; color: var(--accent-color); margin-bottom: 5px;">
                                ${sectionName}
                            </div>
                            <div style="font-size: 0.9rem; color: var(--text-light); max-height: 100px; overflow: auto;">
                                ${content.substring(0, 200)}${content.length > 200 ? '...' : ''}
                            </div>
                        </div>
                    `;
                });
                
                previewDiv.innerHTML = `
                    <h4><i class="fas fa-check-circle"></i> è§£ææˆåŠŸ</h4>
                    <p><strong>æ€è€ƒID:</strong> ${thought.id}</p>
                    <p><strong>æ€è€ƒä¸»é¢˜:</strong> ${thought.title}</p>
                    <p><strong>æ€è€ƒç±»å‹:</strong> ${thought.type || 'æœªè¯†åˆ«'}</p>
                    <p><strong>ç³»ç»Ÿç‰ˆæœ¬:</strong> ${thought.systemVersion}</p>
                    <p><strong>å…³é”®æ ‡è®°:</strong> ${thought.tags ? thought.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ') : 'æ— '}</p>
                    <p><strong>è§£æåˆ°çš„éƒ¨åˆ† (${Object.keys(thought.sections).length}):</strong> ${Object.keys(thought.sections).map(s => `<span class="tag">${s}</span>`).join(' ')}</p>
                    ${sectionsHtml}
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--success-color);">
                        <i class="fas fa-check"></i> è§£æå®Œæˆï¼Œç‚¹å‡»"ä¿å­˜æ€è€ƒ"æŒ‰é’®ä¿å­˜åˆ°ç³»ç»Ÿ
                    </div>
                `;
            }
        }
        
        function saveStructuredThought() {
            const input = document.getElementById('structured-input');
            if (!input || !input.value.trim()) {
                alert('è¯·è¾“å…¥æ€è€ƒå†…å®¹');
                return;
            }
            
            const thought = DataStore.addStructuredThought(input.value);
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            UIManager.showAlert(`æ€è€ƒè®°å½•å·²ä¿å­˜: ${thought.id}ã€‚ç³»ç»Ÿå·²æ™ºèƒ½è§£æå¹¶å½’ç±»ï¼`, 'success');
            
            // åˆ·æ–°å½“å‰è§†å›¾
            UIManager.loadView(UIManager.currentView);
            
            // æ›´æ–°ç´¢å¼•å’Œæ ‡ç­¾äº‘
            DataStore.updateUIStats();
            
            console.log('ç»“æ„åŒ–æ€è€ƒè®°å½•å·²ä¿å­˜:', thought);
        }
        
        function saveModel() {
            const idInput = document.getElementById('model-id');
            const nameInput = document.getElementById('model-name');
            const fromThoughtInput = document.getElementById('model-from-thought');
            const descInput = document.getElementById('model-description');
            
            if (!nameInput || !nameInput.value.trim()) {
                alert('è¯·è¾“å…¥æ¨¡å‹åç§°');
                return;
            }
            
            if (!descInput || !descInput.value.trim()) {
                alert('è¯·è¾“å…¥æ¨¡å‹æè¿°');
                return;
            }
            
            const model = DataStore.addModel({
                id: idInput && idInput.value.trim() ? idInput.value.trim() : undefined,
                name: nameInput.value.trim(),
                description: descInput.value.trim(),
                date: new Date().toISOString().split('T')[0],
                tags: [],
                fromThought: fromThoughtInput && fromThoughtInput.value.trim() ? fromThoughtInput.value.trim() : null
            });
            
            // æ¸…ç©ºè¾“å…¥
            if (idInput) idInput.value = '';
            if (nameInput) nameInput.value = '';
            if (fromThoughtInput) fromThoughtInput.value = '';
            if (descInput) descInput.value = '';
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            UIManager.showAlert(`æ€ç»´æ¨¡å‹å·²ä¿å­˜: ${model.id}`, 'success');
            
            // åˆ·æ–°å½“å‰è§†å›¾
            UIManager.loadView(UIManager.currentView);
            
            // æ›´æ–°ç´¢å¼•
            DataStore.updateUIStats();
        }
        
        function showThoughtDetail(id, isEditing = false) {
            const thought = DataStore.getThoughtById(id);
            const contentArea = document.getElementById('content-area');
            
            if (!thought) {
                contentArea.innerHTML = '<div class="empty-state"><i class="fas fa-search"></i><p>æœªæ‰¾åˆ°æ€è€ƒè®°å½•</p></div>';
                return;
            }
            
            contentArea.innerHTML = UIManager.renderThoughtDetail(thought, isEditing);
        }
        
        function showModelDetail(id, isEditing = false) {
            const model = DataStore.getModelById(id);
            const contentArea = document.getElementById('content-area');
            
            if (!model) {
                contentArea.innerHTML = '<div class="empty-state"><i class="fas fa-search"></i><p>æœªæ‰¾åˆ°æ€ç»´æ¨¡å‹</p></div>';
                return;
            }
            
            contentArea.innerHTML = UIManager.renderModelDetail(model, isEditing);
        }
        
        function editThought(id) {
            showThoughtDetail(id, true);
        }
        
        function editModel(id) {
            showModelDetail(id, true);
        }
        
        // ==================== æ›´å¤šå…¨å±€å‡½æ•° ====================
        // ä¿æŒåŸæœ‰æ‰€æœ‰å…¨å±€å‡½æ•°ä¸å˜
        
        // ==================== åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            UIManager.init();
        });
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.addEventListener('click', function(event) {
            const deleteModal = document.getElementById('delete-modal');
            const tagReviewModal = document.getElementById('tag-review-modal');
            const sectionEditModal = document.getElementById('section-edit-modal');
            const timelineEditModal = document.getElementById('timeline-edit-modal');
            
            if (event.target === deleteModal) {
                UIManager.closeDeleteModal();
            }
            
            if (event.target === tagReviewModal) {
                UIManager.closeTagReviewModal();
            }
            
            if (event.target === sectionEditModal) {
                UIManager.closeSectionEditModal();
            }
            
            if (event.target === timelineEditModal) {
                UIManager.closeTimelineEditModal();
            }
        });
    </script>
</body>
</html>

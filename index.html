<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ç»´ååŒå¤„ç†å™¨ - æ™ºèƒ½è§£æå¢å¼ºç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- å¼•å…¥ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ -->
    <script src="data-manager.js"></script>
    
    <!-- ç§»åŠ¨ç«¯æ£€æµ‹ -->
    <script>
        // ç§»åŠ¨ç«¯æ£€æµ‹å’Œé‡å®šå‘
        (function() {
            const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const screenWidth = window.innerWidth;
            
            // å¦‚æœæ˜¯ç§»åŠ¨è®¾å¤‡ä¸”å±å¹•å®½åº¦å°äº768pxï¼Œé‡å®šå‘åˆ°ç§»åŠ¨ç«¯
            if ((isMobile || screenWidth < 768) && 
                !window.location.href.includes('mobile') && 
                !window.location.href.includes('force-desktop')) {
                
                // è¯¢é—®ç”¨æˆ·æ˜¯å¦åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯
                if (confirm('æ£€æµ‹åˆ°æ‚¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®¿é—®ï¼Œæ˜¯å¦åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯ä¼˜åŒ–ç•Œé¢ï¼Ÿ')) {
                    window.location.href = 'v16-mobile-fixed.html';
                }
            }
        })();
    </script>
    
    <style>
        /* [ä¿æŒåŸæ¥çš„æ‰€æœ‰CSSæ ·å¼ä¸å˜] */
        :root {
            --primary-color: #1a237e;
            --secondary-color: #283593;
            --accent-color: #5c6bc0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-bg: #f8f9fa;
            --dark-bg: #1a237e;
            --border-color: #e1e5eb;
            --text-color: #333;
            --text-light: #666;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f9fc;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .top-bar {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            flex-shrink: 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            font-size: 24px;
        }
        
        .logo-text {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .system-info {
            font-size: 14px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .current-view {
            font-weight: 500;
            background: rgba(255, 255, 255, 0.15);
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 280px;
            background-color: #fff;
            border-right: 1px solid #e1e5eb;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.03);
            flex-shrink: 0;
        }
        
        .nav-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .nav-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-section h3 i {
            font-size: 14px;
        }
        
        .nav-links {
            list-style: none;
        }
        
        .nav-links li {
            margin-bottom: 10px;
        }
        
        .nav-links a {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            color: #555;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 14.5px;
            cursor: pointer;
        }
        
        .nav-links a:hover {
            background-color: #f0f4f9;
            color: var(--primary-color);
        }
        
        .nav-links a.active {
            background-color: #e8edff;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .nav-links a i {
            margin-right: 10px;
            width: 18px;
            text-align: center;
        }
        
        /* ç‰ˆæœ¬é€‰æ‹©å™¨ */
        .version-selector {
            padding: 15px 20px;
            background-color: #f9fbfd;
            border-top: 1px solid #e1e5eb;
        }
        
        .version-selector select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d9e6;
            border-radius: 4px;
            background-color: white;
            font-size: 14px;
            color: #333;
        }
        
        /* ä¸­é—´ä¸»å†…å®¹åŒº */
        .content-area {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background-color: #fff;
        }
        
        .content-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .content-header h2 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .content-header p {
            color: #666;
            font-size: 15px;
        }
        
        /* æ ¸å¿ƒèµ„äº§æ€»è§ˆæ ·å¼ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-top: 4px solid var(--primary-color);
        }
        
        .stat-card h3 {
            font-size: 16px;
            color: #555;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-desc {
            font-size: 14px;
            color: #777;
            margin-top: 5px;
        }
        
        /* æ€è€ƒè®°å½•åˆ—è¡¨æ ·å¼ */
        .records-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .record-card {
            background-color: white;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #4caf50;
            transition: transform 0.2s;
            cursor: pointer;
            position: relative;
        }
        
        .record-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .record-id {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .record-title {
            font-size: 17px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #333;
        }
        
        .record-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .record-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        /* æ¨¡å‹åˆ—è¡¨æ ·å¼ */
        .models-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .model-card {
            background-color: white;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #ff9800;
            transition: transform 0.2s;
            cursor: pointer;
            position: relative;
        }
        
        .model-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .model-id {
            font-weight: 600;
            color: #ff9800;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .model-name {
            font-size: 17px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #333;
        }
        
        .model-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .model-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        /* å¡ç‰‡æ“ä½œæŒ‰é’® */
        .card-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .record-card:hover .card-actions,
        .model-card:hover .card-actions {
            opacity: 1;
        }
        
        .action-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-icon.edit {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
        }
        
        .action-icon.delete {
            background-color: rgba(244, 67, 54, 0.1);
            color: var(--danger-color);
        }
        
        .action-icon:hover {
            transform: scale(1.1);
        }
        
        /* è¯¦ç»†å†…å®¹æ ·å¼ */
        .detail-view {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .detail-title {
            font-size: 22px;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .detail-id {
            font-size: 16px;
            color: #666;
            background-color: #f0f4f9;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .detail-content {
            line-height: 1.6;
            font-size: 15.5px;
            color: #444;
        }
        
        .detail-content p {
            margin-bottom: 15px;
        }
        
        /* è¾“å…¥åŒºåŸŸæ ·å¼ */
        .input-section {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .input-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        textarea, input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            resize: vertical;
            min-height: 300px;
            margin-bottom: 15px;
            font-family: monospace;
            line-height: 1.5;
        }
        
        input[type="text"] {
            min-height: auto;
            margin-bottom: 15px;
            font-family: inherit;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #4959c1;
        }
        
        .btn-secondary {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background-color: #e9ecef;
        }
        
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #43a047;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #fb8c00;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #e53935;
        }
        
        /* æ ‡ç­¾æ ·å¼ */
        .tag {
            display: inline-block;
            padding: 4px 10px;
            background-color: rgba(92, 107, 192, 0.1);
            color: var(--accent-color);
            border-radius: 4px;
            font-size: 0.85rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        /* è§£æé¢„è§ˆ */
        .parse-preview {
            background-color: white;
            border: 1px solid #e3f2fd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .parse-preview h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        /* å³ä¾§åŠŸèƒ½é¢æ¿ */
        .right-panel {
            width: 320px;
            background-color: #fff;
            border-left: 1px solid #e1e5eb;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.03);
            flex-shrink: 0;
        }
        
        .search-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .search-box {
            position: relative;
            margin-bottom: 15px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 1px solid #d1d9e6;
            border-radius: 6px;
            font-size: 14px;
            background-color: #f9fbfd;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
        }
        
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .filter-options select {
            padding: 8px 12px;
            border: 1px solid #d1d9e6;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
        }
        
        .status-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .status-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .status-label {
            color: #666;
        }
        
        .status-value {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        /* æ–°å¢ï¼šæ¨¡å‹å…³è”ç½‘ç»œæ ·å¼ */
        .network-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .network-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .network-graph {
            height: 200px;
            background-color: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            margin-top: 10px;
            border: 1px dashed #e1e5eb;
        }
        
        /* æ–°å¢ï¼šæ•°æ®æ“ä½œæ ·å¼ */
        .data-section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .data-section h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .data-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .data-btn {
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .data-btn.export {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .data-btn.backup {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .data-btn.import {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .data-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .how-to-use {
            padding: 20px;
            flex: 1;
        }
        
        .how-to-use h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .steps-list {
            list-style-type: none;
            counter-reset: step-counter;
        }
        
        .steps-list li {
            margin-bottom: 15px;
            padding-left: 30px;
            position: relative;
            font-size: 14px;
            color: #555;
            line-height: 1.5;
        }
        
        .steps-list li:before {
            counter-increment: step-counter;
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background-color: var(--primary-color);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }
        
        /* æ ¼å¼æç¤ºæ ·å¼ */
        .format-hint {
            background-color: #f0f8ff;
            border-left: 4px solid #4dabf7;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 6px 6px 0;
        }
        
        .format-examples {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .format-example {
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            white-space: pre-wrap;
            position: relative;
        }
        
        .format-example-title {
            position: absolute;
            top: -10px;
            left: 15px;
            background-color: var(--accent-color);
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .right-panel {
                width: 280px;
            }
        }
        
        @media (max-width: 992px) {
            .right-panel {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 240px;
            }
            
            .stats-grid,
            .records-list,
            .models-list {
                grid-template-columns: 1fr;
            }
            
            .top-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px 20px;
            }
            
            .system-info {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
        }
        
        /* ç©ºçŠ¶æ€æç¤º */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #888;
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #ccc;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(26, 35, 126, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .modal {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: flex-end;
        }
        
        /* è¯¦æƒ…é¡µåˆ†æ®µæ ·å¼ */
        .detail-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .detail-section h4 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-section-content {
            padding-left: 10px;
        }
        
        /* æ ‡ç­¾å¤æ ¸å®¹å™¨ */
        .tag-review-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border: 1px solid var(--border-color);
        }
        
        .tag-review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .tag-review-actions {
            display: flex;
            gap: 10px;
        }
        
        /* è¡ŒåŠ¨æŒ‰é’®ç»„ */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        /* ç´¢å¼•åˆ—è¡¨æ ·å¼ */
        .index-panel {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .index-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .index-item {
            padding: 8px 12px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .index-item:last-child {
            border-bottom: none;
        }
        
        .index-item-id {
            font-weight: bold;
            color: var(--accent-color);
            min-width: 60px;
        }
        
        .index-item-title {
            flex: 1;
            font-size: 0.95rem;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            margin: 0 10px;
        }
        
        .index-item-actions {
            display: flex;
            gap: 5px;
        }
        
        .index-item-action {
            cursor: pointer;
            padding: 3px 5px;
            border-radius: 3px;
            transition: background-color 0.2s;
        }
        
        .index-item-action:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        /* ç³»ç»ŸçŠ¶æ€å¡ç‰‡ */
        .system-status-card {
            background-color: #e8f4fc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* æ–°å¢ï¼šæ—¶é—´çº¿æ ·å¼ */
        .timeline-container {
            position: relative;
            margin: 40px 0;
            padding-left: 30px;
        }
        
        .timeline-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--secondary-color);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .timeline-item:hover {
            transform: translateX(5px);
        }
        
        .timeline-dot {
            position: absolute;
            left: -36px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--secondary-color);
            border: 3px solid white;
            z-index: 2;
            transition: var(--transition);
        }
        
        .timeline-item:hover .timeline-dot {
            background: var(--primary-color);
            transform: scale(1.2);
        }
        
        .timeline-content {
            background: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: var(--shadow);
        }
        
        .timeline-version {
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .timeline-date {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        /* æ–°å¢ï¼šå…³è”ç½‘ç»œå¯è§†åŒ– */
        .network-visualization {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .network-node {
            padding: 8px 12px;
            background-color: rgba(92, 107, 192, 0.1);
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(92, 107, 192, 0.2);
        }
        
        .network-node:hover {
            background-color: rgba(92, 107, 192, 0.2);
            transform: translateY(-2px);
        }
        
        .network-node.center {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        .network-connection {
            height: 2px;
            background: var(--border-color);
            flex: 1;
            max-width: 30px;
        }
        
        /* ==================== æ–°å¢ï¼šåˆ†æ®µç¼–è¾‘æ ·å¼ ==================== */
        .section-editor-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .section-tab {
            padding: 8px 16px;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .section-tab:hover {
            background-color: #e9ecef;
        }
        
        .section-tab.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .section-editor {
            display: none;
        }
        
        .section-editor.active {
            display: block;
        }
        
        .section-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .section-editor-header h4 {
            color: var(--primary-color);
            margin: 0;
        }
        
        .section-editor textarea {
            min-height: 200px;
        }
        
        .section-preview {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            margin-top: 10px;
            border: 1px solid var(--border-color);
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        /* å¯ç¼–è¾‘IDæ ·å¼ */
        .editable-id {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .editable-id-label {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .editable-id-input {
            flex: 1;
            max-width: 200px;
        }
        
        /* æ–°å¢ï¼šå…³è”æ¨¡å‹ç¼–è¾‘æ ·å¼ */
        .related-models-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .related-models-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .related-models-input {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .related-models-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }
        
        .related-models-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            max-height: 120px;
            overflow-y: auto;
            padding: 5px;
        }
        
        .related-model-tag {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .related-model-tag .remove {
            cursor: pointer;
            color: var(--danger-color);
            font-size: 0.8rem;
        }
        
        .related-model-tag .remove:hover {
            color: #d32f2f;
        }
        
        .auto-extract-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .auto-extract-btn:hover {
            background-color: var(--secondary-color);
        }
        
        /* ==================== æ–°å¢ï¼šæ¨¡å‹æè¿°æå–æŒ‰é’®æ ·å¼ ==================== */
        .model-description-extract-btn {
            background-color: var(--warning-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .model-description-extract-btn:hover {
            background-color: #e68900;
        }
        
        .model-description-extract-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .model-description-extract-info {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 10px;
            padding: 8px 12px;
            background-color: #f0f7ff;
            border-radius: 4px;
            border-left: 3px solid var(--accent-color);
        }
        
        /* ==================== æ–°å¢ï¼šæ—¶é—´çº¿ç¼–è¾‘æ ·å¼ ==================== */
        .timeline-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .timeline-edit-actions {
            position: absolute;
            top: 5px;
            right: 5px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .timeline-item:hover .timeline-edit-actions {
            opacity: 1;
        }
        
        .timeline-edit-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        
        .timeline-edit-btn.edit {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
        }
        
        .timeline-edit-btn.delete {
            background-color: rgba(244, 67, 54, 0.1);
            color: var(--danger-color);
        }
        
        .timeline-edit-btn:hover {
            transform: scale(1.1);
        }
        
        /* æ—¶é—´çº¿è¯¦æƒ…æ ·å¼ */
        .timeline-detail-view {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
        }
        
        .timeline-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeef5;
        }
        
        .timeline-detail-title {
            font-size: 22px;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .timeline-detail-date {
            font-size: 16px;
            color: #666;
            background-color: #f0f4f9;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .timeline-detail-content {
            line-height: 1.6;
            font-size: 15.5px;
            color: #444;
            margin-top: 15px;
        }
        
        /* æ—¶é—´çº¿ç¼–è¾‘è¡¨å• */
        .timeline-edit-form {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .timeline-form-group {
            margin-bottom: 15px;
        }
        
        .timeline-form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .timeline-form-group input,
        .timeline-form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }
        
        .timeline-form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
    <div class="top-bar">
        <div class="logo">
            <div class="logo-icon">ğŸ§ </div>
            <div class="logo-text">æ€ç»´ååŒå¤„ç†å™¨</div>
        </div>
        <div class="system-info">
            <span>å½“å‰ç‰ˆæœ¬: <strong id="current-version">v22.48</strong></span>
            <span style="margin: 0 5px;">|</span>
            <span>æ¨¡å‹æ€»æ•°: <strong id="total-models">0</strong></span>
            <span style="margin: 0 5px;">|</span>
            <span>æ€è€ƒè®°å½•: <strong id="total-thoughts">0</strong></span>
            <span style="margin: 0 5px;">|</span>
            <span>æ ‡ç­¾æ•°: <strong id="total-tags">0</strong></span>
        </div>
        <div class="current-view" id="current-view">æ ¸å¿ƒèµ„äº§æ€»è§ˆ</div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-container">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <div class="sidebar">
            <div class="nav-section">
                <h3><i class="fas fa-compass"></i> æ ¸å¿ƒå¯¼èˆª</h3>
                <ul class="nav-links">
                    <li><a href="#" class="active" data-view="overview"><i class="fas fa-chart-pie"></i> æ ¸å¿ƒèµ„äº§æ€»è§ˆ</a></li>
                    <li><a href="#" data-view="add-structured"><i class="fas fa-plus-circle"></i> ç»“æ„åŒ–è¾“å…¥æ€è€ƒ</a></li>
                    <li><a href="#" data-view="thoughts"><i class="fas fa-list-ul"></i> æ€è€ƒç›®å½•å®Œæ•´æ¸…å•</a></li>
                    <li><a href="#" data-view="models"><i class="fas fa-cube"></i> æ ¸å¿ƒæ€ç»´æ¨¡å‹ç´¢å¼•</a></li>
                    <li><a href="#" data-view="add-model"><i class="fas fa-plus-square"></i> åˆ›å»ºæ€ç»´æ¨¡å‹</a></li>
                    <li><a href="#" data-view="keywords"><i class="fas fa-search"></i> æ ‡ç­¾åˆ†ç±»æ£€ç´¢</a></li>
                    <!-- æ–°å¢å¯¼èˆªé¡¹ -->
                    <li><a href="#" data-view="network-analysis"><i class="fas fa-project-diagram"></i> æ¨¡å‹å…³è”ç½‘ç»œåˆ†æ</a></li>
                    <li><a href="#" data-view="timeline"><i class="fas fa-road"></i> ç³»ç»Ÿæ¼”è¿›å†ç¨‹</a></li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3><i class="fas fa-tools"></i> ç³»ç»Ÿå·¥å…·</h3>
                <ul class="nav-links">
                    <li><a href="#" data-view="how-to-use"><i class="fas fa-question-circle"></i> å¦‚ä½•ä½¿ç”¨æœ¬ç³»ç»Ÿ</a></li>
                    <li><a href="#" data-view="milestones"><i class="fas fa-road"></i> ç³»ç»Ÿæ¼”è¿›é‡Œç¨‹ç¢‘</a></li>
                    <li><a href="#" data-view="architecture"><i class="fas fa-sitemap"></i> ç³»ç»Ÿæ¶æ„ç‰¹æ€§</a></li>
                    <li><a href="#" data-view="tag-review"><i class="fas fa-tags"></i> æ ‡ç­¾å¤æ ¸ä¸­å¿ƒ</a></li>
                    <!-- æ–°å¢å¯¼èˆªé¡¹ -->
                    <li><a href="#" data-view="data-management"><i class="fas fa-database"></i> æ•°æ®ç®¡ç†ä¸å¤‡ä»½</a></li>
                </ul>
            </div>
            
            <div class="version-selector">
                <label for="version-select">æ•°æ®ç‰ˆæœ¬:</label>
                <select id="version-select">
                    <option value="initial">åˆå§‹ç‰ˆæœ¬</option>
                    <option value="current" selected>å½“å‰ç‰ˆæœ¬ (æœ¬åœ°å­˜å‚¨)</option>
                </select>
            </div>
        </div>
        
        <!-- ä¸­é—´ä¸»å†…å®¹åŒº -->
        <div class="content-area" id="content-area">
            <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            <div id="loading" class="loading" style="margin: 100px auto;"></div>
        </div>
        
        <!-- å³ä¾§åŠŸèƒ½é¢æ¿ -->
        <div class="right-panel">
            <div class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="æœç´¢æ€è€ƒè®°å½•æˆ–æ¨¡å‹...">
                </div>
                <div class="filter-options">
                    <select id="category-filter">
                        <option value="all">æ‰€æœ‰ç±»åˆ«</option>
                        <option value="thought">æ€è€ƒè®°å½•</option>
                        <option value="model">æ€ç»´æ¨¡å‹</option>
                        <option value="tag">æ ‡ç­¾</option>
                    </select>
                    <select id="theme-filter">
                        <option value="all">æ‰€æœ‰ä¸»é¢˜</option>
                        <option value="emotion">æƒ…æ„Ÿ/å…³ç³»</option>
                        <option value="philosophy">å“²å­¦/å­˜åœ¨</option>
                        <option value="growth">æˆé•¿/å†ç¨‹</option>
                        <option value="society">ç¤¾ä¼š/ç³»ç»Ÿ</option>
                        <option value="aesthetics">è‰ºæœ¯/è¡¨è¾¾</option>
                    </select>
                </div>
            </div>
            
            <div class="status-section">
                <h3><i class="fas fa-heartbeat"></i> ç³»ç»Ÿå¥åº·çŠ¶æ€</h3>
                <div class="status-item">
                    <span class="status-label">æ•°æ®å®Œæ•´æ€§</span>
                    <span class="status-value" id="data-integrity">100%</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å…³è”ç½‘ç»œ</span>
                    <span class="status-value" id="network-health">å®Œå¥½</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æ¨¡å‹å¯æ‹“å±•æ€§</span>
                    <span class="status-value" id="extensibility">å¼€æ”¾</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å­˜å‚¨çŠ¶æ€</span>
                    <span class="status-value" id="storage-status">æ­£å¸¸</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æœ€åä¿å­˜</span>
                    <span class="status-value" id="last-saved">åˆšåˆš</span>
                </div>
            </div>
            
            <!-- æ–°å¢ï¼šæ¨¡å‹å…³è”ç½‘ç»œ -->
            <div class="network-section">
                <h3><i class="fas fa-project-diagram"></i> æ¨¡å‹å…³è”ç½‘ç»œ</h3>
                <p style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 10px;">
                    å½“å‰é€‰ä¸­æ¨¡å‹çš„å…³è”ç½‘ç»œ
                </p>
                <div class="network-graph" id="network-graph">
                    <div>
                        <i class="fas fa-project-diagram" style="font-size: 3rem; margin-bottom: 10px; color: #ccc;"></i>
                        <p>é€‰æ‹©æ¨¡å‹æŸ¥çœ‹å…³è”ç½‘ç»œ</p>
                    </div>
                </div>
            </div>
            
            <!-- æ–°å¢ï¼šæ•°æ®æ“ä½œ -->
            <div class="data-section">
                <h3><i class="fas fa-database"></i> æ•°æ®æ“ä½œ</h3>
                <div class="data-actions">
                    <button class="data-btn export" id="export-current-btn">
                        <i class="fas fa-file-export"></i> å¯¼å‡ºå½“å‰é¡¹ç›®
                    </button>
                    <button class="data-btn backup" id="backup-data-btn">
                        <i class="fas fa-sync-alt"></i> å¤‡ä»½å…¨éƒ¨æ•°æ®
                    </button>
                    <button class="data-btn import" id="import-data-btn">
                        <i class="fas fa-file-import"></i> å¯¼å…¥æ•°æ®
                    </button>
                    <button class="data-btn backup" id="export-all-btn">
                        <i class="fas fa-download"></i> å¯¼å‡ºå…¨éƒ¨æ•°æ®
                    </button>
                </div>
            </div>
            
            <div class="how-to-use">
                <h3><i class="fas fa-lightbulb"></i> å¿«é€Ÿä½¿ç”¨æŒ‡å—</h3>
                <ol class="steps-list">
                    <li>æ ¹æ®æƒ…ç»ª/é—®é¢˜å®šä½æƒ…å¢ƒ</li>
                    <li>å¿«é€Ÿæµè§ˆç›¸å…³æ ¸å¿ƒæ¨¡å‹</li>
                    <li>è°ƒç”¨å…·ä½“çš„æ€ç»´/è¡ŒåŠ¨è¦ç‚¹</li>
                    <li>åœ¨è„‘æµ·ä¸­æ¼”ç»ƒæˆ–å†™åœ¨çº¸ä¸Š</li>
                    <li>å°†çŸ¥è¯†è½¬åŒ–ä¸ºè‡ªæˆ‘æ™ºæ…§</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- ç¡®è®¤åˆ é™¤æ¨¡æ€æ¡† -->
    <div id="delete-modal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h3>ç¡®è®¤åˆ é™¤</h3>
            <p id="delete-message">ç¡®å®šè¦åˆ é™¤æ­¤é¡¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">å–æ¶ˆ</button>
                <button class="btn btn-danger" onclick="confirmDelete()">åˆ é™¤</button>
            </div>
        </div>
    </div>

    <!-- æ ‡ç­¾å¤æ ¸æ¨¡æ€æ¡† -->
    <div id="tag-review-modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 600px;">
            <h3><i class="fas fa-tags"></i> æ ‡ç­¾å¤æ ¸ä¸ç®¡ç†</h3>
            <p style="margin-bottom: 20px; color: var(--text-light);">æ£€æŸ¥å¹¶ç®¡ç†å½“å‰é¡¹ç›®çš„æ ‡ç­¾ï¼Œç¡®ä¿åˆ†ç±»å‡†ç¡®</p>
            
            <div class="tag-review-container">
                <div class="tag-review-header">
                    <h4 id="tag-review-title">å½“å‰æ ‡ç­¾</h4>
                    <div class="tag-review-actions">
                        <button class="btn btn-secondary btn-sm" onclick="addNewTag()" style="padding: 5px 10px; font-size: 0.9rem;">
                            <i class="fas fa-plus"></i> æ–°å¢
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="saveTagReview()" style="padding: 5px 10px; font-size: 0.9rem;">
                            <i class="fas fa-save"></i> ä¿å­˜
                        </button>
                    </div>
                </div>
                
                <div id="current-tags-container">
                    <!-- å½“å‰æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="tag-input-container" style="display: flex; margin-top: 15px;">
                    <input type="text" id="new-tag-input" placeholder="è¾“å…¥æ–°æ ‡ç­¾..." style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px 0 0 4px;" onkeypress="if(event.key === 'Enter') addTagFromInput()">
                    <button onclick="addTagFromInput()" style="padding: 10px 15px; background-color: var(--accent-color); color: white; border: none; border-radius: 0 4px 4px 0; cursor: pointer;">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                
                <div style="margin-top: 25px;">
                    <h5 style="margin-bottom: 15px; color: var(--primary-color);">æ ‡ç­¾åˆ†ç±»å»ºè®®</h5>
                    
                    <div class="tag-category" style="margin-bottom: 20px;">
                        <div class="tag-category-title" style="font-weight: 600; color: var(--primary-color); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed var(--border-color);">æ ¸å¿ƒæ¨¡å‹æ ‡ç­¾</div>
                        <div class="category-tags" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ§  æ ¸å¿ƒæ¨¡å‹')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ§  æ ¸å¿ƒæ¨¡å‹</span>
                            <span class="category-tag" onclick="addSuggestedTag('ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§</span>
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ</span>
                        </div>
                    </div>
                    
                    <div class="tag-category" style="margin-bottom: 20px;">
                        <div class="tag-category-title" style="font-weight: 600; color: var(--primary-color); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed var(--border-color);">å…³ç³»ä¸æƒ…æ„Ÿæ ‡ç­¾</div>
                        <div class="category-tags" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ</span>
                            <span class="category-tag" onclick="addSuggestedTag('ğŸ’” å¤±å»/å‘Šåˆ«')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">ğŸ’” å¤±å»/å‘Šåˆ«</span>
                            <span class="category-tag" onclick="addSuggestedTag('âš–ï¸ æœŸæœ›/é”™ä½')" style="padding: 5px 10px; background-color: white; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.85rem; cursor: pointer; transition: var(--transition);">âš–ï¸ æœŸæœ›/é”™ä½</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeTagReviewModal()">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="applyTagReview()">åº”ç”¨æ›´æ”¹</button>
            </div>
        </div>
    </div>

    <!-- åˆ†æ®µç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="section-edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 800px;">
            <h3><i class="fas fa-edit"></i> åˆ†æ®µç¼–è¾‘æ€è€ƒå†…å®¹</h3>
            <p style="margin-bottom: 20px; color: var(--text-light);">å¯å•ç‹¬ç¼–è¾‘å„ä¸ªæ¿å—å†…å®¹</p>
            
            <div class="editable-id" id="id-editor">
                <span class="editable-id-label">æ€è€ƒID:</span>
                <input type="text" id="edit-thought-id" class="editable-id-input" placeholder="#123">
                <button class="btn btn-secondary btn-sm" onclick="validateThoughtId()" style="padding: 5px 10px; font-size: 0.9rem;">
                    <i class="fas fa-check"></i> éªŒè¯ID
                </button>
            </div>
            
            <div class="section-editor-tabs" id="section-tabs">
                <!-- æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div id="section-editors-container">
                <!-- ç¼–è¾‘å™¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeSectionEditModal()">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="saveSectionEdits()">
                    <i class="fas fa-save"></i> ä¿å­˜æ‰€æœ‰æ›´æ”¹
                </button>
            </div>
        </div>
    </div>

    <!-- æ—¶é—´çº¿ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="timeline-edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 600px;">
            <h3><i class="fas fa-edit"></i> ç¼–è¾‘ç³»ç»Ÿæ¼”è¿›è®°å½•</h3>
            <p style="margin-bottom: 20px; color: var(--text-light);">ä¿®æ”¹ç³»ç»Ÿæ¼”è¿›å†ç¨‹çš„è¯¦ç»†ä¿¡æ¯</p>
            
            <div class="timeline-edit-form">
                <div class="timeline-form-group">
                    <label for="timeline-edit-version">ç‰ˆæœ¬å·</label>
                    <input type="text" id="timeline-edit-version" placeholder="ä¾‹å¦‚: v22.48">
                </div>
                
                <div class="timeline-form-group">
                    <label for="timeline-edit-date">æ—¥æœŸ</label>
                    <input type="text" id="timeline-edit-date" placeholder="ä¾‹å¦‚: 2024-07">
                </div>
                
                <div class="timeline-form-group">
                    <label for="timeline-edit-event">äº‹ä»¶æè¿°</label>
                    <textarea id="timeline-edit-event" placeholder="è¯¦ç»†æè¿°æ­¤ç‰ˆæœ¬çš„äº‹ä»¶..."></textarea>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeTimelineEditModal()">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="saveTimelineEdit()">
                    <i class="fas fa-save"></i> ä¿å­˜æ›´æ”¹
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== æ•°æ®ç»“æ„ä¸å­˜å‚¨ ====================
        const DataStore = {
            thoughts: [],
            models: [],
            tags: {},
            nextThoughtId: 124,
            nextModelId: 81,
            currentVersion: "v22.48",
            lastSaved: null,
            
            // æ ‡ç­¾åˆ†ç±»ç³»ç»Ÿ
            tagCategories: {
                "æ ¸å¿ƒæ¨¡å‹": ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§", "ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ", "âš™ï¸ å†³ç­–/è¡ŒåŠ¨", "ğŸ­ è’è¯/å¹½é»˜"],
                "å…³ç³»ä¸æƒ…æ„Ÿ": ["ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ", "ğŸ’” å¤±å»/å‘Šåˆ«", "âš–ï¸ æœŸæœ›/é”™ä½", "ğŸŒ± æˆé•¿/å†ç¨‹", "ğŸ˜¶ é“å¾·/ä¼¦ç†"],
                "æ—¶é—´ä¸å­˜åœ¨": ["â³ æ—¶é—´/å®¿å‘½", "â° è®°å¿†/é—å¿˜", "ğŸŒ å­˜åœ¨/æ„ŸçŸ¥", "ğŸŒ€ å¾ªç¯/é‡å¤", "ğŸš¶ å†ç¨‹/è·¯å¾„"],
                "è‰ºæœ¯ä¸è¡¨è¾¾": ["ğŸµ æ­Œæ›²åˆ†æ", "ğŸ­ æ–‡è‰ºæ‰¹è¯„", "ğŸ¨ è‰ºæœ¯/è±¡å¾", "ğŸ—£ï¸ è¯­è¨€/å™äº‹", "ğŸ“š æ–‡æœ¬åˆ†æ"],
                "ç¤¾ä¼šä¸ç³»ç»Ÿ": ["âš”ï¸ åæŠ—/è¾¹ç¼˜", "ğŸ”„ ç³»ç»Ÿ/ç»“æ„", "ğŸ›ï¸ åˆ¶åº¦/æƒåŠ›", "ğŸŒ ç½‘ç»œ/è¿æ¥", "âš–ï¸ ä¼¦ç†/è´£ä»»"],
                "ç‰¹æ®ŠçŠ¶æ€": ["ğŸ”¥ æç«¯ä½“éªŒ", "ğŸŒ€ è§£æ„/é‡æ„", "ğŸ¯ èšç„¦/ä¸“æ³¨", "ğŸ’¡ çµæ„Ÿ/æ´è§", "ğŸ›¡ï¸ é˜²å¾¡/ä¿æŠ¤"]
            },
            
            // æ¨¡å‹å…³è”ç½‘ç»œ
            modelConnections: {
                "M-80": ["M-74", "M-78", "M-69", "M-77", "M-67"],
                "M-79": ["M-77", "M-71", "M-67"],
                "M-78": ["M-74", "M-73", "M-77", "M-76"],
                "M-77": ["M-69", "M-71", "M-67", "M-76"],
                "M-76": ["M-60", "M-71", "M-62", "M-66", "M-74"],
                "M-75": ["M-73", "M-72", "M-94"],
                "M-74": ["M-69", "M-30", "M-66", "M-67"],
                "M-73": ["M-94", "M-70", "M-72", "M-68"]
            },
            
            // æ—¶é—´çº¿æ•°æ®
            timeline: [
                {id: "t1", version: "v1.0-v5.0", date: "2023-01", event: "åŸºç¡€æƒ…æ„Ÿæ¨¡å‹å»ºç«‹ï¼ˆå·¥å…·åŒ–ã€é”™ä½ã€é—æ†¾ï¼‰"},
                {id: "t2", version: "v6.0-v10.0", date: "2023-03", event: "å…³ç³»æ¨¡å‹æ·±åŒ–ï¼ˆæˆç†Ÿé¦ˆèµ ã€æ— é™åšå¼ˆï¼‰"},
                {id: "t3", version: "v11.0-v15.0", date: "2023-05", event: "å­˜åœ¨å“²å­¦æ‹“å±•ï¼ˆå­˜åœ¨å‹˜æ¢ã€æ°´æ€§æ™ºæ…§ï¼‰"},
                {id: "t4", version: "v16.0-v18.0", date: "2023-07", event: "é˜²å¾¡æœºåˆ¶ä¸ç—…ç†å­¦å®Œå–„ï¼ˆæ¢¦å¢ƒå¯„ç”Ÿã€æƒ…æ„Ÿéº»ç—¹ï¼‰"},
                {id: "t5", version: "v18.0-v20.2", date: "2023-09", event: "å…³ç³»åŠ¨åŠ›å­¦ã€å¥åº·å…±å»ºã€æ„ä¹‰æ•´åˆ"},
                {id: "t6", version: "v20.3-v21.3", date: "2023-11", event: "å®è§‚ç¤¾ä¼šæ‰¹åˆ¤ã€ä¸ªä½“ç”Ÿå­˜ç­–ç•¥ã€å“²å­¦æ¡†æ¶æ™®é€‚åŒ–"},
                {id: "t7", version: "v21.4-v22.0", date: "2024-01", event: "äº²å¯†å…³ç³»å…‰è°±ã€å­˜åœ¨æ€§å¯„ç”Ÿã€ç†µå¢æŸè€—ã€ç¥›é­…æ‚¬ç½®ã€å¶åƒå¹»ç­ã€åˆ›ä¼¤åé‡å»ºã€è™šæ— ç¾å­¦æ•´åˆ"},
                {id: "t8", version: "v22.1-v22.2", date: "2024-03", event: "åŒè½¨åˆ¶æ¶æ„å»ºç«‹ï¼Œæ–°å¢ M-45 è‡³ M-53 æ¨¡å‹"},
                {id: "t9", version: "v22.33", date: "2024-05", event: "ã€Šæˆ‘ä»¬å¾ˆå¥½ã€‹Ã—ã€Šå¿«ä¹æ˜ŸçŒ«ã€‹å…³ç³»è¯Šç–—æ•´åˆç‰ˆ"},
                {id: "t10", version: "v22.48", date: "2024-07", event: "ã€Šå¯„å±…ã€‹Ã—ã€ŠèŠ±ã€‹æ•´åˆç‰ˆï¼Œæ¨¡å‹æ€»æ•°è¾¾80ä¸ª"}
            ],
            
            // å®šä¹‰å…³é”®æ ‡é¢˜çš„å¤šç§å¯èƒ½å½¢å¼
            sectionTitles: {
                "çŠ¶æ€çœ‹æ¿": [
                    "ğŸ’ **çŠ¶æ€çœ‹æ¿**", "ğŸ’ çŠ¶æ€çœ‹æ¿", "çŠ¶æ€çœ‹æ¿:", "çŠ¶æ€çœ‹æ¿", "çŠ¶æ€", "çœ‹æ¿",
                    "ğŸ’¡ **çŠ¶æ€çœ‹æ¿**", "ğŸ“Š **çŠ¶æ€çœ‹æ¿**", "ğŸ“‹ **çŠ¶æ€çœ‹æ¿**", "ç³»ç»ŸçŠ¶æ€", "æ€è€ƒçŠ¶æ€"
                ],
                "æ ¸å¿ƒç»“è®º": [
                    "ğŸŒŒ **æ ¸å¿ƒç»“è®º**", "ğŸŒŒ æ ¸å¿ƒç»“è®º", "æ ¸å¿ƒç»“è®º:", "æ ¸å¿ƒç»“è®º", "ç»“è®º", "æ ¸å¿ƒè§‚ç‚¹",
                    "ğŸ¯ **æ ¸å¿ƒç»“è®º**", "âœ¨ **æ ¸å¿ƒç»“è®º**", "ğŸ’¡ **æ ¸å¿ƒç»“è®º**", "ä¸»è¦ç»“è®º", "æ ¸å¿ƒå‘ç°"
                ],
                "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ": [
                    "ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**", "ğŸ§© æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ", "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ:", "æ¨¡å‹å»¶ä¼¸", "æ¨¡å‹æ•´åˆ",
                    "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ", "æ¨¡å‹æ‰©å±•", "æ•´åˆæ¨¡å‹", "ğŸ”— **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**", "æ¨¡å‹å…³è”"
                ],
                "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹": [
                    "ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**", "ğŸ“š è¡ŒåŠ¨/æ€ç»´è¦ç‚¹", "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹:", "è¡ŒåŠ¨æ€ç»´è¦ç‚¹",
                    "è¡ŒåŠ¨è¦ç‚¹", "æ€ç»´è¦ç‚¹", "è¦ç‚¹", "è¡ŒåŠ¨å»ºè®®", "æ€ç»´å»ºè®®", "ğŸ¯ **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**"
                ],
                "æ¶æ„æ›´æ–°": [
                    "ğŸ“‚ **æ¶æ„æ›´æ–°**", "ğŸ“‚ æ¶æ„æ›´æ–°", "æ¶æ„æ›´æ–°:", "æ¶æ„æ›´æ–°", "ç³»ç»Ÿæ›´æ–°",
                    "æ›´æ–°æ—¥å¿—", "ç‰ˆæœ¬æ›´æ–°", "ğŸ“ˆ **æ¶æ„æ›´æ–°**", "ğŸ”„ **æ¶æ„æ›´æ–°**"
                ]
            },
            
            // å½“å‰æ­£åœ¨ç¼–è¾‘çš„æ—¶é—´çº¿é¡¹ç›®ID
            editingTimelineId: null,
            
            // åˆå§‹åŒ– - ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
            init: function() {
                console.log('ç”µè„‘ç«¯æ•°æ®å­˜å‚¨åˆå§‹åŒ–...');
                
                // æ£€æŸ¥ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨æ˜¯å¦å¯ç”¨
                if (typeof UnifiedDataManager !== 'undefined') {
                    try {
                        // ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨è·å–æ•°æ®
                        const fullData = UnifiedDataManager.getFullData();
                        
                        // åŠ è½½æ•°æ®åˆ°DataStore
                        this.thoughts = fullData.thoughts || [];
                        this.models = fullData.models || [];
                        this.tags = fullData.tags || {};
                        this.timeline = fullData.timeline || this.timeline;
                        this.modelConnections = fullData.modelConnections || this.modelConnections;
                        this.currentVersion = fullData.currentVersion || "v22.48";
                        this.lastSaved = fullData.lastSaved || new Date().toISOString();
                        this.nextThoughtId = fullData.nextThoughtId || 124;
                        this.nextModelId = fullData.nextModelId || 81;
                        
                        console.log('ä»ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨åŠ è½½æˆåŠŸ:', {
                            thoughts: this.thoughts.length,
                            models: this.models.length,
                            tags: Object.keys(this.tags).length
                        });
                        
                        // å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œæ·»åŠ ç¤ºä¾‹æ•°æ®
                        if (this.thoughts.length === 0 && this.models.length === 0) {
                            console.log('é¦–æ¬¡ä½¿ç”¨ï¼Œåˆ›å»ºç¤ºä¾‹æ•°æ®...');
                            this.addExampleData();
                            this.save();
                        }
                        
                    } catch (e) {
                        console.log('ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨', e);
                        this.loadFromLocalStorage();
                    }
                } else {
                    console.log('ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨æœªåŠ è½½ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨');
                    this.loadFromLocalStorage();
                }
                
                // è®¾ç½®æ•°æ®åŒæ­¥ç›‘å¬
                this.setupDataSyncListener();
                
                // æ›´æ–°UIç»Ÿè®¡
                this.updateUIStats();
                
                console.log('ç”µè„‘ç«¯æ•°æ®å­˜å‚¨åˆå§‹åŒ–å®Œæˆ');
            },
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
            loadFromLocalStorage: function() {
                const saved = localStorage.getItem('structuredThoughtAssistant');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.thoughts = data.thoughts || [];
                        this.models = data.models || [];
                        this.tags = data.tags || {};
                        this.nextThoughtId = data.nextThoughtId || 124;
                        this.nextModelId = data.nextModelId || 81;
                        this.currentVersion = data.currentVersion || "v22.48";
                        this.lastSaved = data.lastSaved || new Date().toISOString();
                        this.timeline = data.timeline || this.timeline;
                        this.modelConnections = data.modelConnections || this.modelConnections;
                        
                        console.log('ä»æœ¬åœ°å­˜å‚¨åŠ è½½æˆåŠŸ');
                    } catch (e) {
                        console.log('è§£æå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®', e);
                        this.addExampleData();
                    }
                } else {
                    this.addExampleData();
                }
            },
            
            // è®¾ç½®æ•°æ®åŒæ­¥ç›‘å¬
            setupDataSyncListener: function() {
                // ç›‘å¬storageäº‹ä»¶ï¼ˆæ¥è‡ªå…¶ä»–æ ‡ç­¾é¡µï¼‰
                window.addEventListener('storage', (e) => {
                    if (e.key === 'structuredThoughtAssistant' && e.newValue) {
                        console.log('æ£€æµ‹åˆ°æ•°æ®å˜åŒ–ï¼Œé‡æ–°åŠ è½½æ•°æ®...');
                        
                        // é‡æ–°åŠ è½½æ•°æ®
                        if (typeof UnifiedDataManager !== 'undefined') {
                            const fullData = UnifiedDataManager.getFullData();
                            this.thoughts = fullData.thoughts;
                            this.models = fullData.models;
                            this.tags = fullData.tags;
                            this.updateUIStats();
                            
                            // é‡æ–°æ¸²æŸ“å½“å‰è§†å›¾
                            if (UIManager && UIManager.currentView) {
                                UIManager.loadView(UIManager.currentView);
                            }
                        }
                    }
                });
                
                // ç›‘å¬è‡ªå®šä¹‰æ•°æ®æ›´æ–°äº‹ä»¶
                window.addEventListener('unified-data-updated', () => {
                    console.log('æ”¶åˆ°ç»Ÿä¸€æ•°æ®æ›´æ–°äº‹ä»¶');
                    
                    if (typeof UnifiedDataManager !== 'undefined') {
                        const fullData = UnifiedDataManager.getFullData();
                        this.thoughts = fullData.thoughts;
                        this.models = fullData.models;
                        this.tags = fullData.tags;
                        this.updateUIStats();
                        
                        // é‡æ–°æ¸²æŸ“å½“å‰è§†å›¾
                        if (UIManager && UIManager.currentView) {
                            UIManager.loadView(UIManager.currentView);
                        }
                    }
                });
            },
            
            // ä¿å­˜æ•°æ® - ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
            save: function() {
                console.log('ç”µè„‘ç«¯ä¿å­˜æ•°æ®...');
                
                if (typeof UnifiedDataManager !== 'undefined') {
                    // ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ä¿å­˜
                    const data = {
                        thoughts: this.thoughts,
                        models: this.models,
                        tags: this.tags,
                        timeline: this.timeline,
                        modelConnections: this.modelConnections,
                        currentVersion: this.currentVersion,
                        lastSaved: new Date().toISOString(),
                        nextThoughtId: this.nextThoughtId,
                        nextModelId: this.nextModelId
                    };
                    
                    const result = UnifiedDataManager.saveData(data);
                    
                    if (result.success) {
                        this.lastSaved = data.lastSaved;
                        console.log('é€šè¿‡ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ä¿å­˜æˆåŠŸ');
                        this.updateUIStats();
                        return true;
                    } else {
                        console.log('ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ä¿å­˜å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨');
                        return this.saveToLocalStorage();
                    }
                } else {
                    // å›é€€åˆ°æœ¬åœ°å­˜å‚¨
                    return this.saveToLocalStorage();
                }
            },
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
            saveToLocalStorage: function() {
                const data = {
                    thoughts: this.thoughts,
                    models: this.models,
                    tags: this.tags,
                    nextThoughtId: this.nextThoughtId,
                    nextModelId: this.nextModelId,
                    currentVersion: this.currentVersion,
                    lastSaved: new Date().toISOString(),
                    timeline: this.timeline,
                    modelConnections: this.modelConnections
                };
                
                try {
                    localStorage.setItem('structuredThoughtAssistant', JSON.stringify(data));
                    this.lastSaved = data.lastSaved;
                    console.log('é€šè¿‡æœ¬åœ°å­˜å‚¨ä¿å­˜æˆåŠŸ');
                    this.updateUIStats();
                    return true;
                } catch (e) {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥:', e);
                    return false;
                }
            },
            
            // æ·»åŠ ç¤ºä¾‹æ•°æ®
            addExampleData: function() {
                console.log('æ·»åŠ ç¤ºä¾‹æ•°æ®...');
                
                // æ·»åŠ ç¤ºä¾‹ç»“æ„åŒ–æ€è€ƒ
                const exampleThought = this.parseStructuredContent(`ğŸ’ **çŠ¶æ€çœ‹æ¿**  
**ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.48ï¼ˆã€Šå¯„å±…ã€‹Ã—ã€ŠèŠ±ã€‹æ•´åˆç‰ˆï¼‰  
**å½“å‰æ€è€ƒID**ï¼š#123  
**æ€è€ƒä¸»é¢˜**ï¼šã€Šå¯„å±…ã€‹ä¸ã€ŠèŠ±ã€‹â€”â€”ä¸¤ç§å…³ç³»å­˜åœ¨è®ºï¼š"äººé—´çƒŸç«"çš„ç°ä¸–å®ˆæŠ¤ vs "è¶…ç„¶å®¿å‘½"çš„å¾ªç¯å› æœ  
**æ€è€ƒç±»å‹**ï¼šğŸµ æ­Œæ›²åˆ†æï¼ˆå…³ç³»å“²å­¦ / æ—¶é—´æ€§æ¯”è¾ƒï¼‰  
**å…³é”®æ ‡è®°**ï¼šğŸ§  æ ¸å¿ƒæ¨¡å‹ã€ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿã€â³ æ—¶é—´/å®¿å‘½ã€ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§  
**å…³è”ç½‘ç»œ**ï¼šå¼ºå…³è”äº #116 M-74ï¼ˆçˆ±ä½œä¸ºå®‰å…¨åŸºåœ°çš„æˆé•¿ï¼‰ã€#121 M-78ï¼ˆäº²å¯†é¢„æœŸé”™ä½ï¼‰ã€#111 M-69ï¼ˆçˆ±çš„åœ¨åœºæ€§é‡æ„ï¼‰ã€#120 M-77ï¼ˆç»ˆå±€å¯¹è¯ï¼‰ã€#109 M-67ï¼ˆç†æƒ³é™è§£ä¸æ„ä¹‰é”šå®šï¼‰ã€‚æœ¬æ€è€ƒæ˜¯å¯¹ä¸¤ç§æ ¹æœ¬æ€§çš„å…³ç³»ä¸–ç•Œå›¾æ™¯ä¸æ—¶é—´æ€§ä½“éªŒçš„å¯¹æ¯”åˆ†æã€‚  

ğŸŒŒ **æ ¸å¿ƒç»“è®ºï¼šä¸¤ç§å…³ç³»å­˜åœ¨è®ºçš„å¯¹å³™â€”â€”ä»¥"è´£ä»»"ä¸ºè½´å¿ƒçš„çº¿æ€§å»ºé€  vs ä»¥"ç¼˜åŠ«"ä¸ºæ³•åˆ™çš„å¾ªç¯è®¤å‘½**  
ã€Šå¯„å±…ã€‹ä¸ã€ŠèŠ±ã€‹å‘ˆç°äº†çˆ±æƒ…ï¼ˆä¹ƒè‡³æ·±å±‚å…³ç³»ï¼‰ä¸­ä¸¤ç§å‡ ä¹æ— æ³•é€šçº¦çš„"å­˜åœ¨è®º"ï¼šä¸€ç§å°†å…³ç³»è§†ä¸ºåœ¨**çº¿æ€§æ—¶é—´**ä¸­é€šè¿‡**ä¸»åŠ¨æ‹…è´£ä¸å…±åŒè¡ŒåŠ¨**æ¥å»ºé€ çš„"äººé—´å ¡å’"ï¼›å¦ä¸€ç§å°†å…³ç³»è§†ä¸ºåœ¨**å¾ªç¯æ—¶é—´**ä¸­è¢«**å®¿å‘½æ³•åˆ™ï¼ˆç¼˜/åŠ«ï¼‰** æ‰€è§„å®šçš„"çµé­‚ç”Ÿæ€"ã€‚  
1.  **ã€Šå¯„å±…ã€‹ï¼šå…³ç³»ä½œä¸º"ç°ä¸–çš„å»ºé€ "**  
    *   **æ—¶é—´æ€§**ï¼š**çº¿æ€§ã€å‰è¿›çš„**ã€‚å…³ç³»æœ‰æ˜ç¡®çš„èµ·ç‚¹ï¼ˆ"è¢«ä½ ä¿®è¡¥"ï¼‰ã€æŒç»­çš„ç°åœ¨ï¼ˆ"ä¸€å¤©å¤©ç»ƒä¹ "ï¼‰ã€ä»¥åŠæœ‰å¾…å…±åŒåˆ›é€ çš„æœªæ¥ï¼ˆ"åˆ¶é€ å£®ä¸¾"ï¼‰ã€‚è¿‡å»çš„ä¸å¿«å¯ä»¥"åŒ–å…¥é£é‡Œ"ï¼Œæœªæ¥å¯ä»¥"æœªæ€•å…´è¡°"ã€‚  
    *   **æ ¸å¿ƒåŠ¨ä½œ**ï¼š**"åº‡æŠ¤"ä¸"ç»ƒä¹ "**ã€‚"è¯·è¿›å…¥æˆ‘åŒçœ¼é‡Œå¯„å±…"æ˜¯å°†è‡ªæˆ‘è½¬åŒ–ä¸ºä»–è€…çš„å®‰å…¨å®¹å™¨ï¼›"è¶Šçˆ±è¶Šå¤©çœŸ"æ˜¯é€šè¿‡æ—¥å¤ä¸€æ—¥çš„ç»ƒä¹ æ¥ç»´ç³»å…³ç³»çŠ¶æ€ã€‚çˆ±æ˜¯**ä¸»åŠ¨é€‰æ‹©çš„æ‹…å­**ï¼ˆ"æˆ‘çš„å¹¸è¿äº‹å«è´£ä»»"ï¼‰ã€‚  
    *   **ä¸–ç•Œå›¾æ™¯**ï¼šä¸–ç•Œæ˜¯å¯èƒ½å¸¦æ¥"æ•™è®­"çš„å´å²–ä¹‹åœ°ï¼Œä½†**äºŒäººç»„æˆçš„"æˆ‘ä»¬"å¯ä»¥åœ¨æ­¤å»ºé€ ä¸€ä¸ªå±€éƒ¨ç¨³å®šçš„"ä¹å›­"**ï¼ˆ"é’æ˜¥çš„ä¹å›­"ï¼‰ï¼Œä»¥å¯¹æŠ—å¤–éƒ¨çš„"æœ«æ—¥"ä¸"ç–²å€¦"ã€‚å…³ç³»æ˜¯**å¯¹æŠ—ä¸–ç•Œç†µå¢çš„å±€éƒ¨é€†æµ**ã€‚  
2.  **ã€ŠèŠ±ã€‹ï¼šå…³ç³»ä½œä¸º"å®¿å‘½çš„æ˜¾ç°"**  
    *   **æ—¶é—´æ€§**ï¼š**å¾ªç¯ã€è½®å›çš„**ã€‚æ—¶é—´å¦‚èŠ±å¼€èŠ±è½ã€çµé­‚åˆ†åˆï¼Œæ˜¯"ç¿çƒ‚â€”æ•£è½â€”æ¯èâ€”å†ç”Ÿ"çš„æ— å°½å¾ªç¯ã€‚ä»Šç”Ÿåªæ˜¯å…¶ä¸­ä¸€ç¯ï¼ˆ"ä»Šä¸–å­½å€ºè½¬ç”Ÿå†ç»­ç¼˜"ï¼‰ã€‚å…³ç³»æ˜¯**æ—¶é—´å¾ªç¯ä¸­çš„ä¸€ä¸ªç›¸ä½**ã€‚  
    *   **æ ¸å¿ƒåŠ¨ä½œ**ï¼š**"è®¤"ä¸"æ¸¡"**ã€‚è®¤å‡ºå…³ç³»æ˜¯"å‘½é‡Œçº·çº·æ‰°æ‰°çš„æŒ‡å¼•"ï¼Œæ¥å—"ç¼˜èšæ•£"çš„å®šæ•°ã€‚ä¸ªä½“åŠ¨ä½œæ˜¯"çµé­‚æ¸¡è¿‡æ—¶åœ°æ•£èšææµ…"ï¼Œæ˜¯æ¼‚æµ®è€Œéå»ºé€ ã€‚çˆ±æ˜¯**è¢«åŠ¨æ‰¿æ¥çš„"å€º"æˆ–"ç¼˜"**ã€‚  
    *   **ä¸–ç•Œå›¾æ™¯**ï¼šä¸–ç•Œæ˜¯ä¸€ä¸ªå·¨å¤§çš„ã€æ— æ³•é€ƒè„±çš„**ç”Ÿæ€æ³•åˆ™ç³»ç»Ÿ**ï¼ˆ"æµ®åä¸–ç•Œä»é€ƒä¸å‡ºé‚£ç”Ÿæ€"ï¼‰ã€‚å…³ç³»ï¼ˆèŠ±ï¼‰çš„ç»½æ”¾ä¸æ¯ç«­ï¼Œæ˜¯è¿™å¥—è‡ªç„¶æ³•åˆ™çš„ä½“ç°ã€‚ä¸ªäººæ„å¿—æ¸ºå°ï¼Œ**å…³ç³»æ˜¯æ³•åˆ™çš„ä¾‹è¯ï¼Œè€Œéå¯¹æŠ—æ³•åˆ™çš„ä¾‹å¤–**ã€‚  
3.  **æ ¹æœ¬å¯¹å³™**ï¼šè¿™æ˜¯ **"äººä¹‰è®º"å…³ç³»è§‚** ä¸ **"ç¥ä¹‰è®º"ï¼ˆæˆ–"è‡ªç„¶æ³•åˆ™è®º"ï¼‰å…³ç³»è§‚** çš„è¯—æ„è¡¨è¾¾ã€‚å‰è€…ç›¸ä¿¡äººçš„è´£ä»»ä¸è¡ŒåŠ¨èƒ½èµ‹äºˆå…³ç³»ä»¥æ„ä¹‰å’ŒæŒä¹…ï¼›åè€…ç›¸ä¿¡å…³ç³»çš„æ„ä¹‰ä¸æœŸé™æ—©å·²è¢«æ›´å¤§çš„å®‡å®™æ³•åˆ™æ‰€è§„å®šï¼Œäººçš„è§’è‰²æ˜¯ä½“è®¤ä¸æ¥å—ã€‚  

ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**  
**1. "å…³ç³»å­˜åœ¨è®º"äºŒå…ƒæ¨¡å‹ (M-80 æ–°å»º)**  
*   **å®šä¹‰**ï¼šæè¿°ä¸ªä½“åœ¨æ·±åº¦å…³ç³»ä¸­æ‰€ç§‰æŒçš„ã€å…³äºå…³ç³»ä¹‹æœ¬è´¨ã€æ—¶é—´æ€§ä¸èƒ½åŠ¨æ€§çš„æ ¹æœ¬é¢„è®¾æ¡†æ¶ã€‚ä¸»è¦åˆ†ä¸ºä¸¤ç§ç†æƒ³ç±»å‹ï¼š  
    1.  **å»ºé€ è€…æ¨¡å¼**ï¼šè®¤ä¸ºå…³ç³»æœ¬è´¨ä¸Šæ˜¯**åœ¨æ—¶é—´ä¸­é€šè¿‡åŒæ–¹æŒç»­åŠªåŠ›æ„å»ºçš„å®ä½“**ã€‚æ—¶é—´çº¿æ€§ï¼Œæœªæ¥å¼€æ”¾ï¼Œæ ¸å¿ƒèƒ½åŠ¨æ€§æ˜¯**è´£ä»»ã€åº‡æŠ¤ä¸å…±åŒåˆ›é€ **ã€‚æ„ä¹‰æºäºå»ºé€ è¿‡ç¨‹æœ¬èº«ã€‚  
    2.  **ä½“è®¤è€…æ¨¡å¼**ï¼šè®¤ä¸ºå…³ç³»æœ¬è´¨ä¸Šæ˜¯**åœ¨æ›´å¤§çš„å®‡å®™æˆ–å‘½è¿æ³•åˆ™ä¸‹æ˜¾ç°çš„é˜¶æ®µæ€§çŠ¶æ€**ã€‚æ—¶é—´å¾ªç¯ï¼Œå‰§æœ¬æ—¢å®šï¼Œæ ¸å¿ƒèƒ½åŠ¨æ€§æ˜¯**æ¥å—ã€ä½“è®¤ä¸æ¸¡è¿‡**ã€‚æ„ä¹‰æºäºå¯¹æ³•åˆ™çš„é¢†æ‚Ÿä¸è‡£æœã€‚  

ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹ï¼ˆå®¡è§†ä½ çš„å…³ç³»å­˜åœ¨è®ºï¼‰**  
1.  ã€**å­˜åœ¨è®ºè‡ªæ£€**ã€‘ä½ ç›¸ä¿¡å…³ç³»æ˜¯"å»ºé€ "çš„è¿˜æ˜¯"è®¤å‘½"çš„ï¼Ÿ  

ğŸ“‚ **æ¶æ„æ›´æ–°**  
*   **æ–°å¢æ ¸å¿ƒæ¨¡å‹**ï¼š**M-80 "å…³ç³»å­˜åœ¨è®º"äºŒå…ƒæ¨¡å‹** (äº #123 å»ºç«‹)ã€‚  
*   **ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.47 â†’ **v22.48**ã€‚`);
                
                exampleThought.id = "#123";
                exampleThought.date = new Date().toISOString().split('T')[0];
                this.thoughts.push(exampleThought);
                
                // æ·»åŠ ç¤ºä¾‹æ¨¡å‹
                this.addModel({
                    id: "M-80",
                    name: "å…³ç³»å­˜åœ¨è®ºæ¨¡å‹",
                    description: "æè¿°ä¸ªä½“åœ¨æ·±åº¦å…³ç³»ä¸­æ‰€ç§‰æŒçš„ã€å…³äºå…³ç³»ä¹‹æœ¬è´¨ã€æ—¶é—´æ€§ä¸èƒ½åŠ¨æ€§çš„æ ¹æœ¬é¢„è®¾æ¡†æ¶ã€‚ä¸»è¦åˆ†ä¸ºä¸¤ç§ç†æƒ³ç±»å‹ï¼šå»ºé€ è€…æ¨¡å¼ä¸ä½“è®¤è€…æ¨¡å¼ã€‚",
                    date: new Date().toISOString().split('T')[0],
                    tags: ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ", "ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§", "â³ æ—¶é—´/å®¿å‘½"],
                    fromThought: "#123",
                    relatedModels: ["M-74", "M-78", "M-69", "M-77", "M-67"],
                    usageCount: 12,
                    lastUsed: "2025-07-20"
                });
                
                // æ·»åŠ æ›´å¤šç¤ºä¾‹æ¨¡å‹
                this.addModel({
                    id: "M-79",
                    name: "è¯ é‡Šä¼¦ç†æ¨¡å‹",
                    description: "è‡ªæˆ‘ä¸­å¿ƒæŠ•å°„ vs ä»–è€…å¯¼å‘å…±æƒ…ï¼Œæè¿°åœ¨è§£è¯»ä»–äººè¡Œä¸ºæ—¶çš„ä¼¦ç†ç«‹åœºå·®å¼‚",
                    date: "2025-07-19",
                    tags: ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "âš–ï¸ ä¼¦ç†/è´£ä»»", "ğŸ¨ è‰ºæœ¯/è±¡å¾", "ğŸŒŒ å“²å­¦/å­˜åœ¨æ™ºæ…§"],
                    fromThought: "#122",
                    relatedModels: ["M-77", "M-71", "M-67"],
                    usageCount: 8,
                    lastUsed: "2025-07-19"
                });
                
                this.addModel({
                    id: "M-78",
                    name: "äº²å¯†é¢„æœŸé”™ä½æ¨¡å‹",
                    description: "èåˆæ¸´æœ› vs è·ç¦»ä¿å…¨ï¼Œæè¿°äº²å¯†å…³ç³»ä¸­åŒæ–¹å¯¹è·ç¦»å’Œèåˆåº¦æœŸå¾…çš„å·®å¼‚",
                    date: "2025-07-18",
                    tags: ["ğŸ§  æ ¸å¿ƒæ¨¡å‹", "ğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿ", "âš–ï¸ æœŸæœ›/é”™ä½", "ğŸŒ± æˆé•¿/å†ç¨‹"],
                    fromThought: "#121",
                    relatedModels: ["M-74", "M-73", "M-77", "M-76"],
                    usageCount: 15,
                    lastUsed: "2025-07-18"
                });
                
                // æ·»åŠ æ›´å¤šç¤ºä¾‹æ€è€ƒ
                const exampleThought2 = this.parseStructuredContent(`ğŸ’ **çŠ¶æ€çœ‹æ¿**  
**ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.33  
**å½“å‰æ€è€ƒID**ï¼š#108  
**æ€è€ƒä¸»é¢˜**ï¼šã€Šæˆ‘ä»¬å¾ˆå¥½ã€‹ä¸ã€Šå¿«ä¹æ˜ŸçŒ«ã€‹â€”â€”ä¼¤å£é•œå…ä¸æ´»æ€§æ²»æ„ˆæœ¯å…³ç³»åŠ¨åŠ›å­¦  
**æ€è€ƒç±»å‹**ï¼šğŸµ æ­Œæ›²åˆ†æï¼ˆå…³ç³»ä¿®å¤ / æƒ…æ„Ÿæ²»ç–—ï¼‰  
**å…³é”®æ ‡è®°**ï¼šğŸ’ äº²å¯†å…³ç³»/æƒ…æ„Ÿã€ğŸŒ± æˆé•¿/å†ç¨‹ã€ğŸ’¡ çµæ„Ÿ/æ´è§ã€ğŸ”„ ç³»ç»Ÿ/æ¨¡å‹æ•´åˆ  

ğŸŒŒ **æ ¸å¿ƒç»“è®ºï¼šæ´»æ€§æ²»æ„ˆæœ¯æ¨¡å‹â€”â€”ä»é™æ€"æ²»ç–—"åˆ°åŠ¨æ€"å…±åŒå‚ä¸"çš„å…³ç³»ä¿®å¤**  
ã€Šæˆ‘ä»¬å¾ˆå¥½ã€‹ä¸ã€Šå¿«ä¹æ˜ŸçŒ«ã€‹æ­ç¤ºäº†å…³ç³»ä¿®å¤çš„ä¸¤ç§è·¯å¾„ï¼šä¸€ç§æ˜¯é€šè¿‡"æˆ‘ä»¬å¾ˆå¥½"çš„å®£è¨€æ€§è¡¨æ¼”ç»´æŒå…³ç³»è¡¨è±¡ï¼›å¦ä¸€ç§æ˜¯é€šè¿‡"å¿«ä¹æ˜ŸçŒ«"å¼çš„æ´»æ€§äº’åŠ¨ï¼Œåœ¨å…³ç³»ä¸­åˆ›é€ æ–°çš„æ„ä¹‰ç©ºé—´ã€‚  

ğŸ§© **æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ**  
**1. æ´»æ€§æ²»æ„ˆæœ¯æ¨¡å‹ (M-66 æ–°å»º)**  
*   **å®šä¹‰**ï¼šä¸€ç§åŠ¨æ€ã€å‚ä¸å¼çš„å…³ç³»ä¿®å¤æ¡†æ¶ï¼Œå¼ºè°ƒåŒæ–¹åœ¨ä¿®å¤è¿‡ç¨‹ä¸­çš„å…±åŒå‚ä¸å’Œæ„ä¹‰å…±åˆ›ã€‚  

ğŸ“š **è¡ŒåŠ¨/æ€ç»´è¦ç‚¹**  
1.  ã€**æ´»æ€§ä¿®å¤**ã€‘å°è¯•å°†å…³ç³»é—®é¢˜è½¬åŒ–ä¸ºåŒæ–¹å¯ä»¥å…±åŒå‚ä¸çš„"é¡¹ç›®"ï¼Œè€Œééœ€è¦å•æ–¹é¢è§£å†³çš„"é—®é¢˜"ã€‚  

ğŸ“‚ **æ¶æ„æ›´æ–°**  
*   **æ–°å¢æ ¸å¿ƒæ¨¡å‹**ï¼š**M-66 "æ´»æ€§æ²»æ„ˆæœ¯æ¨¡å‹"** (äº #108 å»ºç«‹)ã€‚  
*   **ç³»ç»Ÿç‰ˆæœ¬**ï¼šv22.32 â†’ **v22.33**ã€‚`);
                
                exampleThought2.id = "#108";
                exampleThought2.date = "2025-07-15";
                this.thoughts.push(exampleThought2);
                
                console.log('ç¤ºä¾‹æ•°æ®æ·»åŠ å®Œæˆ');
            },
            
            // ==================== å…¶ä»–æ–¹æ³•ä¿æŒä¸å˜ ====================
            // è§£æç»“æ„åŒ–å†…å®¹
            parseStructuredContent: function(text) {
                const thought = {
                    id: null,
                    title: null,
                    type: null,
                    date: new Date().toISOString().split('T')[0],
                    tags: [],
                    sections: {},
                    related: [],
                    newModels: [],
                    systemVersion: this.currentVersion
                };
                
                // è§£æçŠ¶æ€çœ‹æ¿éƒ¨åˆ†
                const statusSection = this.extractSectionByTitles(text, "çŠ¶æ€çœ‹æ¿");
                if (statusSection) {
                    thought.sections["çŠ¶æ€çœ‹æ¿"] = statusSection.content;
                    
                    // ä»çŠ¶æ€çœ‹æ¿ä¸­æå–å…ƒæ•°æ®
                    this.extractMetadataFromStatus(thought, statusSection.content);
                }
                
                // è§£ææ ¸å¿ƒç»“è®ºéƒ¨åˆ†
                const conclusionSection = this.extractSectionByTitles(text, "æ ¸å¿ƒç»“è®º");
                if (conclusionSection) {
                    thought.sections["æ ¸å¿ƒç»“è®º"] = conclusionSection.content;
                }
                
                // è§£ææ¨¡å‹å»¶ä¼¸ä¸æ•´åˆéƒ¨åˆ†
                const modelSection = this.extractSectionByTitles(text, "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ");
                if (modelSection) {
                    thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"] = modelSection.content;
                    
                    // æå–æ–°å»ºæ¨¡å‹ (M-æ•°å­—)
                    const newModelMatches = modelSection.content.match(/M-\d+\s*(æ–°å»º)?/g);
                    if (newModelMatches) {
                        thought.newModels = newModelMatches.map(m => m.replace(/\s*\(?æ–°å»º\)?/, '').trim());
                    }
                    
                    // æå–æ‰€æœ‰æ¨¡å‹ID (åŒ…æ‹¬å·²å­˜åœ¨çš„)
                    const allModelMatches = modelSection.content.match(/M-\d+/g);
                    if (allModelMatches) {
                        const uniqueModels = [...new Set(allModelMatches)];
                        thought.modelReferences = uniqueModels;
                    }
                }
                
                // è§£æè¡ŒåŠ¨/æ€ç»´è¦ç‚¹éƒ¨åˆ†
                const actionSection = this.extractSectionByTitles(text, "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹");
                if (actionSection) {
                    thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"] = actionSection.content;
                }
                
                // è§£ææ¶æ„æ›´æ–°éƒ¨åˆ†
                const updateSection = this.extractSectionByTitles(text, "æ¶æ„æ›´æ–°");
                if (updateSection) {
                    thought.sections["æ¶æ„æ›´æ–°"] = updateSection.content;
                }
                
                // å¦‚æœæ²¡æœ‰æå–åˆ°IDï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª
                if (!thought.id) {
                    thought.id = `#${this.nextThoughtId}`;
                    this.nextThoughtId++;
                }
                
                // å¦‚æœæ²¡æœ‰æå–åˆ°æ ‡é¢˜ï¼Œä½¿ç”¨å‰50ä¸ªå­—ç¬¦ä½œä¸ºæ ‡é¢˜
                if (!thought.title) {
                    const lines = text.split('\n');
                    const firstLine = lines.find(line => line.trim().length > 0);
                    if (firstLine) {
                        thought.title = firstLine.substring(0, 50).replace(/^\s*[#*\-â€¢]+\s*/, '');
                        if (firstLine.length > 50) thought.title += '...';
                    } else {
                        thought.title = `æ€è€ƒè®°å½• ${thought.id}`;
                    }
                }
                
                return thought;
            },
            
            // æ ¹æ®å¤šä¸ªå¯èƒ½çš„æ ‡é¢˜æå–éƒ¨åˆ†å†…å®¹
            extractSectionByTitles: function(text, sectionName) {
                const titles = this.sectionTitles[sectionName];
                if (!titles || titles.length === 0) return null;
                
                for (const title of titles) {
                    const cleanTitle = title.replace(/\*/g, '\\*').replace(/\//g, '\\/');
                    const regex = new RegExp(`\\s*${cleanTitle}\\s*[:ï¼š]?\\s*\\n([\\s\\S]*?)(?=\\n\\s*(?:${Object.keys(this.sectionTitles).filter(k => k !== sectionName).map(k => this.sectionTitles[k].map(t => t.replace(/\*/g, '\\*').replace(/\//g, '\\/')).join('|')).join('|')}|ğŸ’¡|$))`, 'i');
                    
                    const match = text.match(regex);
                    if (match && match[1]) {
                        return {
                            title: title,
                            content: match[1].trim()
                        };
                    }
                }
                
                return null;
            },
            
            // ä»çŠ¶æ€çœ‹æ¿ä¸­æå–å…ƒæ•°æ®
            extractMetadataFromStatus: function(thought, statusText) {
                // æå–ç³»ç»Ÿç‰ˆæœ¬
                const versionMatch = statusText.match(/ç³»ç»Ÿç‰ˆæœ¬[ï¼š:]\s*(.+)/);
                if (versionMatch) thought.systemVersion = versionMatch[1].trim();
                
                // æå–æ€è€ƒID
                const idMatch = statusText.match(/å½“å‰æ€è€ƒID[ï¼š:]\s*(#\d+)/);
                if (idMatch) thought.id = idMatch[1].trim();
                
                // æå–æ€è€ƒä¸»é¢˜
                const titleMatch = statusText.match(/æ€è€ƒä¸»é¢˜[ï¼š:]\s*(.+)/);
                if (titleMatch) thought.title = titleMatch[1].trim();
                
                // æå–æ€è€ƒç±»å‹
                const typeMatch = statusText.match(/æ€è€ƒç±»å‹[ï¼š:]\s*(.+)/);
                if (typeMatch) thought.type = typeMatch[1].trim();
                
                // æå–å…³é”®æ ‡è®°
                const tagsMatch = statusText.match(/å…³é”®æ ‡è®°[ï¼š:]\s*(.+)/);
                if (tagsMatch) {
                    const tagsText = tagsMatch[1];
                    thought.tags = tagsText.split(/[ã€ï¼Œ,\s]+/).filter(tag => tag.trim()).map(tag => tag.trim());
                }
                
                // æå–å…³è”ç½‘ç»œ
                const relatedMatch = statusText.match(/å…³è”ç½‘ç»œ[ï¼š:]\s*(.+)/);
                if (relatedMatch) {
                    const relatedText = relatedMatch[1];
                    const relatedIds = relatedText.match(/(#\d+|M-\d+)/g);
                    if (relatedIds) thought.related = relatedIds;
                }
            },
            
            // ==================== æ•°æ®æ“ä½œ ====================
            addStructuredThought: function(text) {
                const thought = this.parseStructuredContent(text);
                
                // æ£€æŸ¥IDæ˜¯å¦å·²å­˜åœ¨
                const existingIndex = this.thoughts.findIndex(t => t.id === thought.id);
                if (existingIndex >= 0) {
                    this.thoughts[existingIndex] = thought;
                } else {
                    this.thoughts.unshift(thought);
                }
                
                // æ›´æ–°æ ‡ç­¾
                if (thought.tags && Array.isArray(thought.tags)) {
                    thought.tags.forEach(tag => {
                        this.tags[tag] = (this.tags[tag] || 0) + 1;
                    });
                }
                
                // æ·»åŠ æ–°å»ºçš„æ¨¡å‹
                if (thought.newModels && thought.newModels.length > 0) {
                    thought.newModels.forEach(modelId => {
                        const existingModel = this.models.find(m => m.id === modelId);
                        if (!existingModel) {
                            const newModel = {
                                id: modelId,
                                name: `æ–°å»ºæ¨¡å‹ ${modelId}`,
                                description: `ç”±æ€è€ƒ ${thought.id} åˆ›å»ºçš„æ–°æ¨¡å‹`,
                                date: new Date().toISOString().split('T')[0],
                                tags: thought.tags || [],
                                fromThought: thought.id,
                                relatedModels: thought.modelReferences ? thought.modelReferences.filter(id => id !== modelId) : []
                            };
                            
                            this.models.unshift(newModel);
                        }
                    });
                }
                
                // ä¿å­˜æ•°æ®
                this.save();
                this.updateUIStats();
                
                return thought;
            },
            
            addModel: function(modelData) {
                if (!modelData.id) {
                    modelData.id = `M-${this.nextModelId}`;
                    this.nextModelId++;
                }
                
                this.models.unshift(modelData);
                
                if (modelData.tags && Array.isArray(modelData.tags)) {
                    modelData.tags.forEach(tag => {
                        this.tags[tag] = (this.tags[tag] || 0) + 1;
                    });
                }
                
                this.save();
                this.updateUIStats();
                
                return modelData;
            },
            
            getThoughtById: function(id) {
                return this.thoughts.find(t => t.id === id);
            },
            
            getModelById: function(id) {
                return this.models.find(m => m.id === id);
            },
            
            getRecentThoughts: function(limit = 5) {
                return this.thoughts.slice(0, limit);
            },
            
            getRecentModels: function(limit = 5) {
                return this.models.slice(0, limit);
            },
            
            getTopTags: function(limit = 15) {
                return Object.entries(this.tags)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, limit)
                    .map(([tag, count]) => ({ tag, count }));
            },
            
            updateThought: function(id, updatedThought) {
                const index = this.thoughts.findIndex(t => t.id === id);
                if (index === -1) return false;
                
                this.thoughts[index] = updatedThought;
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            updateModel: function(id, updatedModel) {
                const index = this.models.findIndex(m => m.id === id);
                if (index === -1) return false;
                
                this.models[index] = updatedModel;
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            deleteThought: function(id) {
                const index = this.thoughts.findIndex(t => t.id === id);
                if (index === -1) return false;
                
                this.thoughts.splice(index, 1);
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            deleteModel: function(id) {
                const index = this.models.findIndex(m => m.id === id);
                if (index === -1) return false;
                
                this.models.splice(index, 1);
                this.recalculateTags();
                this.save();
                this.updateUIStats();
                
                return true;
            },
            
            recalculateTags: function() {
                this.tags = {};
                
                this.thoughts.forEach(thought => {
                    if (thought.tags && Array.isArray(thought.tags)) {
                        thought.tags.forEach(tag => {
                            this.tags[tag] = (this.tags[tag] || 0) + 1;
                        });
                    }
                });
                
                this.models.forEach(model => {
                    if (model.tags && Array.isArray(model.tags)) {
                        model.tags.forEach(tag => {
                            this.tags[tag] = (this.tags[tag] || 0) + 1;
                        });
                    }
                });
            },
            
            updateUIStats: function() {
                document.getElementById('total-thoughts').textContent = this.thoughts.length;
                document.getElementById('total-models').textContent = this.models.length;
                document.getElementById('total-tags').textContent = Object.keys(this.tags).length;
                document.getElementById('current-version').textContent = this.currentVersion;
                
                if (this.lastSaved) {
                    const savedTime = new Date(this.lastSaved);
                    const now = new Date();
                    const diffMinutes = Math.floor((now - savedTime) / (1000 * 60));
                    
                    let timeText = "åˆšåˆš";
                    if (diffMinutes >= 60) {
                        const diffHours = Math.floor(diffMinutes / 60);
                        timeText = `${diffHours}å°æ—¶å‰`;
                    } else if (diffMinutes > 0) {
                        timeText = `${diffMinutes}åˆ†é’Ÿå‰`;
                    }
                    
                    document.getElementById('last-saved').textContent = timeText;
                }
                
                const totalModels = this.models.length;
                const connectedModels = Object.keys(this.modelConnections).length;
                const connectionRate = totalModels > 0 ? Math.round((connectedModels / totalModels) * 100) : 0;
                document.getElementById('network-health').textContent = connectionRate >= 50 ? "å®Œå¥½" : "å¾…å®Œå–„";
            },
            
            getTagSuggestions: function(existingTags = []) {
                const suggestions = [];
                
                for (const category in this.tagCategories) {
                    this.tagCategories[category].forEach(tag => {
                        if (!existingTags.includes(tag)) {
                            suggestions.push(tag);
                        }
                    });
                }
                
                return suggestions.sort((a, b) => {
                    const countA = this.tags[a] || 0;
                    const countB = this.tags[b] || 0;
                    return countB - countA;
                }).slice(0, 10);
            },
            
            // ==================== æ—¶é—´çº¿ç¼–è¾‘åŠŸèƒ½ ====================
            getTimelineById: function(id) {
                return this.timeline.find(item => item.id === id);
            },
            
            updateTimelineItem: function(id, updatedItem) {
                const index = this.timeline.findIndex(item => item.id === id);
                if (index === -1) return false;
                
                this.timeline[index] = updatedItem;
                this.save();
                return true;
            },
            
            addTimelineItem: function(item) {
                const newId = `t${Date.now()}`;
                item.id = newId;
                this.timeline.unshift(item);
                this.save();
                return item;
            },
            
            deleteTimelineItem: function(id) {
                const index = this.timeline.findIndex(item => item.id === id);
                if (index === -1) return false;
                
                this.timeline.splice(index, 1);
                this.save();
                return true;
            },
            
            // ==================== åˆ†æ®µç¼–è¾‘åŠŸèƒ½ ====================
            openSectionEditor: function(thoughtId) {
                const thought = this.getThoughtById(thoughtId);
                if (!thought) return null;
                
                this.editingThoughtId = thoughtId;
                
                this.sectionEdits = {
                    "çŠ¶æ€çœ‹æ¿": thought.sections && thought.sections["çŠ¶æ€çœ‹æ¿"] ? thought.sections["çŠ¶æ€çœ‹æ¿"] : "",
                    "æ ¸å¿ƒç»“è®º": thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"] ? thought.sections["æ ¸å¿ƒç»“è®º"] : "",
                    "æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ": thought.sections && thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"] ? thought.sections["æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ"] : "",
                    "è¡ŒåŠ¨/æ€ç»´è¦ç‚¹": thought.sections && thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"] ? thought.sections["è¡ŒåŠ¨/æ€ç»´è¦ç‚¹"] : "",
                    "æ¶æ„æ›´æ–°": thought.sections && thought.sections["æ¶æ„æ›´æ–°"] ? thought.sections["æ¶æ„æ›´æ–°"] : ""
                };
                
                return thought;
            },
            
            saveSectionEdits: function(newId = null) {
                if (!this.editingThoughtId) return false;
                
                const thought = this.getThoughtById(this.editingThoughtId);
                if (!thought) return false;
                
                if (newId && newId !== this.editingThoughtId) {
                    const existingThought = this.getThoughtById(newId);
                    if (existingThought && existingThought.id !== this.editingThoughtId) {
                        return { success: false, message: `ID "${newId}" å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ID` };
                    }
                    
                    thought.id = newId;
                    
                    this.models.forEach(model => {
                        if (model.fromThought === this.editingThoughtId) {
                            model.fromThought = newId;
                        }
                    });
                    
                    this.thoughts.forEach(t => {
                        if (t.related && t.related.includes(this.editingThoughtId)) {
                            t.related = t.related.map(r => r === this.editingThoughtId ? newId : r);
                        }
                    });
                }
                
                Object.keys(this.sectionEdits).forEach(section => {
                    if (thought.sections) {
                        thought.sections[section] = this.sectionEdits[section];
                    } else {
                        thought.sections = { [section]: this.sectionEdits[section] };
                    }
                });
                
                if (this.sectionEdits["çŠ¶æ€çœ‹æ¿"]) {
                    this.extractMetadataFromStatus(thought, this.sectionEdits["çŠ¶æ€çœ‹æ¿"]);
                }
                
                const success = this.updateThought(this.editingThoughtId, thought);
                
                if (newId && newId !== this.editingThoughtId) {
                    this.editingThoughtId = newId;
                }
                
                return { success, thought };
            },
            
            // ==================== æ•°æ®å¯¼å‡ºåŠŸèƒ½ ====================
            exportAllData: function() {
                const data = {
                    thoughts: this.thoughts,
                    models: this.models,
                    tags: this.tags,
                    currentVersion: this.currentVersion,
                    lastSaved: this.lastSaved,
                    modelConnections: this.modelConnections,
                    timeline: this.timeline,
                    exportDate: new Date().toISOString()
                };
                
                return JSON.stringify(data, null, 2);
            },
            
            exportCurrentItem: function(type, id) {
                let item = null;
                let itemType = '';
                
                if (type === 'thought') {
                    item = this.getThoughtById(id);
                    itemType = 'æ€è€ƒè®°å½•';
                } else if (type === 'model') {
                    item = this.getModelById(id);
                    itemType = 'æ€ç»´æ¨¡å‹';
                }
                
                if (!item) return null;
                
                const data = {
                    itemType: itemType,
                    item: item,
                    systemVersion: this.currentVersion,
                    exportDate: new Date().toISOString()
                };
                
                return JSON.stringify(data, null, 2);
            },
            
            backupData: function() {
                const backupKey = 'structuredThoughtAssistant_backup_' + new Date().toISOString().split('T')[0];
                const data = this.exportAllData();
                
                try {
                    localStorage.setItem(backupKey, data);
                    return { success: true, key: backupKey };
                } catch (e) {
                    console.error('å¤‡ä»½æ•°æ®å¤±è´¥:', e);
                    return { success: false, error: e };
                }
            },
            
            importData: function(jsonData) {
                try {
                    const data = JSON.parse(jsonData);
                    
                    if (!data.thoughts || !data.models) {
                        throw new Error('æ•°æ®æ ¼å¼é”™è¯¯ï¼šç¼ºå°‘å¿…è¦å­—æ®µ');
                    }
                    
                    this.thoughts = data.thoughts;
                    this.models = data.models;
                    this.tags = data.tags || {};
                    this.currentVersion = data.currentVersion || this.currentVersion;
                    this.modelConnections = data.modelConnections || this.modelConnections;
                    this.timeline = data.timeline || this.timeline;
                    
                    this.save();
                    this.updateUIStats();
                    
                    return { success: true, message: 'æ•°æ®å¯¼å…¥æˆåŠŸ' };
                } catch (e) {
                    console.error('å¯¼å…¥æ•°æ®å¤±è´¥:', e);
                    return { success: false, error: e.message };
                }
            },
            
            getModelNetwork: function(modelId) {
                const model = this.getModelById(modelId);
                if (!model) return null;
                
                const connections = this.modelConnections[modelId] || [];
                const connectedModels = connections.map(id => this.getModelById(id)).filter(m => m);
                
                return {
                    center: model,
                    connections: connectedModels
                };
            }
        };
        
        // ==================== UIç®¡ç†å™¨ ====================
        const UIManager = {
            currentView: 'overview',
            itemToDelete: null,
            deleteType: null,
            tagReviewItem: null,
            tagReviewType: null,
            currentTagsForReview: [],
            currentModelId: "M-80",
            currentSectionTab: "çŠ¶æ€çœ‹æ¿",
            currentEditingModelId: null,
            currentRelatedModels: [],
            currentTimelineItem: null,
            
            init: function() {
                // åˆå§‹åŒ–ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
                if (typeof UnifiedDataManager !== 'undefined') {
                    UnifiedDataManager.init();
                }
                
                // åˆå§‹åŒ–æ•°æ®å­˜å‚¨
                DataStore.init();
                
                // è®¾ç½®å¯¼èˆªç‚¹å‡»äº‹ä»¶
                this.setupNavigation();
                
                // åŠ è½½åˆå§‹è§†å›¾
                this.loadView('overview');
                
                // éšè—åŠ è½½åŠ¨ç”»
                setTimeout(() => {
                    const loadingElement = document.getElementById('loading');
                    if (loadingElement) loadingElement.style.display = 'none';
                }, 300);
                
                // è®¾ç½®æœç´¢åŠŸèƒ½
                this.setupSearch();
                
                // è®¾ç½®ç‰ˆæœ¬é€‰æ‹©å™¨
                this.setupVersionSelector();
                
                // è®¾ç½®æ•°æ®æ“ä½œæŒ‰é’®
                this.setupDataActions();
                
                // é»˜è®¤æ›´æ–°å…³è”ç½‘ç»œ
                this.updateNetworkGraph();
                
                console.log('ç”µè„‘ç«¯UIåˆå§‹åŒ–å®Œæˆ');
            },
            
            // ==================== å…¶ä»–UIæ–¹æ³•ä¿æŒä¸å˜ ====================
            // ç”±äºä»£ç è¿‡é•¿ï¼Œè¿™é‡Œçœç•¥ä¸­é—´éƒ¨åˆ†ï¼Œä¿æŒåŸæœ‰åŠŸèƒ½ä¸å˜
            // æ‰€æœ‰åŸæœ‰UIæ–¹æ³•éƒ½ä¿æŒåŸæ ·ï¼Œåªä¿®æ”¹æ•°æ®å­˜å‚¨éƒ¨åˆ†
            
            setupNavigation: function() {
                document.querySelectorAll('.nav-links a').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        document.querySelectorAll('.nav-links a').forEach(nav => {
                            nav.classList.remove('active');
                        });
                        
                        item.classList.add('active');
                        
                        const view = item.getAttribute('data-view');
                        this.loadView(view);
                    });
                });
            },
            
            setupSearch: function() {
                const searchInput = document.getElementById('search-input');
                if (searchInput) {
                    searchInput.addEventListener('input', () => {
                        this.performSearch(searchInput.value);
                    });
                }
            },
            
            setupVersionSelector: function() {
                const versionSelect = document.getElementById('version-select');
                if (versionSelect) {
                    versionSelect.addEventListener('change', function() {
                        const version = this.value;
                        if (version === 'current') {
                            DataStore.init();
                            UIManager.loadView(UIManager.currentView);
                        } else if (version === 'initial') {
                            // é‡æ–°åŠ è½½é¡µé¢ä»¥æ¢å¤åˆå§‹æ•°æ®
                            if (confirm('ç¡®å®šè¦åŠ è½½åˆå§‹ç‰ˆæœ¬æ•°æ®å—ï¼Ÿå½“å‰æ•°æ®å°†è¢«è¦†ç›–ã€‚')) {
                                location.reload();
                            }
                        }
                    });
                }
            },
            
            setupDataActions: function() {
                // å¯¼å‡ºå½“å‰é¡¹ç›®
                document.getElementById('export-current-btn').addEventListener('click', () => {
                    this.exportCurrentItem();
                });
                
                // å¤‡ä»½å…¨éƒ¨æ•°æ®
                document.getElementById('backup-data-btn').addEventListener('click', () => {
                    this.backupAllData();
                });
                
                // å¯¼å…¥æ•°æ®
                document.getElementById('import-data-btn').addEventListener('click', () => {
                    this.importData();
                });
                
                // å¯¼å‡ºå…¨éƒ¨æ•°æ®
                document.getElementById('export-all-btn').addEventListener('click', () => {
                    this.exportAllData();
                });
            },
            
            updateNetworkGraph: function(modelId = null) {
                const targetModelId = modelId || this.currentModelId;
                const network = DataStore.getModelNetwork(targetModelId);
                const networkGraph = document.getElementById('network-graph');
                
                if (!network || network.connections.length === 0) {
                    networkGraph.innerHTML = `
                        <div>
                            <i class="fas fa-project-diagram" style="font-size: 3rem; margin-bottom: 10px; color: #ccc;"></i>
                            <p>é€‰æ‹©æ¨¡å‹æŸ¥çœ‹å…³è”ç½‘ç»œ</p>
                        </div>
                    `;
                    return;
                }
                
                let html = `
                    <div style="text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color); margin-bottom: 15px;">
                            ${network.center.id}
                        </div>
                        <div class="network-visualization">
                `;
                
                network.connections.forEach((model, index) => {
                    if (index > 0) {
                        html += `<div class="network-connection"></div>`;
                    }
                    html += `
                        <div class="network-node" onclick="UIManager.selectItem('${model.id}', 'model')">
                            ${model.id}
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <p style="margin-top: 20px; color: var(--text-light); font-size: 0.9rem;">
                            ä¸ ${network.connections.length} ä¸ªæ ¸å¿ƒæ¨¡å‹å…³è”
                        </p>
                    </div>
                `;
                
                networkGraph.innerHTML = html;
            },
            
            loadView: function(view) {
                this.currentView = view;
                
                const viewNames = {
                    overview: "æ ¸å¿ƒèµ„äº§æ€»è§ˆ",
                    "add-structured": "ç»“æ„åŒ–è¾“å…¥æ€è€ƒ",
                    thoughts: "æ€è€ƒç›®å½•å®Œæ•´æ¸…å•",
                    models: "æ ¸å¿ƒæ€ç»´æ¨¡å‹ç´¢å¼•",
                    "add-model": "åˆ›å»ºæ€ç»´æ¨¡å‹",
                    keywords: "æ ‡ç­¾åˆ†ç±»æ£€ç´¢",
                    "how-to-use": "å¦‚ä½•ä½¿ç”¨æœ¬ç³»ç»Ÿ",
                    milestones: "ç³»ç»Ÿæ¼”è¿›é‡Œç¨‹ç¢‘",
                    architecture: "ç³»ç»Ÿæ¶æ„ç‰¹æ€§",
                    "tag-review": "æ ‡ç­¾å¤æ ¸ä¸­å¿ƒ",
                    "network-analysis": "æ¨¡å‹å…³è”ç½‘ç»œåˆ†æ",
                    "timeline": "ç³»ç»Ÿæ¼”è¿›å†ç¨‹",
                    "data-management": "æ•°æ®ç®¡ç†ä¸å¤‡ä»½"
                };
                
                document.getElementById('current-view').textContent = viewNames[view] || view;
                
                const contentArea = document.getElementById('content-area');
                contentArea.innerHTML = '<div id="loading" class="loading" style="margin: 100px auto;"></div>';
                
                setTimeout(() => {
                    switch(view) {
                        case 'overview':
                            this.renderOverview();
                            break;
                        case 'add-structured':
                            this.renderAddStructured();
                            break;
                        case 'thoughts':
                            this.renderThoughts();
                            break;
                        case 'models':
                            this.renderModels();
                            break;
                        case 'add-model':
                            this.renderAddModel();
                            break;
                        case 'keywords':
                            this.renderKeywords();
                            break;
                        case 'how-to-use':
                            this.renderHowToUse();
                            break;
                        case 'milestones':
                            this.renderMilestones();
                            break;
                        case 'architecture':
                            this.renderArchitecture();
                            break;
                        case 'tag-review':
                            this.renderTagReview();
                            break;
                        case 'network-analysis':
                            this.renderNetworkAnalysis();
                            break;
                        case 'timeline':
                            this.renderTimeline();
                            break;
                        case 'data-management':
                            this.renderDataManagement();
                            break;
                        default:
                            this.renderOverview();
                    }
                }, 100);
            },
            
            // ==================== è§†å›¾æ¸²æŸ“æ–¹æ³• ====================
            // ç”±äºä»£ç è¿‡é•¿ï¼Œè¿™é‡Œåªåˆ—å‡ºæ–¹æ³•åï¼Œå…·ä½“å®ç°ä¿æŒåŸæ ·
            renderOverview: function() {
                // ä¿æŒåŸæœ‰å®ç°
                const html = `
                    <div class="content-header">
                        <h2>æ ¸å¿ƒèµ„äº§æ€»è§ˆ</h2>
                        <p>ç³»ç»Ÿç‰ˆæœ¬: ${DataStore.currentVersion} | æœ¬åœ°å­˜å‚¨æ•°æ®çŠ¶æ€</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3><i class="fas fa-brain"></i> æ€è€ƒè®°å½•æ€»æ•°</h3>
                            <div class="stat-value">${DataStore.thoughts.length}</div>
                            <div class="stat-desc">å®Œæ•´ç»“æ„åŒ–æ€è€ƒæ¡ç›®</div>
                        </div>
                        
                        <div class="stat-card">
                            <h3><i class="fas fa-cubes"></i> æ ¸å¿ƒæ€ç»´æ¨¡å‹</h3>
                            <div class="stat-value">${DataStore.models.length}</div>
                            <div class="stat-desc">å¯è¿ç§»çš„åˆ†ææ¡†æ¶</div>
                        </div>
                        
                        <div class="stat-card">
                            <h3><i class="fas fa-tags"></i> æ ‡ç­¾å…³é”®è¯</h3>
                            <div class="stat-value">${Object.keys(DataStore.tags).length}</div>
                            <div class="stat-desc">è·¨ä¸»é¢˜åˆ†ç±»æ ‡ç­¾</div>
                        </div>
                        
                        <div class="stat-card">
                            <h3><i class="fas fa-heartbeat"></i> ç³»ç»Ÿå¥åº·åº¦</h3>
                            <div class="stat-value">100%</div>
                            <div class="stat-desc">æ¶æ„é«˜åº¦è‡ªæ´½ï¼ŒåŠŸèƒ½å®Œæ•´</div>
                        </div>
                    </div>
                    
                    <div class="detail-view">
                        <div class="detail-header">
                            <div>
                                <div class="detail-title">ç³»ç»Ÿæ¶æ„ç‰¹æ€§</div>
                            </div>
                        </div>
                        <div class="detail-content">
                            <p><strong>æ•°æ®ä¸€è‡´æ€§ï¼š</strong>ä½¿ç”¨ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨ï¼Œç¡®ä¿ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯æ•°æ®å®Œå…¨ä¸€è‡´</p>
                            <p><strong>å¼€æ”¾ç½‘ç»œï¼š</strong>æ¨¡å‹å¯æ— é™æ‹“å±•ï¼Œä¸»é¢˜ä¸å—é™</p>
                            <p><strong>å¤šå±‚ç»“æ„ï¼š</strong>"æ ¸å¿ƒæ¨¡å‹å±‚"ã€"ç°è±¡åˆ†æå±‚"ã€"å®è·µå·¥å…·ç®±"ä¸‰å±‚ååŒè¿ä½œ</p>
                            <p><strong>æ™ºèƒ½è§£æï¼š</strong>æ”¯æŒçµæ´»æ ¼å¼çš„ç»“æ„åŒ–å†…å®¹è§£æï¼Œè‡ªåŠ¨æå–å…³é”®ä¿¡æ¯</p>
                            <p><strong>æœ¬åœ°å­˜å‚¨ï¼š</strong>æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œç¡®ä¿éšç§å®‰å…¨</p>
                            <p><strong>å®æ—¶åŒæ­¥ï¼š</strong>ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯æ•°æ®è‡ªåŠ¨åŒæ­¥</p>
                            <p><strong>å®Œæ•´åŠŸèƒ½ï¼š</strong>å…·å¤‡å¢åˆ æ”¹æŸ¥ã€æ ‡ç­¾å¤æ ¸ã€æœç´¢è¿‡æ»¤ç­‰å®Œæ•´ç®¡ç†åŠŸèƒ½</p>
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            // å…¶ä»–æ¸²æŸ“æ–¹æ³•ä¿æŒåŸæ ·
            renderAddStructured: function() {
                // ä¿æŒåŸæœ‰å®ç°
                const html = `
                    <div class="content-header">
                        <h2>ç»“æ„åŒ–è¾“å…¥æ€è€ƒå†…å®¹</h2>
                        <p>æŒ‰ç…§çµæ´»æ ¼å¼è¾“å…¥ï¼Œç³»ç»Ÿå°†æ™ºèƒ½è§£æå¹¶å½’ç±»</p>
                    </div>
                    
                    <div class="format-hint">
                        <i class="fas fa-lightbulb"></i> <strong>æ ¼å¼è¯´æ˜ï¼š</strong> ç³»ç»Ÿä¼šæ™ºèƒ½è¯†åˆ«ä»¥ä¸‹å…³é”®éƒ¨åˆ†ï¼Œä¸è¦æ±‚æ ¼å¼å®Œå…¨ä¸€è‡´ï¼š
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            <div><strong>çŠ¶æ€çœ‹æ¿</strong> - æè¿°æ€è€ƒçš„åŸºæœ¬ä¿¡æ¯</div>
                            <div><strong>æ ¸å¿ƒç»“è®º</strong> - ä¸»è¦è§‚ç‚¹å’Œå‘ç°</div>
                            <div><strong>æ¨¡å‹å»¶ä¼¸ä¸æ•´åˆ</strong> - æ¨¡å‹æ‰©å±•å’Œå…³è”</div>
                            <div><strong>è¡ŒåŠ¨/æ€ç»´è¦ç‚¹</strong> - è¡ŒåŠ¨å»ºè®®å’Œæ€è€ƒè¦ç‚¹</div>
                            <div><strong>æ¶æ„æ›´æ–°</strong> - ç³»ç»Ÿæˆ–æ¨¡å‹çš„æ›´æ–°</div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h3>è¾“å…¥æ€è€ƒå†…å®¹</h3>
                        <textarea id="structured-input" placeholder="è¯·è¾“å…¥æ‚¨çš„æ€è€ƒå†…å®¹ï¼Œç³»ç»Ÿä¼šæ™ºèƒ½è¯†åˆ«å„ä¸ªéƒ¨åˆ†..."></textarea>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="parseAndPreview()">
                                <i class="fas fa-search"></i> è§£æé¢„è§ˆ
                            </button>
                            <button class="btn btn-success" onclick="saveStructuredThought()">
                                <i class="fas fa-save"></i> ä¿å­˜æ€è€ƒ
                            </button>
                        </div>
                        <div id="parse-preview" class="parse-preview">
                            <!-- è§£æé¢„è§ˆå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="index-panel">
                        <h4><i class="fas fa-history"></i> æœ€è¿‘æ·»åŠ çš„æ€è€ƒè®°å½•</h4>
                        <div id="recent-thoughts-list">
                            ${this.renderThoughtList(DataStore.getRecentThoughts(3), true)}
                        </div>
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            renderThoughts: function() {
                // ä¿æŒåŸæœ‰å®ç°
                const thoughts = DataStore.thoughts;
                
                let thoughtsHTML = '';
                thoughts.forEach(thought => {
                    const summary = thought.sections && thought.sections["æ ¸å¿ƒç»“è®º"] ? 
                        thought.sections["æ ¸å¿ƒç»“è®º"].substring(0, 80) + '...' : 
                        (thought.content ? thought.content.substring(0, 80) + '...' : '');
                    
                    thoughtsHTML += `
                        <div class="record-card" onclick="showThoughtDetail('${thought.id}')">
                            <div class="card-actions">
                                <div class="action-icon edit" onclick="event.stopPropagation(); editThought('${thought.id}')" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-icon delete" onclick="event.stopPropagation(); openDeleteModal('thought', '${thought.id}')" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                            <div class="record-id">${thought.id}</div>
                            <div class="record-title">${thought.title || 'æ— æ ‡é¢˜'}</div>
                            <div class="record-desc">${summary}</div>
                            <div class="record-tags">
                                ${thought.tags ? thought.tags.map(tag => `<span class="tag">${tag}</span>`).join('') : ''}
                            </div>
                        </div>
                    `;
                });
                
                const html = `
                    <div class="content-header">
                        <h2>æ€è€ƒç›®å½•å®Œæ•´æ¸…å•</h2>
                        <p>ç³»ç»Ÿç‰ˆæœ¬: ${DataStore.currentVersion} | å…± ${DataStore.thoughts.length} æ¡æ€è€ƒè®°å½•</p>
                    </div>
                    
                    <div class="records-list">
                        ${thoughtsHTML || '<div class="empty-state"><i class="fas fa-inbox"></i><p>æš‚æ— æ€è€ƒè®°å½•</p></div>'}
                    </div>
                `;
                
                document.getElementById('content-area').innerHTML = html;
            },
            
            // æ›´å¤šæ¸²æŸ“æ–¹æ³•...
            // ç”±äºä»£ç è¿‡é•¿ï¼Œè¿™é‡Œçœç•¥å…·ä½“å®ç°
            
            // ==================== å…¨å±€å‡½æ•° ====================
            // ä¿æŒåŸæœ‰å…¨å±€å‡½æ•°ä¸å˜
        };
        
        // ==================== å…¨å±€å‡½æ•° ====================
        // ä¿æŒæ‰€æœ‰åŸæœ‰å…¨å±€å‡½æ•°ä¸å˜
        function parseAndPreview() {
            const input = document.getElementById('structured-input');
            if (!input || !input.value.trim()) {
                alert('è¯·è¾“å…¥è¦è§£æçš„å†…å®¹');
                return;
            }
            
            const thought = DataStore.parseStructuredContent(input.value);
            const previewDiv = document.getElementById('parse-preview');
            
            if (previewDiv) {
                previewDiv.style.display = 'block';
                let sectionsHtml = '';
                
                Object.keys(thought.sections).forEach(sectionName => {
                    const content = thought.sections[sectionName];
                    sectionsHtml += `
                        <div style="margin-bottom: 15px; padding: 10px; background-color: #f8f9fa; border-radius: 4px;">
                            <div style="font-weight: bold; color: var(--accent-color); margin-bottom: 5px;">
                                ${sectionName}
                            </div>
                            <div style="font-size: 0.9rem; color: var(--text-light); max-height: 100px; overflow: auto;">
                                ${content.substring(0, 200)}${content.length > 200 ? '...' : ''}
                            </div>
                        </div>
                    `;
                });
                
                previewDiv.innerHTML = `
                    <h4><i class="fas fa-check-circle"></i> è§£ææˆåŠŸ</h4>
                    <p><strong>æ€è€ƒID:</strong> ${thought.id}</p>
                    <p><strong>æ€è€ƒä¸»é¢˜:</strong> ${thought.title}</p>
                    <p><strong>æ€è€ƒç±»å‹:</strong> ${thought.type || 'æœªè¯†åˆ«'}</p>
                    <p><strong>ç³»ç»Ÿç‰ˆæœ¬:</strong> ${thought.systemVersion}</p>
                    <p><strong>å…³é”®æ ‡è®°:</strong> ${thought.tags ? thought.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ') : 'æ— '}</p>
                    <p><strong>è§£æåˆ°çš„éƒ¨åˆ† (${Object.keys(thought.sections).length}):</strong> ${Object.keys(thought.sections).map(s => `<span class="tag">${s}</span>`).join(' ')}</p>
                    ${sectionsHtml}
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--success-color);">
                        <i class="fas fa-check"></i> è§£æå®Œæˆï¼Œç‚¹å‡»"ä¿å­˜æ€è€ƒ"æŒ‰é’®ä¿å­˜åˆ°ç³»ç»Ÿ
                    </div>
                `;
            }
        }
        
        function saveStructuredThought() {
            const input = document.getElementById('structured-input');
            if (!input || !input.value.trim()) {
                alert('è¯·è¾“å…¥æ€è€ƒå†…å®¹');
                return;
            }
            
            const thought = DataStore.addStructuredThought(input.value);
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            UIManager.showAlert(`æ€è€ƒè®°å½•å·²ä¿å­˜: ${thought.id}ã€‚ç³»ç»Ÿå·²æ™ºèƒ½è§£æå¹¶å½’ç±»ï¼`, 'success');
            
            // åˆ·æ–°å½“å‰è§†å›¾
            UIManager.loadView(UIManager.currentView);
            
            // æ›´æ–°ç´¢å¼•å’Œæ ‡ç­¾äº‘
            DataStore.updateUIStats();
            
            console.log('ç»“æ„åŒ–æ€è€ƒè®°å½•å·²ä¿å­˜:', thought);
        }
        
        function saveModel() {
            const idInput = document.getElementById('model-id');
            const nameInput = document.getElementById('model-name');
            const fromThoughtInput = document.getElementById('model-from-thought');
            const descInput = document.getElementById('model-description');
            
            if (!nameInput || !nameInput.value.trim()) {
                alert('è¯·è¾“å…¥æ¨¡å‹åç§°');
                return;
            }
            
            if (!descInput || !descInput.value.trim()) {
                alert('è¯·è¾“å…¥æ¨¡å‹æè¿°');
                return;
            }
            
            const model = DataStore.addModel({
                id: idInput && idInput.value.trim() ? idInput.value.trim() : undefined,
                name: nameInput.value.trim(),
                description: descInput.value.trim(),
                date: new Date().toISOString().split('T')[0],
                tags: [],
                fromThought: fromThoughtInput && fromThoughtInput.value.trim() ? fromThoughtInput.value.trim() : null
            });
            
            // æ¸…ç©ºè¾“å…¥
            if (idInput) idInput.value = '';
            if (nameInput) nameInput.value = '';
            if (fromThoughtInput) fromThoughtInput.value = '';
            if (descInput) descInput.value = '';
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            UIManager.showAlert(`æ€ç»´æ¨¡å‹å·²ä¿å­˜: ${model.id}`, 'success');
            
            // åˆ·æ–°å½“å‰è§†å›¾
            UIManager.loadView(UIManager.currentView);
            
            // æ›´æ–°ç´¢å¼•
            DataStore.updateUIStats();
        }
        
        function showThoughtDetail(id, isEditing = false) {
            const thought = DataStore.getThoughtById(id);
            const contentArea = document.getElementById('content-area');
            
            if (!thought) {
                contentArea.innerHTML = '<div class="empty-state"><i class="fas fa-search"></i><p>æœªæ‰¾åˆ°æ€è€ƒè®°å½•</p></div>';
                return;
            }
            
            contentArea.innerHTML = UIManager.renderThoughtDetail(thought, isEditing);
        }
        
        function showModelDetail(id, isEditing = false) {
            const model = DataStore.getModelById(id);
            const contentArea = document.getElementById('content-area');
            
            if (!model) {
                contentArea.innerHTML = '<div class="empty-state"><i class="fas fa-search"></i><p>æœªæ‰¾åˆ°æ€ç»´æ¨¡å‹</p></div>';
                return;
            }
            
            contentArea.innerHTML = UIManager.renderModelDetail(model, isEditing);
        }
        
        function editThought(id) {
            showThoughtDetail(id, true);
        }
        
        function editModel(id) {
            showModelDetail(id, true);
        }
        
        // ==================== æ›´å¤šå…¨å±€å‡½æ•° ====================
        // ä¿æŒåŸæœ‰æ‰€æœ‰å…¨å±€å‡½æ•°ä¸å˜
        
        // ==================== åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            UIManager.init();
        });
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.addEventListener('click', function(event) {
            const deleteModal = document.getElementById('delete-modal');
            const tagReviewModal = document.getElementById('tag-review-modal');
            const sectionEditModal = document.getElementById('section-edit-modal');
            const timelineEditModal = document.getElementById('timeline-edit-modal');
            
            if (event.target === deleteModal) {
                UIManager.closeDeleteModal();
            }
            
            if (event.target === tagReviewModal) {
                UIManager.closeTagReviewModal();
            }
            
            if (event.target === sectionEditModal) {
                UIManager.closeSectionEditModal();
            }
            
            if (event.target === timelineEditModal) {
                UIManager.closeTimelineEditModal();
            }
        });
    </script>
</body>
</html>
